{"ast":null,"code":"import e, { useRef as n, useReducer as t, createContext as r, useEffect as i, useLayoutEffect as o, useMemo as a, useCallback as c, useState as u, useContext as l, useImperativeHandle as s, Children as d, cloneElement as v } from \"react\";\nimport { createPortal as f } from \"react-dom\";\nfunction h() {\n  return h = Object.assign ? Object.assign.bind() : function (e) {\n    for (var n = 1; n < arguments.length; n++) {\n      var t = arguments[n];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (e[r] = t[r]);\n    }\n    return e;\n  }, h.apply(null, arguments);\n}\nfunction m(e, n) {\n  if (null == e) return {};\n  var t = {};\n  for (var r in e) if ({}.hasOwnProperty.call(e, r)) {\n    if (n.includes(r)) continue;\n    t[r] = e[r];\n  }\n  return t;\n}\nfunction g(e) {\n  var t = n({\n    fn: e,\n    curr: void 0\n  }).current;\n  if (t.fn = e, !t.curr) {\n    var r = Object.create(null);\n    Object.keys(e).forEach(function (e) {\n      r[e] = function () {\n        var n;\n        return (n = t.fn[e]).call.apply(n, [t.fn].concat([].slice.call(arguments)));\n      };\n    }), t.curr = r;\n  }\n  return t.curr;\n}\nfunction p(e) {\n  return t(function (e, n) {\n    return h({}, e, \"function\" == typeof n ? n(e) : n);\n  }, e);\n}\nvar w = r(void 0),\n  y = \"cubic-bezier(0.25, 0.8, 0.25, 1)\",\n  x = 20,\n  C = \"undefined\" != typeof window && \"ontouchstart\" in window,\n  b = function (e, n, t) {\n    return Math.max(Math.min(e, t), n);\n  },\n  E = function (e, n, t) {\n    return void 0 === n && (n = 0), void 0 === t && (t = 0), b(e, 1 * (1 - t), Math.max(6, n) * (1 + t));\n  },\n  k = \"undefined\" == typeof window || /ServerSideRendering/.test(navigator && navigator.userAgent) ? i : o;\nfunction P(e, t, r) {\n  var o = n(t);\n  o.current = t, i(function () {\n    function n(e) {\n      o.current(e);\n    }\n    return e && window.addEventListener(e, n, r), function () {\n      e && window.removeEventListener(e, n);\n    };\n  }, [e]);\n}\nvar _ = [\"container\"];\nfunction M(n) {\n  var t = n.container,\n    r = void 0 === t ? document.body : t,\n    i = m(n, _);\n  return f(e.createElement(\"div\", h({}, i)), r);\n}\nfunction Y(n) {\n  return e.createElement(\"svg\", h({\n    width: \"44\",\n    height: \"44\",\n    viewBox: \"0 0 768 768\"\n  }, n), e.createElement(\"path\", {\n    d: \"M607.5 205.5l-178.5 178.5 178.5 178.5-45 45-178.5-178.5-178.5 178.5-45-45 178.5-178.5-178.5-178.5 45-45 178.5 178.5 178.5-178.5z\"\n  }));\n}\nfunction X(n) {\n  return e.createElement(\"svg\", h({\n    width: \"44\",\n    height: \"44\",\n    viewBox: \"0 0 768 768\"\n  }, n), e.createElement(\"path\", {\n    d: \"M640.5 352.5v63h-390l178.5 180-45 45-256.5-256.5 256.5-256.5 45 45-178.5 180h390z\"\n  }));\n}\nfunction N(n) {\n  return e.createElement(\"svg\", h({\n    width: \"44\",\n    height: \"44\",\n    viewBox: \"0 0 768 768\"\n  }, n), e.createElement(\"path\", {\n    d: \"M384 127.5l256.5 256.5-256.5 256.5-45-45 178.5-180h-390v-63h390l-178.5-180z\"\n  }));\n}\nfunction W() {\n  return i(function () {\n    var e = document.body.style,\n      n = e.overflow;\n    return e.overflow = \"hidden\", function () {\n      e.overflow = n;\n    };\n  }, []), null;\n}\nfunction S(e) {\n  var n = e.touches[0],\n    t = n.clientX,\n    r = n.clientY;\n  if (e.touches.length >= 2) {\n    var i = e.touches[1],\n      o = i.clientX,\n      a = i.clientY;\n    return [(t + o) / 2, (r + a) / 2, Math.sqrt(Math.pow(o - t, 2) + Math.pow(a - r, 2))];\n  }\n  return [t, r, 0];\n}\nvar T = function (e, n, t, r) {\n  var i,\n    o = t * n,\n    a = (o - r) / 2,\n    c = e;\n  return o <= r ? (i = 1, c = 0) : e > 0 && a - e <= 0 ? (i = 2, c = a) : e < 0 && a + e <= 0 && (i = 3, c = -a), [i, c];\n};\nfunction V(e, n, t, r, i, o, a, c, u, l) {\n  void 0 === a && (a = innerWidth / 2), void 0 === c && (c = innerHeight / 2), void 0 === u && (u = 0), void 0 === l && (l = 0);\n  var s = T(e, o, t, innerWidth)[0],\n    d = T(n, o, r, innerHeight),\n    v = innerWidth / 2,\n    f = innerHeight / 2;\n  return {\n    x: a - o / i * (a - (v + e)) - v + (r / t >= 3 && t * o === innerWidth ? 0 : s ? u / 2 : u),\n    y: c - o / i * (c - (f + n)) - f + (d[0] ? l / 2 : l),\n    lastCX: a,\n    lastCY: c\n  };\n}\nfunction R(e, n, t) {\n  var r = e % 180 != 0;\n  return r ? [t, n, r] : [n, t, r];\n}\nfunction A(e, n, t) {\n  var r = R(t, innerWidth, innerHeight),\n    i = r[0],\n    o = r[1],\n    a = 0,\n    c = i,\n    u = o,\n    l = e / n * o,\n    s = n / e * i;\n  return e < i && n < o ? (c = e, u = n) : e < i && n >= o ? c = l : e >= i && n < o || e / n > i / o ? u = s : n / e >= 3 && !r[2] ? a = ((u = s) - o) / 2 : c = l, {\n    width: c,\n    height: u,\n    x: 0,\n    y: a,\n    pause: !0\n  };\n}\nfunction I(e, t) {\n  var r = t.leading,\n    i = void 0 !== r && r,\n    o = t.maxWait,\n    a = t.wait,\n    u = void 0 === a ? o || 0 : a,\n    l = n(e);\n  l.current = e;\n  var s = n(0),\n    d = n(),\n    v = function () {\n      return d.current && clearTimeout(d.current);\n    },\n    f = c(function () {\n      var e = [].slice.call(arguments),\n        n = Date.now();\n      function t() {\n        s.current = n, v(), l.current.apply(null, e);\n      }\n      var r = s.current,\n        a = n - r;\n      if (0 === r && (i && t(), s.current = n), void 0 !== o) {\n        if (a > o) return void t();\n      } else a < u && (s.current = n);\n      v(), d.current = setTimeout(function () {\n        t(), s.current = 0;\n      }, u);\n    }, [u, o, i]);\n  return f.cancel = v, f;\n}\nvar H = function (e, n, t) {\n    return F(e, n, t, 100, function (e) {\n      return e;\n    }, function () {\n      return F(n, e, t);\n    });\n  },\n  L = function (e) {\n    return 1 - Math.pow(1 - e, 4);\n  };\nfunction F(e, n, t, r, i, o) {\n  void 0 === r && (r = 400), void 0 === i && (i = L);\n  var a = n - e;\n  if (0 !== a) {\n    var c = Date.now(),\n      u = 0,\n      l = function () {\n        var n = Math.min(1, (Date.now() - c) / r);\n        t(e + i(n) * a) && n < 1 ? s() : (cancelAnimationFrame(u), n >= 1 && o && o());\n      };\n    s();\n  }\n  function s() {\n    u = requestAnimationFrame(l);\n  }\n}\nvar D = {\n    T: 0,\n    L: 0,\n    W: 0,\n    H: 0,\n    FIT: void 0\n  },\n  B = function () {\n    var e = n(!1);\n    return i(function () {\n      return e.current = !0, function () {\n        e.current = !1;\n      };\n    }, []), e;\n  },\n  O = [\"className\"];\nfunction z(n) {\n  var t = n.className,\n    r = void 0 === t ? \"\" : t,\n    i = m(n, O);\n  return e.createElement(\"div\", h({\n    className: \"PhotoView__Spinner \" + r\n  }, i), e.createElement(\"svg\", {\n    viewBox: \"0 0 32 32\",\n    width: \"36\",\n    height: \"36\",\n    fill: \"white\"\n  }, e.createElement(\"path\", {\n    opacity: \".25\",\n    d: \"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4\"\n  }), e.createElement(\"path\", {\n    d: \"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z\"\n  })));\n}\nvar j = [\"src\", \"loaded\", \"broken\", \"className\", \"onPhotoLoad\", \"loadingElement\", \"brokenElement\"];\nfunction q(n) {\n  var t = n.src,\n    r = n.loaded,\n    i = n.broken,\n    o = n.className,\n    a = n.onPhotoLoad,\n    c = n.loadingElement,\n    u = n.brokenElement,\n    l = m(n, j),\n    s = B();\n  return t && !i ? e.createElement(e.Fragment, null, e.createElement(\"img\", h({\n    className: \"PhotoView__Photo\" + (o ? \" \" + o : \"\"),\n    src: t,\n    onLoad: function (e) {\n      var n = e.target;\n      s.current && a({\n        loaded: !0,\n        naturalWidth: n.naturalWidth,\n        naturalHeight: n.naturalHeight\n      });\n    },\n    onError: function () {\n      s.current && a({\n        broken: !0\n      });\n    },\n    draggable: !1,\n    alt: \"\"\n  }, l)), !r && (c ? e.createElement(\"span\", {\n    className: \"PhotoView__icon\"\n  }, c) : e.createElement(z, {\n    className: \"PhotoView__icon\"\n  }))) : u ? e.createElement(\"span\", {\n    className: \"PhotoView__icon\"\n  }, \"function\" == typeof u ? u({\n    src: t\n  }) : u) : null;\n}\nvar K = {\n  naturalWidth: void 0,\n  naturalHeight: void 0,\n  width: void 0,\n  height: void 0,\n  loaded: void 0,\n  broken: !1,\n  x: 0,\n  y: 0,\n  touched: !1,\n  maskTouched: !1,\n  rotate: 0,\n  scale: 1,\n  CX: 0,\n  CY: 0,\n  lastX: 0,\n  lastY: 0,\n  lastCX: 0,\n  lastCY: 0,\n  lastScale: 1,\n  touchTime: 0,\n  touchLength: 0,\n  pause: !0,\n  stopRaf: !0,\n  reach: void 0\n};\nfunction U(t) {\n  var r = t.item,\n    o = r.src,\n    a = r.render,\n    c = r.width,\n    l = void 0 === c ? 0 : c,\n    s = r.height,\n    d = void 0 === s ? 0 : s,\n    v = r.originRef,\n    f = t.visible,\n    m = t.speed,\n    w = t.easing,\n    y = t.wrapClassName,\n    x = t.className,\n    b = t.style,\n    _ = t.loadingElement,\n    M = t.brokenElement,\n    Y = t.onPhotoTap,\n    X = t.onMaskTap,\n    N = t.onReachMove,\n    W = t.onReachUp,\n    L = t.onPhotoResize,\n    O = t.isActive,\n    z = t.expose,\n    j = p(K),\n    U = j[0],\n    G = j[1],\n    J = n(0),\n    Q = B(),\n    Z = U.naturalWidth,\n    $ = void 0 === Z ? l : Z,\n    ee = U.naturalHeight,\n    ne = void 0 === ee ? d : ee,\n    te = U.width,\n    re = void 0 === te ? l : te,\n    ie = U.height,\n    oe = void 0 === ie ? d : ie,\n    ae = U.loaded,\n    ce = void 0 === ae ? !o : ae,\n    ue = U.broken,\n    le = U.x,\n    se = U.y,\n    de = U.touched,\n    ve = U.stopRaf,\n    fe = U.maskTouched,\n    he = U.rotate,\n    me = U.scale,\n    ge = U.CX,\n    pe = U.CY,\n    we = U.lastX,\n    ye = U.lastY,\n    xe = U.lastCX,\n    Ce = U.lastCY,\n    be = U.lastScale,\n    Ee = U.touchTime,\n    ke = U.touchLength,\n    Pe = U.pause,\n    _e = U.reach,\n    Me = g({\n      onScale: function (e) {\n        return Ye(E(e));\n      },\n      onRotate: function (e) {\n        he !== e && (z({\n          rotate: e\n        }), G(h({\n          rotate: e\n        }, A($, ne, e))));\n      }\n    });\n  function Ye(e, n, t) {\n    me !== e && (z({\n      scale: e\n    }), G(h({\n      scale: e\n    }, V(le, se, re, oe, me, e, n, t), e <= 1 && {\n      x: 0,\n      y: 0\n    })));\n  }\n  var Xe = I(function (e, n, t) {\n    if (void 0 === t && (t = 0), (de || fe) && O) {\n      var r = R(he, re, oe),\n        i = r[0],\n        o = r[1];\n      if (0 === t && 0 === J.current) {\n        var a = Math.abs(e - ge) <= 20,\n          c = Math.abs(n - pe) <= 20;\n        if (a && c) return void G({\n          lastCX: e,\n          lastCY: n\n        });\n        J.current = a ? n > pe ? 3 : 2 : 1;\n      }\n      var u,\n        l = e - xe,\n        s = n - Ce;\n      if (0 === t) {\n        var d = T(l + we, me, i, innerWidth)[0],\n          v = T(s + ye, me, o, innerHeight);\n        u = function (e, n, t, r) {\n          return n && 1 === e || \"x\" === r ? \"x\" : t && e > 1 || \"y\" === r ? \"y\" : void 0;\n        }(J.current, d, v[0], _e), void 0 !== u && N(u, e, n, me);\n      }\n      if (\"x\" === u || fe) return void G({\n        reach: \"x\"\n      });\n      var f = E(me + (t - ke) / 100 / 2 * me, $ / re, .2);\n      z({\n        scale: f\n      }), G(h({\n        touchLength: t,\n        reach: u,\n        scale: f\n      }, V(le, se, re, oe, me, f, e, n, l, s)));\n    }\n  }, {\n    maxWait: 8\n  });\n  function Ne(e) {\n    return !ve && !de && (Q.current && G(h({}, e, {\n      pause: f\n    })), Q.current);\n  }\n  var We,\n    Se,\n    Te,\n    Ve,\n    Re,\n    Ae,\n    Ie,\n    He,\n    Le = (Re = function (e) {\n      return Ne({\n        x: e\n      });\n    }, Ae = function (e) {\n      return Ne({\n        y: e\n      });\n    }, Ie = function (e) {\n      return Q.current && (z({\n        scale: e\n      }), G({\n        scale: e\n      })), !de && Q.current;\n    }, He = g({\n      X: function (e) {\n        return Re(e);\n      },\n      Y: function (e) {\n        return Ae(e);\n      },\n      S: function (e) {\n        return Ie(e);\n      }\n    }), function (e, n, t, r, i, o, a, c, u, l, s) {\n      var d = R(l, i, o),\n        v = d[0],\n        f = d[1],\n        h = T(e, c, v, innerWidth),\n        m = h[0],\n        g = h[1],\n        p = T(n, c, f, innerHeight),\n        w = p[0],\n        y = p[1],\n        x = Date.now() - s;\n      if (x >= 200 || c !== a || Math.abs(u - a) > 1) {\n        var C = V(e, n, i, o, a, c),\n          b = C.x,\n          E = C.y,\n          k = m ? g : b !== e ? b : null,\n          P = w ? y : E !== n ? E : null;\n        return null !== k && F(e, k, He.X), null !== P && F(n, P, He.Y), void (c !== a && F(a, c, He.S));\n      }\n      var _ = (e - t) / x,\n        M = (n - r) / x,\n        Y = Math.sqrt(Math.pow(_, 2) + Math.pow(M, 2)),\n        X = !1,\n        N = !1;\n      !function (e, n) {\n        var t,\n          r = e,\n          i = 0,\n          o = 0,\n          a = function (o) {\n            t || (t = o);\n            var a = o - t,\n              l = Math.sign(e),\n              s = -.001 * l,\n              d = Math.sign(-r) * Math.pow(r, 2) * 2e-4,\n              v = r * a + (s + d) * Math.pow(a, 2) / 2;\n            i += v, t = o, l * (r += (s + d) * a) <= 0 ? u() : n(i) ? c() : u();\n          };\n        function c() {\n          o = requestAnimationFrame(a);\n        }\n        function u() {\n          cancelAnimationFrame(o);\n        }\n        c();\n      }(Y, function (t) {\n        var r = e + t * (_ / Y),\n          i = n + t * (M / Y),\n          o = T(r, a, v, innerWidth),\n          c = o[0],\n          u = o[1],\n          l = T(i, a, f, innerHeight),\n          s = l[0],\n          d = l[1];\n        if (c && !X && (X = !0, m ? F(r, u, He.X) : H(u, r + (r - u), He.X)), s && !N && (N = !0, w ? F(i, d, He.Y) : H(d, i + (i - d), He.Y)), X && N) return !1;\n        var h = X || He.X(u),\n          g = N || He.Y(d);\n        return h && g;\n      });\n    }),\n    Fe = (We = Y, Se = function (e, n) {\n      _e || Ye(1 !== me ? 1 : Math.max(2, $ / re), e, n);\n    }, Te = n(0), Ve = I(function () {\n      Te.current = 0, We.apply(void 0, [].slice.call(arguments));\n    }, {\n      wait: 300\n    }), function () {\n      var e = [].slice.call(arguments);\n      Te.current += 1, Ve.apply(void 0, e), Te.current >= 2 && (Ve.cancel(), Te.current = 0, Se.apply(void 0, e));\n    });\n  function De(e, n) {\n    if (J.current = 0, (de || fe) && O) {\n      G({\n        touched: !1,\n        maskTouched: !1,\n        pause: !1,\n        stopRaf: !1,\n        reach: void 0\n      });\n      var t = E(me, $ / re);\n      if (Le(le, se, we, ye, re, oe, me, t, be, he, Ee), W(e, n), ge === e && pe === n) {\n        if (de) return void Fe(e, n);\n        fe && X(e, n);\n      }\n    }\n  }\n  function Be(e, n, t) {\n    void 0 === t && (t = 0), G({\n      touched: !0,\n      CX: e,\n      CY: n,\n      lastCX: e,\n      lastCY: n,\n      lastX: le,\n      lastY: se,\n      lastScale: me,\n      touchLength: t,\n      touchTime: Date.now()\n    });\n  }\n  function Oe(e) {\n    G({\n      maskTouched: !0,\n      CX: e.clientX,\n      CY: e.clientY,\n      lastX: le,\n      lastY: se\n    });\n  }\n  P(C ? void 0 : \"mousemove\", function (e) {\n    e.preventDefault(), Xe(e.clientX, e.clientY);\n  }), P(C ? void 0 : \"mouseup\", function (e) {\n    De(e.clientX, e.clientY);\n  }), P(C ? \"touchmove\" : void 0, function (e) {\n    e.preventDefault();\n    var n = S(e);\n    Xe.apply(void 0, n);\n  }, {\n    passive: !1\n  }), P(C ? \"touchend\" : void 0, function (e) {\n    var n = e.changedTouches[0];\n    De(n.clientX, n.clientY);\n  }, {\n    passive: !1\n  }), P(\"resize\", I(function () {\n    ce && !de && (G(A($, ne, he)), L());\n  }, {\n    maxWait: 8\n  })), k(function () {\n    O && z(h({\n      scale: me,\n      rotate: he\n    }, Me));\n  }, [O]);\n  var ze = function (e, t, r, o, a, c, l, s, d, v) {\n      var f = function (e, t, r, i, o) {\n          var a = n(!1),\n            c = p({\n              lead: !0,\n              scale: r\n            }),\n            u = c[0],\n            l = u.lead,\n            s = u.scale,\n            d = c[1],\n            v = I(function (e) {\n              try {\n                return o(!0), d({\n                  lead: !1,\n                  scale: e\n                }), Promise.resolve();\n              } catch (e) {\n                return Promise.reject(e);\n              }\n            }, {\n              wait: i\n            });\n          return k(function () {\n            a.current ? (o(!1), d({\n              lead: !0\n            }), v(r)) : a.current = !0;\n          }, [r]), l ? [e * s, t * s, r / s] : [e * r, t * r, 1];\n        }(c, l, s, d, v),\n        h = f[0],\n        m = f[1],\n        w = f[2],\n        y = function (e, t, r, o, a) {\n          var c = u(D),\n            l = c[0],\n            s = c[1],\n            d = u(0),\n            v = d[0],\n            f = d[1],\n            h = n(),\n            m = g({\n              OK: function () {\n                return e && f(4);\n              }\n            });\n          function p(e) {\n            a(!1), f(e);\n          }\n          return i(function () {\n            if (h.current || (h.current = Date.now()), r) {\n              if (function (e, n) {\n                var t = e && e.current;\n                if (t && 1 === t.nodeType) {\n                  var r = t.getBoundingClientRect();\n                  n({\n                    T: r.top,\n                    L: r.left,\n                    W: r.width,\n                    H: r.height,\n                    FIT: \"IMG\" === t.tagName ? getComputedStyle(t).objectFit : void 0\n                  });\n                }\n              }(t, s), e) return Date.now() - h.current < 250 ? (f(1), requestAnimationFrame(function () {\n                f(2), requestAnimationFrame(function () {\n                  return p(3);\n                });\n              }), void setTimeout(m.OK, o)) : void f(4);\n              p(5);\n            }\n          }, [e, r]), [v, l];\n        }(e, t, r, d, v),\n        x = y[0],\n        C = y[1],\n        b = C.W,\n        E = C.FIT,\n        P = innerWidth / 2,\n        _ = innerHeight / 2,\n        M = x < 3 || x > 4;\n      return [M ? b ? C.L : P : o + (P - c * s / 2), M ? b ? C.T : _ : a + (_ - l * s / 2), h, M && E ? h * (C.H / b) : m, 0 === x ? w : M ? b / (c * s) || .01 : w, M ? E ? 1 : 0 : 1, x, E];\n    }(f, v, ce, le, se, re, oe, me, m, function (e) {\n      return G({\n        pause: e\n      });\n    }),\n    je = ze[4],\n    qe = ze[6],\n    Ke = \"transform \" + m + \"ms \" + w,\n    Ue = {\n      className: x,\n      onMouseDown: C ? void 0 : function (e) {\n        e.stopPropagation(), 0 === e.button && Be(e.clientX, e.clientY, 0);\n      },\n      onTouchStart: C ? function (e) {\n        e.stopPropagation(), Be.apply(void 0, S(e));\n      } : void 0,\n      onWheel: function (e) {\n        if (!_e) {\n          var n = E(me - e.deltaY / 100 / 2, $ / re);\n          G({\n            stopRaf: !0\n          }), Ye(n, e.clientX, e.clientY);\n        }\n      },\n      style: {\n        width: ze[2] + \"px\",\n        height: ze[3] + \"px\",\n        opacity: ze[5],\n        objectFit: 4 === qe ? void 0 : ze[7],\n        transform: he ? \"rotate(\" + he + \"deg)\" : void 0,\n        transition: qe > 2 ? Ke + \", opacity \" + m + \"ms ease, height \" + (qe < 4 ? m / 2 : qe > 4 ? m : 0) + \"ms \" + w : void 0\n      }\n    };\n  return e.createElement(\"div\", {\n    className: \"PhotoView__PhotoWrap\" + (y ? \" \" + y : \"\"),\n    style: b,\n    onMouseDown: !C && O ? Oe : void 0,\n    onTouchStart: C && O ? function (e) {\n      return Oe(e.touches[0]);\n    } : void 0\n  }, e.createElement(\"div\", {\n    className: \"PhotoView__PhotoBox\",\n    style: {\n      transform: \"matrix(\" + je + \", 0, 0, \" + je + \", \" + ze[0] + \", \" + ze[1] + \")\",\n      transition: de || Pe ? void 0 : Ke,\n      willChange: O ? \"transform\" : void 0\n    }\n  }, o ? e.createElement(q, h({\n    src: o,\n    loaded: ce,\n    broken: ue\n  }, Ue, {\n    onPhotoLoad: function (e) {\n      G(h({}, e, e.loaded && A(e.naturalWidth || 0, e.naturalHeight || 0, he)));\n    },\n    loadingElement: _,\n    brokenElement: M\n  })) : a && a({\n    attrs: Ue,\n    scale: je,\n    rotate: he\n  })));\n}\nvar G = {\n  x: 0,\n  touched: !1,\n  pause: !1,\n  lastCX: void 0,\n  lastCY: void 0,\n  bg: void 0,\n  lastBg: void 0,\n  overlay: !0,\n  minimal: !0,\n  scale: 1,\n  rotate: 0\n};\nfunction J(r) {\n  var i = r.loop,\n    o = void 0 === i ? 3 : i,\n    c = r.speed,\n    l = r.easing,\n    s = r.photoClosable,\n    d = r.maskClosable,\n    v = void 0 === d || d,\n    f = r.maskOpacity,\n    h = void 0 === f ? 1 : f,\n    m = r.pullClosable,\n    w = void 0 === m || m,\n    E = r.bannerVisible,\n    _ = void 0 === E || E,\n    S = r.overlayRender,\n    T = r.toolbarRender,\n    V = r.className,\n    R = r.maskClassName,\n    A = r.photoClassName,\n    I = r.photoWrapClassName,\n    H = r.loadingElement,\n    L = r.brokenElement,\n    F = r.images,\n    D = r.index,\n    B = void 0 === D ? 0 : D,\n    O = r.onIndexChange,\n    z = r.visible,\n    j = r.onClose,\n    q = r.afterClose,\n    K = r.portalContainer,\n    J = p(G),\n    Q = J[0],\n    Z = J[1],\n    $ = u(0),\n    ee = $[0],\n    ne = $[1],\n    te = Q.x,\n    re = Q.touched,\n    ie = Q.pause,\n    oe = Q.lastCX,\n    ae = Q.lastCY,\n    ce = Q.bg,\n    ue = void 0 === ce ? h : ce,\n    le = Q.lastBg,\n    se = Q.overlay,\n    de = Q.minimal,\n    ve = Q.scale,\n    fe = Q.rotate,\n    he = Q.onScale,\n    me = Q.onRotate,\n    ge = r.hasOwnProperty(\"index\"),\n    pe = ge ? B : ee,\n    we = ge ? O : ne,\n    ye = n(pe),\n    xe = F.length,\n    Ce = F[pe],\n    be = \"boolean\" == typeof o ? o : xe > o,\n    Ee = function (e, r) {\n      var i = t(function (e) {\n          return !e;\n        }, !1)[1],\n        o = n(0),\n        c = function (t) {\n          var r = n(t);\n          function i(e) {\n            r.current = e;\n          }\n          return a(function () {\n            !function (n) {\n              e ? (n(e), o.current = 1) : o.current = 2;\n            }(i);\n          }, [t]), [r.current, i];\n        }(e),\n        u = c[1];\n      return [c[0], o.current, function () {\n        i(), 2 === o.current && (u(!1), r && r()), o.current = 0;\n      }];\n    }(z, q),\n    ke = Ee[0],\n    Pe = Ee[1],\n    _e = Ee[2];\n  k(function () {\n    if (ke) return Z({\n      pause: !0,\n      x: pe * -(innerWidth + x)\n    }), void (ye.current = pe);\n    Z(G);\n  }, [ke]);\n  var Me = g({\n      close: function (e) {\n        me && me(0), Z({\n          overlay: !0,\n          lastBg: ue\n        }), j(e);\n      },\n      changeIndex: function (e, n) {\n        void 0 === n && (n = !1);\n        var t = be ? ye.current + (e - pe) : e,\n          r = xe - 1,\n          i = b(t, 0, r),\n          o = be ? t : i,\n          a = innerWidth + x;\n        Z({\n          touched: !1,\n          lastCX: void 0,\n          lastCY: void 0,\n          x: -a * o,\n          pause: n\n        }), ye.current = o, we && we(be ? e < 0 ? r : e > r ? 0 : e : i);\n      }\n    }),\n    Ye = Me.close,\n    Xe = Me.changeIndex;\n  function Ne(e) {\n    return e ? Ye() : Z({\n      overlay: !se\n    });\n  }\n  function We() {\n    Z({\n      x: -(innerWidth + x) * pe,\n      lastCX: void 0,\n      lastCY: void 0,\n      pause: !0\n    }), ye.current = pe;\n  }\n  function Se(e, n, t, r) {\n    \"x\" === e ? function (e) {\n      if (void 0 !== oe) {\n        var n = e - oe,\n          t = n;\n        !be && (0 === pe && n > 0 || pe === xe - 1 && n < 0) && (t = n / 2), Z({\n          touched: !0,\n          lastCX: oe,\n          x: -(innerWidth + x) * ye.current + t,\n          pause: !1\n        });\n      } else Z({\n        touched: !0,\n        lastCX: e,\n        x: te,\n        pause: !1\n      });\n    }(n) : \"y\" === e && function (e, n) {\n      if (void 0 !== ae) {\n        var t = null === h ? null : b(h, .01, h - Math.abs(e - ae) / 100 / 4);\n        Z({\n          touched: !0,\n          lastCY: ae,\n          bg: 1 === n ? t : h,\n          minimal: 1 === n\n        });\n      } else Z({\n        touched: !0,\n        lastCY: e,\n        bg: ue,\n        minimal: !0\n      });\n    }(t, r);\n  }\n  function Te(e, n) {\n    var t = e - (null != oe ? oe : e),\n      r = n - (null != ae ? ae : n),\n      i = !1;\n    if (t < -40) Xe(pe + 1);else if (t > 40) Xe(pe - 1);else {\n      var o = -(innerWidth + x) * ye.current;\n      Math.abs(r) > 100 && de && w && (i = !0, Ye()), Z({\n        touched: !1,\n        x: o,\n        lastCX: void 0,\n        lastCY: void 0,\n        bg: h,\n        overlay: !!i || se\n      });\n    }\n  }\n  P(\"keydown\", function (e) {\n    if (z) switch (e.key) {\n      case \"ArrowLeft\":\n        Xe(pe - 1, !0);\n        break;\n      case \"ArrowRight\":\n        Xe(pe + 1, !0);\n        break;\n      case \"Escape\":\n        Ye();\n    }\n  });\n  var Ve = function (e, n, t) {\n    return a(function () {\n      var r = e.length;\n      return t ? e.concat(e).concat(e).slice(r + n - 1, r + n + 2) : e.slice(Math.max(n - 1, 0), Math.min(n + 2, r + 1));\n    }, [e, n, t]);\n  }(F, pe, be);\n  if (!ke) return null;\n  var Re = se && !Pe,\n    Ae = z ? ue : le,\n    Ie = he && me && {\n      images: F,\n      index: pe,\n      visible: z,\n      onClose: Ye,\n      onIndexChange: Xe,\n      overlayVisible: Re,\n      overlay: Ce && Ce.overlay,\n      scale: ve,\n      rotate: fe,\n      onScale: he,\n      onRotate: me\n    },\n    He = c ? c(Pe) : 400,\n    Le = l ? l(Pe) : y,\n    Fe = c ? c(3) : 600,\n    De = l ? l(3) : y;\n  return e.createElement(M, {\n    className: \"PhotoView-Portal\" + (Re ? \"\" : \" PhotoView-Slider__clean\") + (z ? \"\" : \" PhotoView-Slider__willClose\") + (V ? \" \" + V : \"\"),\n    role: \"dialog\",\n    onClick: function (e) {\n      return e.stopPropagation();\n    },\n    container: K\n  }, z && e.createElement(W, null), e.createElement(\"div\", {\n    className: \"PhotoView-Slider__Backdrop\" + (R ? \" \" + R : \"\") + (1 === Pe ? \" PhotoView-Slider__fadeIn\" : 2 === Pe ? \" PhotoView-Slider__fadeOut\" : \"\"),\n    style: {\n      background: Ae ? \"rgba(0, 0, 0, \" + Ae + \")\" : void 0,\n      transitionTimingFunction: Le,\n      transitionDuration: (re ? 0 : He) + \"ms\",\n      animationDuration: He + \"ms\"\n    },\n    onAnimationEnd: _e\n  }), _ && e.createElement(\"div\", {\n    className: \"PhotoView-Slider__BannerWrap\"\n  }, e.createElement(\"div\", {\n    className: \"PhotoView-Slider__Counter\"\n  }, pe + 1, \" / \", xe), e.createElement(\"div\", {\n    className: \"PhotoView-Slider__BannerRight\"\n  }, T && Ie && T(Ie), e.createElement(Y, {\n    className: \"PhotoView-Slider__toolbarIcon\",\n    onClick: Ye\n  }))), Ve.map(function (n, t) {\n    var r = be || 0 !== pe ? ye.current - 1 + t : pe + t;\n    return e.createElement(U, {\n      key: be ? n.key + \"/\" + n.src + \"/\" + r : n.key,\n      item: n,\n      speed: He,\n      easing: Le,\n      visible: z,\n      onReachMove: Se,\n      onReachUp: Te,\n      onPhotoTap: function () {\n        return Ne(s);\n      },\n      onMaskTap: function () {\n        return Ne(v);\n      },\n      wrapClassName: I,\n      className: A,\n      style: {\n        left: (innerWidth + x) * r + \"px\",\n        transform: \"translate3d(\" + te + \"px, 0px, 0)\",\n        transition: re || ie ? void 0 : \"transform \" + Fe + \"ms \" + De\n      },\n      loadingElement: H,\n      brokenElement: L,\n      onPhotoResize: We,\n      isActive: ye.current === r,\n      expose: Z\n    });\n  }), !C && _ && e.createElement(e.Fragment, null, (be || 0 !== pe) && e.createElement(\"div\", {\n    className: \"PhotoView-Slider__ArrowLeft\",\n    onClick: function () {\n      return Xe(pe - 1, !0);\n    }\n  }, e.createElement(X, null)), (be || pe + 1 < xe) && e.createElement(\"div\", {\n    className: \"PhotoView-Slider__ArrowRight\",\n    onClick: function () {\n      return Xe(pe + 1, !0);\n    }\n  }, e.createElement(N, null))), S && Ie && e.createElement(\"div\", {\n    className: \"PhotoView-Slider__Overlay\"\n  }, S(Ie)));\n}\nvar Q = [\"children\", \"onIndexChange\", \"onVisibleChange\"],\n  Z = {\n    images: [],\n    visible: !1,\n    index: 0\n  };\nfunction $(t) {\n  var r = t.children,\n    i = t.onIndexChange,\n    o = t.onVisibleChange,\n    c = m(t, Q),\n    u = p(Z),\n    l = u[0],\n    s = u[1],\n    d = n(0),\n    v = l.images,\n    f = l.visible,\n    y = l.index,\n    x = g({\n      nextId: function () {\n        return d.current += 1;\n      },\n      update: function (e) {\n        var n = v.findIndex(function (n) {\n          return n.key === e.key;\n        });\n        if (n > -1) {\n          var t = v.slice();\n          return t.splice(n, 1, e), void s({\n            images: t\n          });\n        }\n        s(function (n) {\n          return {\n            images: n.images.concat(e)\n          };\n        });\n      },\n      remove: function (e) {\n        s(function (n) {\n          var t = n.images.filter(function (n) {\n            return n.key !== e;\n          });\n          return {\n            images: t,\n            index: Math.min(t.length - 1, y)\n          };\n        });\n      },\n      show: function (e) {\n        var n = v.findIndex(function (n) {\n          return n.key === e;\n        });\n        s({\n          visible: !0,\n          index: n\n        }), o && o(!0, n, l);\n      }\n    }),\n    C = g({\n      close: function () {\n        s({\n          visible: !1\n        }), o && o(!1, y, l);\n      },\n      changeIndex: function (e) {\n        s({\n          index: e\n        }), i && i(e, l);\n      }\n    }),\n    b = a(function () {\n      return h({}, l, x);\n    }, [l, x]);\n  return e.createElement(w.Provider, {\n    value: b\n  }, r, e.createElement(J, h({\n    images: v,\n    visible: f,\n    index: y,\n    onIndexChange: C.changeIndex,\n    onClose: C.close\n  }, c)));\n}\nvar ee = function (e) {\n  var t,\n    r,\n    o = e.src,\n    c = e.render,\n    u = e.overlay,\n    f = e.width,\n    m = e.height,\n    p = e.triggers,\n    y = void 0 === p ? [\"onClick\"] : p,\n    x = e.children,\n    C = l(w),\n    b = (t = function () {\n      return C.nextId();\n    }, (r = n({\n      sign: !1,\n      fn: void 0\n    }).current).sign || (r.sign = !0, r.fn = t()), r.fn),\n    E = n(null);\n  s(null == x ? void 0 : x.ref, function () {\n    return E.current;\n  }), i(function () {\n    return function () {\n      C.remove(b);\n    };\n  }, []);\n  var k = g({\n      render: function (e) {\n        return c && c(e);\n      },\n      show: function (e, n) {\n        C.show(b), function (e, n) {\n          if (x) {\n            var t = x.props[e];\n            t && t(n);\n          }\n        }(e, n);\n      }\n    }),\n    P = a(function () {\n      var e = {};\n      return y.forEach(function (n) {\n        e[n] = k.show.bind(null, n);\n      }), e;\n    }, []);\n  return i(function () {\n    C.update({\n      key: b,\n      src: o,\n      originRef: E,\n      render: k.render,\n      overlay: u,\n      width: f,\n      height: m\n    });\n  }, [o]), x ? d.only(v(x, h({}, P, {\n    ref: E\n  }))) : null;\n};\nexport { $ as PhotoProvider, J as PhotoSlider, ee as PhotoView };","map":{"version":3,"names":["g","e","t","n","fn","curr","current","r","Object","create","keys","forEach","call","apply","concat","slice","arguments","p","h","w","y","x","C","window","b","limitNumber","Math","max","min","E","limitScale","k","test","navigator","userAgent","i","o","P","addEventListener","removeEventListener","_","M","container","document","body","m","f","createElement","Y","width","height","viewBox","d","X","N","W","style","overflow","S","touches","clientX","clientY","length","a","sqrt","pow","T","computePositionEdge","c","V","u","l","innerWidth","innerHeight","s","v","lastCX","lastCY","R","A","pause","I","leading","maxWait","wait","clearTrailing","clearTimeout","Date","now","setTimeout","cancel","H","rebound","F","L","easeOutQuart","calcMove","cancelAnimationFrame","requestAnimationFrame","D","FIT","B","useMountedRef","O","z","className","fill","opacity","j","q","src","loaded","broken","onPhotoLoad","loadingElement","brokenElement","Fragment","onLoad","target","naturalWidth","naturalHeight","onError","draggable","alt","K","touched","maskTouched","rotate","scale","CX","CY","lastX","lastY","lastScale","touchTime","touchLength","stopRaf","reach","U","item","render","originRef","visible","speed","easing","wrapClassName","onPhotoTap","onMaskTap","onReachMove","onReachUp","onPhotoResize","isActive","expose","G","J","Q","Z","$","ee","ne","te","re","ie","oe","ae","ce","ue","le","se","de","ve","fe","he","me","ge","pe","we","ye","xe","Ce","be","Ee","ke","Pe","_e","Me","onScale","Ye","onRotate","Xe","abs","Ne","We","Se","Te","Ve","Re","Ae","Ie","He","Le","callbackX","callbackY","callbackS","sign","Fe","doubleTap","De","Be","Oe","preventDefault","passive","changedTouches","ze","lead","Promise","resolve","reject","OK","nodeType","getBoundingClientRect","top","left","tagName","getComputedStyle","objectFit","je","qe","Ke","Ue","onMouseDown","stopPropagation","button","onTouchStart","onWheel","deltaY","transform","transition","willChange","attrs","bg","lastBg","overlay","minimal","loop","photoClosable","maskClosable","maskOpacity","pullClosable","bannerVisible","overlayRender","toolbarRender","maskClassName","photoClassName","photoWrapClassName","images","index","onIndexChange","onClose","afterClose","portalContainer","hasOwnProperty","close","changeIndex","key","overlayVisible","role","onClick","background","transitionTimingFunction","transitionDuration","animationDuration","onAnimationEnd","map","children","onVisibleChange","nextId","update","findIndex","splice","remove","filter","show","Provider","value","PhotoView","triggers","callback","ref","props","bind","only","PhotoProvider","PhotoSlider"],"sources":["D:\\6to Semestre\\GithubReact\\PathFinder_FRONT\\reto\\node_modules\\react-photo-view\\src\\hooks\\useMethods.ts","D:\\6to Semestre\\GithubReact\\PathFinder_FRONT\\reto\\node_modules\\react-photo-view\\src\\hooks\\useSetState.ts","D:\\6to Semestre\\GithubReact\\PathFinder_FRONT\\reto\\node_modules\\react-photo-view\\src\\photo-context.ts","D:\\6to Semestre\\GithubReact\\PathFinder_FRONT\\reto\\node_modules\\react-photo-view\\src\\variables.ts","D:\\6to Semestre\\GithubReact\\PathFinder_FRONT\\reto\\node_modules\\react-photo-view\\src\\utils\\isTouchDevice.ts","D:\\6to Semestre\\GithubReact\\PathFinder_FRONT\\reto\\node_modules\\react-photo-view\\src\\utils\\limitTarget.ts","D:\\6to Semestre\\GithubReact\\PathFinder_FRONT\\reto\\node_modules\\react-photo-view\\src\\hooks\\useIsomorphicLayoutEffect.ts","D:\\6to Semestre\\GithubReact\\PathFinder_FRONT\\reto\\node_modules\\react-photo-view\\src\\hooks\\useEventListener.ts","D:\\6to Semestre\\GithubReact\\PathFinder_FRONT\\reto\\node_modules\\react-photo-view\\src\\components\\SlidePortal.tsx","D:\\6to Semestre\\GithubReact\\PathFinder_FRONT\\reto\\node_modules\\react-photo-view\\src\\components\\CloseIcon.tsx","D:\\6to Semestre\\GithubReact\\PathFinder_FRONT\\reto\\node_modules\\react-photo-view\\src\\components\\ArrowLeft.tsx","D:\\6to Semestre\\GithubReact\\PathFinder_FRONT\\reto\\node_modules\\react-photo-view\\src\\components\\ArrowRight.tsx","D:\\6to Semestre\\GithubReact\\PathFinder_FRONT\\reto\\node_modules\\react-photo-view\\src\\components\\PreventScroll.tsx","D:\\6to Semestre\\GithubReact\\PathFinder_FRONT\\reto\\node_modules\\react-photo-view\\src\\utils\\getMultipleTouchPosition.ts","D:\\6to Semestre\\GithubReact\\PathFinder_FRONT\\reto\\node_modules\\react-photo-view\\src\\utils\\edgeHandle.ts","D:\\6to Semestre\\GithubReact\\PathFinder_FRONT\\reto\\node_modules\\react-photo-view\\src\\utils\\getPositionOnMoveOrScale.ts","D:\\6to Semestre\\GithubReact\\PathFinder_FRONT\\reto\\node_modules\\react-photo-view\\src\\utils\\getRotateSize.ts","D:\\6to Semestre\\GithubReact\\PathFinder_FRONT\\reto\\node_modules\\react-photo-view\\src\\utils\\getSuitableImageSize.ts","D:\\6to Semestre\\GithubReact\\PathFinder_FRONT\\reto\\node_modules\\react-photo-view\\src\\hooks\\useDebounceCallback.ts","D:\\6to Semestre\\GithubReact\\PathFinder_FRONT\\reto\\node_modules\\react-photo-view\\src\\hooks\\useScrollPosition.ts","D:\\6to Semestre\\GithubReact\\PathFinder_FRONT\\reto\\node_modules\\react-photo-view\\src\\hooks\\useAnimationOrigin.tsx","D:\\6to Semestre\\GithubReact\\PathFinder_FRONT\\reto\\node_modules\\react-photo-view\\src\\hooks\\useMountedRef.ts","D:\\6to Semestre\\GithubReact\\PathFinder_FRONT\\reto\\node_modules\\react-photo-view\\src\\components\\Spinner.tsx","D:\\6to Semestre\\GithubReact\\PathFinder_FRONT\\reto\\node_modules\\react-photo-view\\src\\Photo.tsx","D:\\6to Semestre\\GithubReact\\PathFinder_FRONT\\reto\\node_modules\\react-photo-view\\src\\PhotoBox.tsx","D:\\6to Semestre\\GithubReact\\PathFinder_FRONT\\reto\\node_modules\\react-photo-view\\src\\hooks\\useContinuousTap.ts","D:\\6to Semestre\\GithubReact\\PathFinder_FRONT\\reto\\node_modules\\react-photo-view\\src\\hooks\\useAnimationPosition.ts","D:\\6to Semestre\\GithubReact\\PathFinder_FRONT\\reto\\node_modules\\react-photo-view\\src\\hooks\\useTargetScale.ts","D:\\6to Semestre\\GithubReact\\PathFinder_FRONT\\reto\\node_modules\\react-photo-view\\src\\PhotoSlider.tsx","D:\\6to Semestre\\GithubReact\\PathFinder_FRONT\\reto\\node_modules\\react-photo-view\\src\\hooks\\useAnimationVisible.tsx","D:\\6to Semestre\\GithubReact\\PathFinder_FRONT\\reto\\node_modules\\react-photo-view\\src\\hooks\\useForkedVariable.ts","D:\\6to Semestre\\GithubReact\\PathFinder_FRONT\\reto\\node_modules\\react-photo-view\\src\\hooks\\useAdjacentImages.ts","D:\\6to Semestre\\GithubReact\\PathFinder_FRONT\\reto\\node_modules\\react-photo-view\\src\\PhotoProvider.tsx","D:\\6to Semestre\\GithubReact\\PathFinder_FRONT\\reto\\node_modules\\react-photo-view\\src\\PhotoView.tsx","D:\\6to Semestre\\GithubReact\\PathFinder_FRONT\\reto\\node_modules\\react-photo-view\\src\\hooks\\useInitial.ts"],"sourcesContent":["import { useRef } from 'react';\n\n/**\n * Hook of persistent methods\n */\nexport default function useMethods<T extends Record<string, (...args: any[]) => any>>(fn: T) {\n  const { current } = useRef({\n    fn,\n    curr: undefined as T | undefined,\n  });\n  current.fn = fn;\n\n  if (!current.curr) {\n    const curr = Object.create(null);\n    Object.keys(fn).forEach((key) => {\n      curr[key] = (...args: unknown[]) => current.fn[key].call(current.fn, ...args);\n    });\n    current.curr = curr;\n  }\n\n  return current.curr as T;\n}\n","import { useReducer } from 'react';\n\nexport default function useSetState<S extends Record<string, any>>(initialState: S) {\n  return useReducer(\n    (state: S, action: Partial<S> | ((state: S) => Partial<S>)) => ({\n      ...state,\n      ...(typeof action === 'function' ? action(state) : action),\n    }),\n    initialState,\n  );\n}\n","import { createContext } from 'react';\nimport type { DataType } from './types';\n\nexport type UpdateItemType = (dataType: DataType) => void;\n\nexport interface PhotoContextType {\n  show: (key: number) => void;\n  update: UpdateItemType;\n  remove: (key: number) => void;\n  nextId: () => number;\n}\n\nexport default createContext<PhotoContextType>(undefined as unknown as PhotoContextType);\n","/**\n * 最大触摸时间\n */\nexport const maxTouchTime = 200;\n\n/**\n * 默认动画速度\n */\nexport const defaultSpeed = 400;\n\n/**\n * 默认动画函数\n */\nexport const defaultEasing = 'cubic-bezier(0.25, 0.8, 0.25, 1)';\n\n/**\n * 最大滑动切换图片距离\n */\nexport const maxMoveOffset = 40;\n\n/**\n * 图片的间隔\n */\nexport const horizontalOffset = 20;\n\n/**\n * 最小初始响应距离\n */\nexport const minStartTouchOffset = 20;\n\n/**\n * 默认背景透明度\n */\nexport const defaultOpacity = 1;\n\n/**\n * 最小缩放度\n */\nexport const minScale = 1;\n\n/**\n * 最大缩放度（若图片足够大，则会超出）\n */\nexport const maxScale = 6;\n\n/**\n * 最小长图模式比例\n */\nexport const longModeRatio = 3;\n\n/**\n * 缩放弹性缓冲\n */\nexport const scaleBuffer = 0.2;\n\n/**\n * 最大等待动画时间\n */\nexport const maxWaitAnimationTime = 250;\n","/**\n * 是否支持触摸设备\n */\nconst isTouchDevice = typeof window !== 'undefined' && 'ontouchstart' in window;\n\nexport default isTouchDevice;\n","import { maxScale, minScale } from '../variables';\n\nexport const limitNumber = (value: number, min: number, max: number) => {\n  return Math.max(Math.min(value, max), min);\n};\n\n/**\n * 限制最大/最小缩放\n */\nexport const limitScale = (scale: number, max: number = 0, buffer: number = 0) => {\n  return limitNumber(scale, minScale * (1 - buffer), Math.max(maxScale, max) * (1 + buffer));\n};\n","import { useEffect, useLayoutEffect } from 'react';\n\nconst isSSR = typeof window === 'undefined' || /ServerSideRendering/.test(navigator && navigator.userAgent);\n\nexport default isSSR ? useEffect : useLayoutEffect;\n","import { useEffect, useRef } from 'react';\n\nexport default function useEventListener<K extends keyof WindowEventMap>(\n  type: K | undefined,\n  fn: (evt: WindowEventMap[K]) => void,\n  options?: AddEventListenerOptions,\n) {\n  const latest = useRef(fn);\n  latest.current = fn;\n\n  useEffect(() => {\n    function wrapper(evt: WindowEventMap[K]) {\n      latest.current(evt);\n    }\n    if (type) {\n      window.addEventListener(type, wrapper, options);\n    }\n    return () => {\n      if (type) {\n        window.removeEventListener(type, wrapper);\n      }\n    };\n  }, [type]);\n}\n","import React from 'react';\nimport { createPortal } from 'react-dom';\nimport './SlidePortal.less';\n\nexport interface ISliderPortalProps extends React.HTMLAttributes<HTMLDivElement> {\n  container?: HTMLElement;\n}\n\nfunction SlidePortal({ container = document.body, ...rest }: ISliderPortalProps) {\n  return createPortal(<div {...rest} />, container);\n}\n\nexport default SlidePortal;\n","import React from 'react';\n\nfunction CloseIcon(props: React.HTMLAttributes<SVGElement>) {\n  return (\n    <svg width=\"44\" height=\"44\" viewBox=\"0 0 768 768\" {...props}>\n      <path d=\"M607.5 205.5l-178.5 178.5 178.5 178.5-45 45-178.5-178.5-178.5 178.5-45-45 178.5-178.5-178.5-178.5 45-45 178.5 178.5 178.5-178.5z\" />\n    </svg>\n  );\n}\n\nexport default CloseIcon;\n","import React from 'react';\n\nfunction ArrowLeft(props: React.HTMLAttributes<SVGElement>) {\n  return (\n    <svg width=\"44\" height=\"44\" viewBox=\"0 0 768 768\" {...props}>\n      <path d=\"M640.5 352.5v63h-390l178.5 180-45 45-256.5-256.5 256.5-256.5 45 45-178.5 180h390z\" />\n    </svg>\n  );\n}\n\nexport default ArrowLeft;\n","import React from 'react';\n\nfunction ArrowRight(props: React.HTMLAttributes<SVGElement>) {\n  return (\n    <svg width=\"44\" height=\"44\" viewBox=\"0 0 768 768\" {...props}>\n      <path d=\"M384 127.5l256.5 256.5-256.5 256.5-45-45 178.5-180h-390v-63h390l-178.5-180z\" />\n    </svg>\n  );\n}\n\nexport default ArrowRight;\n","import { useEffect } from 'react';\n\nexport default function PreventScroll() {\n  useEffect(() => {\n    const { style } = document.body;\n    const lastOverflow = style.overflow;\n    style.overflow = 'hidden';\n\n    return () => {\n      style.overflow = lastOverflow;\n    };\n  }, []);\n\n  return null;\n}\n","import type React from 'react';\n\n/**\n * 从 Touch 事件中获取两个触控中心位置\n */\nexport default function getMultipleTouchPosition(\n  evt: TouchEvent | React.TouchEvent,\n): [clientX: number, clientY: number, touchLength: number] {\n  const { clientX, clientY } = evt.touches[0];\n  if (evt.touches.length >= 2) {\n    const { clientX: nextClientX, clientY: nextClientY } = evt.touches[1];\n    return [\n      (clientX + nextClientX) / 2,\n      (clientY + nextClientY) / 2,\n      Math.sqrt((nextClientX - clientX) ** 2 + (nextClientY - clientY) ** 2),\n    ];\n  }\n  return [clientX, clientY, 0];\n}\n","import type { CloseEdgeType, ReachType, TouchStartType } from '../types';\n\n/**\n * 获取接触边缘类型\n */\nexport const getReachType = (\n  initialTouchState: TouchStartType,\n  horizontalCloseEdge: CloseEdgeType,\n  verticalCloseEdge: CloseEdgeType,\n  reachPosition: ReachType,\n): ReachType => {\n  if ((horizontalCloseEdge && initialTouchState === 1) || reachPosition === 'x') {\n    return 'x';\n  }\n  if ((verticalCloseEdge && initialTouchState > 1) || reachPosition === 'y') {\n    return 'y';\n  }\n  return undefined;\n};\n\n/**\n * 计算接触边缘位置\n * @param position - x/y\n * @param scale\n * @param size - width/height\n * @param innerSize - innerWidth/innerHeight\n * @return [CloseEdgeType, position]\n */\nexport const computePositionEdge = (position: number, scale: number, size: number, innerSize: number) => {\n  const currentWidth = size * scale;\n  // 图片超出的宽度\n  const outOffset = (currentWidth - innerSize) / 2;\n  let closedEdge: CloseEdgeType;\n\n  let current = position;\n  if (currentWidth <= innerSize) {\n    closedEdge = 1;\n    current = 0;\n  } else if (position > 0 && outOffset - position <= 0) {\n    closedEdge = 2;\n    current = outOffset;\n  } else if (position < 0 && outOffset + position <= 0) {\n    closedEdge = 3;\n    current = -outOffset;\n  }\n\n  return [closedEdge, current] as const;\n};\n","import { longModeRatio } from '../variables';\nimport { computePositionEdge } from './edgeHandle';\n\n/**\n * 获取移动或缩放之后的中心点\n */\nexport default function getPositionOnMoveOrScale(\n  x: number,\n  y: number,\n  width: number,\n  height: number,\n  scale: number,\n  toScale: number,\n  clientX: number = innerWidth / 2,\n  clientY: number = innerHeight / 2,\n  offsetX: number = 0,\n  offsetY: number = 0,\n) {\n  // 是否接触边缘\n  const [closedEdgeX] = computePositionEdge(x, toScale, width, innerWidth);\n  const [closedEdgeY] = computePositionEdge(y, toScale, height, innerHeight);\n\n  const centerClientX = innerWidth / 2;\n  const centerClientY = innerHeight / 2;\n\n  // 坐标偏移\n  const lastPositionX = centerClientX + x;\n  const lastPositionY = centerClientY + y;\n\n  // 偏移位置\n  const originX = clientX - (clientX - lastPositionX) * (toScale / scale) - centerClientX;\n  const originY = clientY - (clientY - lastPositionY) * (toScale / scale) - centerClientY;\n  // 长图模式无左右反馈\n  const longModeEdge = height / width >= longModeRatio && width * toScale === innerWidth;\n  // 超出边缘距离减半\n  return {\n    x: originX + (longModeEdge ? 0 : closedEdgeX ? offsetX / 2 : offsetX),\n    y: originY + (closedEdgeY ? offsetY / 2 : offsetY),\n    lastCX: clientX,\n    lastCY: clientY,\n  };\n}\n","/**\n * 获取旋转后的宽高\n */\nexport default function getRotateSize(rotate: number, width: number, height: number) {\n  const isVertical = rotate % 180 !== 0;\n\n  // 若图片不是水平则调换属性\n  if (isVertical) {\n    return [height, width, isVertical] as const;\n  }\n\n  return [width, height, isVertical] as const;\n}\n","import { longModeRatio } from '../variables';\nimport getRotateSize from './getRotateSize';\n\n/**\n * 获取图片合适的大小\n */\nexport default function getSuitableImageSize(naturalWidth: number, naturalHeight: number, rotate: number) {\n  const [currentWidth, currentHeight, isVertical] = getRotateSize(rotate, innerWidth, innerHeight);\n\n  let y = 0;\n  let width = currentWidth;\n  let height = currentHeight;\n\n  // 自适应宽高\n  const autoWidth = (naturalWidth / naturalHeight) * currentHeight;\n  const autoHeight = (naturalHeight / naturalWidth) * currentWidth;\n\n  if (naturalWidth < currentWidth && naturalHeight < currentHeight) {\n    width = naturalWidth;\n    height = naturalHeight;\n  } else if (naturalWidth < currentWidth && naturalHeight >= currentHeight) {\n    width = autoWidth;\n  } else if (naturalWidth >= currentWidth && naturalHeight < currentHeight) {\n    height = autoHeight;\n  } else if (naturalWidth / naturalHeight > currentWidth / currentHeight) {\n    height = autoHeight;\n  }\n  // 长图模式\n  else if (naturalHeight / naturalWidth >= longModeRatio && !isVertical) {\n    height = autoHeight;\n    y = (height - currentHeight) / 2;\n  } else {\n    width = autoWidth;\n  }\n  return {\n    width,\n    height,\n    x: 0,\n    y,\n    pause: true,\n  };\n}\n","import { useCallback, useRef } from 'react';\n\ninterface DebounceCallback<CallbackArguments extends any[]> {\n  (...args: CallbackArguments): void;\n  cancel: () => void;\n}\n\nexport default function useDebounceCallback<CallbackArguments extends any[]>(\n  callback: (...args: CallbackArguments) => void,\n  {\n    leading = false,\n    maxWait,\n    wait = maxWait || 0,\n  }: {\n    leading?: boolean;\n    maxWait?: number;\n    wait?: number;\n  },\n): DebounceCallback<CallbackArguments> {\n  const callbackRef = useRef(callback);\n  callbackRef.current = callback;\n\n  const prev = useRef(0);\n  const trailingTimeout = useRef<ReturnType<typeof setTimeout>>();\n  const clearTrailing = () => trailingTimeout.current && clearTimeout(trailingTimeout.current);\n\n  const fn = useCallback(\n    (...args: CallbackArguments) => {\n      const now = Date.now();\n\n      function call() {\n        prev.current = now;\n        clearTrailing();\n        callbackRef.current.apply(null, args);\n      }\n      const last = prev.current;\n      const offset = now - last;\n      // leading\n      if (last === 0) {\n        if (leading) {\n          call();\n        }\n        prev.current = now;\n      }\n\n      // body\n      if (maxWait !== undefined) {\n        if (offset > maxWait) {\n          call();\n          return;\n        }\n      } else if (offset < wait) {\n        prev.current = now;\n      }\n\n      // trailing\n      clearTrailing();\n      trailingTimeout.current = setTimeout(() => {\n        call();\n        prev.current = 0;\n      }, wait);\n    },\n    [wait, maxWait, leading],\n  );\n  (fn as DebounceCallback<CallbackArguments>).cancel = clearTrailing;\n\n  return fn as DebounceCallback<CallbackArguments>;\n}\n","import { computePositionEdge } from '../utils/edgeHandle';\nimport getPositionOnMoveOrScale from '../utils/getPositionOnMoveOrScale';\nimport getRotateSize from '../utils/getRotateSize';\nimport { defaultSpeed, maxTouchTime } from '../variables';\nimport useMethods from './useMethods';\n\n// 触边运动反馈\nconst rebound = (start: number, bound: number, callback: (spatial: number) => boolean) =>\n  easeOutMove(\n    start,\n    bound,\n    callback,\n    defaultSpeed / 4,\n    (t) => t,\n    () => easeOutMove(bound, start, callback),\n  );\n\n/**\n * 物理滚动到具体位置\n */\nexport default function useScrollPosition<C extends (spatial: number) => boolean>(\n  callbackX: C,\n  callbackY: C,\n  callbackS: C,\n) {\n  const callback = useMethods({\n    X: (spatial: number) => callbackX(spatial),\n    Y: (spatial: number) => callbackY(spatial),\n    S: (spatial: number) => callbackS(spatial),\n  });\n\n  return (\n    x: number,\n    y: number,\n    lastX: number,\n    lastY: number,\n    width: number,\n    height: number,\n    scale: number,\n    safeScale: number,\n    lastScale: number,\n    rotate: number,\n    touchedTime: number,\n  ) => {\n    const [currentWidth, currentHeight] = getRotateSize(rotate, width, height);\n    // 开始状态下边缘触发状态\n    const [beginEdgeX, beginX] = computePositionEdge(x, safeScale, currentWidth, innerWidth);\n    const [beginEdgeY, beginY] = computePositionEdge(y, safeScale, currentHeight, innerHeight);\n    const moveTime = Date.now() - touchedTime;\n\n    // 时间过长、超出安全范围的情况下不执行滚动逻辑，恢复安全范围\n    if (moveTime >= maxTouchTime || safeScale !== scale || Math.abs(lastScale - scale) > 1) {\n      // 计算中心缩放点\n      const { x: nextX, y: nextY } = getPositionOnMoveOrScale(x, y, width, height, scale, safeScale);\n      const targetX = beginEdgeX ? beginX : nextX !== x ? nextX : null;\n      const targetY = beginEdgeY ? beginY : nextY !== y ? nextY : null;\n\n      if (targetX !== null) {\n        easeOutMove(x, targetX, callback.X);\n      }\n      if (targetY !== null) {\n        easeOutMove(y, targetY, callback.Y);\n      }\n      if (safeScale !== scale) {\n        easeOutMove(scale, safeScale, callback.S);\n      }\n      return;\n    }\n\n    // 初始速度\n    const speedX = (x - lastX) / moveTime;\n    const speedY = (y - lastY) / moveTime;\n    const speedT = Math.sqrt(speedX ** 2 + speedY ** 2);\n    // 是否接触到边缘\n    let edgeX = false;\n    let edgeY = false;\n\n    scrollMove(speedT, (spatial) => {\n      const nextX = x + spatial * (speedX / speedT);\n      const nextY = y + spatial * (speedY / speedT);\n\n      const [isEdgeX, currentX] = computePositionEdge(nextX, scale, currentWidth, innerWidth);\n      const [isEdgeY, currentY] = computePositionEdge(nextY, scale, currentHeight, innerHeight);\n\n      if (isEdgeX && !edgeX) {\n        edgeX = true;\n        if (beginEdgeX) {\n          easeOutMove(nextX, currentX, callback.X);\n        } else {\n          rebound(currentX, nextX + (nextX - currentX), callback.X);\n        }\n      }\n\n      if (isEdgeY && !edgeY) {\n        edgeY = true;\n        if (beginEdgeY) {\n          easeOutMove(nextY, currentY, callback.Y);\n        } else {\n          rebound(currentY, nextY + (nextY - currentY), callback.Y);\n        }\n      }\n      // 同时接触边缘的情况下停止滚动\n      if (edgeX && edgeY) {\n        return false;\n      }\n\n      const resultX = edgeX || callback.X(currentX);\n      const resultY = edgeY || callback.Y(currentY);\n      return resultX && resultY;\n    });\n  };\n}\n\n// 加速度\nconst acceleration = -0.001;\n// 阻力\nconst resistance = 0.0002;\n\n/**\n * 通过速度滚动到停止\n */\nfunction scrollMove(initialSpeed: number, callback: (spatial: number) => boolean) {\n  let v = initialSpeed;\n  let s = 0;\n  let lastTime: number | undefined;\n  let frameId = 0;\n\n  const calcMove = (now: number) => {\n    if (!lastTime) {\n      lastTime = now;\n    }\n    const dt = now - lastTime;\n    const direction = Math.sign(initialSpeed);\n    const a = direction * acceleration;\n    const f = Math.sign(-v) * v ** 2 * resistance;\n    const ds = v * dt + ((a + f) * dt ** 2) / 2;\n    v += (a + f) * dt;\n\n    s += ds;\n    // move to s\n    lastTime = now;\n\n    if (direction * v <= 0) {\n      caf();\n      return;\n    }\n\n    if (callback(s)) {\n      raf();\n      return;\n    }\n    caf();\n  };\n  raf();\n\n  function raf() {\n    frameId = requestAnimationFrame(calcMove);\n  }\n  function caf() {\n    cancelAnimationFrame(frameId);\n  }\n}\n\n/**\n * 缓动函数\n */\nconst easeOutQuart = (x: number) => 1 - (1 - x) ** 4;\n\n/**\n * 缓动回调\n */\nfunction easeOutMove(\n  start: number,\n  end: number,\n  callback: (spatial: number) => boolean,\n  speed = defaultSpeed,\n  easing = easeOutQuart,\n  complete?: () => void,\n) {\n  const distance = end - start;\n  if (distance === 0) {\n    return;\n  }\n\n  const startTime = Date.now();\n  let frameId = 0;\n\n  const calcMove = () => {\n    const time = Math.min(1, (Date.now() - startTime) / speed);\n    const result = callback(start + easing(time) * distance);\n\n    if (result && time < 1) {\n      raf();\n      return;\n    }\n    cancelAnimationFrame(frameId);\n    if (time >= 1 && complete) {\n      complete();\n    }\n  };\n  raf();\n\n  function raf() {\n    frameId = requestAnimationFrame(calcMove);\n  }\n}\n","import type { Dispatch, MutableRefObject, SetStateAction } from 'react';\nimport { useState, useEffect, useRef } from 'react';\nimport type { EasingMode, OriginRectType } from '../types';\nimport useMethods from './useMethods';\nimport { maxWaitAnimationTime } from '../variables';\n\nconst initialRect: OriginRectType = {\n  T: 0,\n  L: 0,\n  W: 0,\n  H: 0,\n  // 图像填充方式\n  FIT: undefined,\n};\n\nexport default function useAnimationOrigin(\n  visible: boolean | undefined,\n  originRef: MutableRefObject<HTMLElement | null> | undefined,\n  loaded: boolean,\n  speed: number,\n  updateEasing: (pause: boolean) => void,\n): [\n  // 动画状态\n  easingMode: EasingMode,\n  originRect: OriginRectType,\n] {\n  const [originRect, updateOriginRect] = useState(initialRect);\n  // 动画状态\n  const [easingMode, updateEasingMode] = useState<EasingMode>(0);\n  const initialTime = useRef<number>();\n\n  const fn = useMethods({\n    OK: () => visible && updateEasingMode(4),\n  });\n\n  useEffect(() => {\n    // 记录初始打开的时间\n    if (!initialTime.current) {\n      initialTime.current = Date.now();\n    }\n    if (!loaded) {\n      return;\n    }\n    handleUpdateOrigin(originRef, updateOriginRect);\n    // 打开动画处理\n    if (visible) {\n      // 小于最大允许动画时间，则执行缩放动画\n      if (Date.now() - initialTime.current < maxWaitAnimationTime) {\n        updateEasingMode(1);\n        // 延时执行动画，保持 transition 生效\n        requestAnimationFrame(() => {\n          updateEasingMode(2);\n          requestAnimationFrame(() => handleToShape(3));\n        });\n        setTimeout(fn.OK, speed);\n        return;\n      }\n      // 超出则不执行\n      updateEasingMode(4);\n      return;\n    }\n    // 关闭动画处理\n    handleToShape(5);\n  }, [visible, loaded]);\n\n  function handleToShape(currentShape: EasingMode) {\n    updateEasing(false);\n    updateEasingMode(currentShape);\n  }\n\n  return [easingMode, originRect];\n}\n\n/**\n * 更新缩略图位置信息\n */\nfunction handleUpdateOrigin(\n  originRef: MutableRefObject<HTMLElement | null> | undefined,\n  updateOriginRect: Dispatch<SetStateAction<typeof initialRect>>,\n) {\n  const element = originRef && originRef.current;\n\n  if (element && element.nodeType === 1) {\n    // 获取触发时节点位置\n    const { top, left, width, height } = element.getBoundingClientRect();\n    const isImage = element.tagName === 'IMG';\n    updateOriginRect({\n      T: top,\n      L: left,\n      W: width,\n      H: height,\n      FIT: isImage ? (getComputedStyle(element).objectFit as 'contain' | 'cover' | 'fill' | undefined) : undefined,\n    });\n  }\n}\n","import { useEffect, useRef } from 'react';\n\nconst useMountedRef = () => {\n  const mountedRef = useRef(false);\n  useEffect(() => {\n    mountedRef.current = true;\n    return () => {\n      mountedRef.current = false;\n    };\n  }, []);\n  return mountedRef;\n};\n\nexport default useMountedRef;\n","import React from 'react';\nimport './Spinner.less';\n\n// eslint-disable-next-line react/prop-types\nfunction Spinner({ className = '', ...props }: React.HTMLAttributes<HTMLElement>) {\n  return (\n    <div className={`PhotoView__Spinner ${className}`} {...props}>\n      <svg viewBox=\"0 0 32 32\" width=\"36\" height=\"36\" fill=\"white\">\n        <path opacity=\".25\" d=\"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4\" />\n        <path d=\"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z\" />\n      </svg>\n    </div>\n  );\n}\n\nexport default Spinner;\n","import React from 'react';\nimport Spinner from './components/Spinner';\nimport useMountedRef from './hooks/useMountedRef';\nimport type { BrokenElementParams } from './types';\nimport './Photo.less';\n\nexport interface IPhotoLoadedParams {\n  loaded?: boolean;\n  naturalWidth?: number;\n  naturalHeight?: number;\n  broken?: boolean;\n}\n\nexport interface IPhotoProps extends React.HTMLAttributes<HTMLElement> {\n  src: string;\n  loaded: boolean;\n  broken: boolean;\n  onPhotoLoad: (params: IPhotoLoadedParams) => void;\n  loadingElement?: JSX.Element;\n  brokenElement?: JSX.Element | ((photoProps: BrokenElementParams) => JSX.Element);\n}\n\nexport default function Photo({\n  src,\n  loaded,\n  broken,\n  className,\n  onPhotoLoad,\n  loadingElement,\n  brokenElement,\n  ...restProps\n}: IPhotoProps) {\n  const mountedRef = useMountedRef();\n\n  function handleImageLoaded(e: React.SyntheticEvent<HTMLImageElement>) {\n    const { naturalWidth, naturalHeight } = e.target as HTMLImageElement;\n    if (mountedRef.current) {\n      onPhotoLoad({\n        loaded: true,\n        naturalWidth,\n        naturalHeight,\n      });\n    }\n  }\n\n  function handleImageBroken() {\n    if (mountedRef.current) {\n      onPhotoLoad({\n        broken: true,\n      });\n    }\n  }\n\n  if (src && !broken) {\n    return (\n      <>\n        <img\n          className={`PhotoView__Photo${className ? ` ${className}` : ''}`}\n          src={src}\n          onLoad={handleImageLoaded}\n          onError={handleImageBroken}\n          draggable={false}\n          alt=\"\"\n          {...restProps}\n        />\n        {!loaded &&\n          (loadingElement ? (\n            <span className=\"PhotoView__icon\">{loadingElement}</span>\n          ) : (\n            <Spinner className=\"PhotoView__icon\" />\n          ))}\n      </>\n    );\n  }\n\n  if (brokenElement) {\n    return (\n      <span className=\"PhotoView__icon\">\n        {typeof brokenElement === 'function' ? brokenElement({ src }) : brokenElement}\n      </span>\n    );\n  }\n\n  return null;\n}\n","import React, { useRef } from 'react';\nimport isTouchDevice from './utils/isTouchDevice';\nimport getMultipleTouchPosition from './utils/getMultipleTouchPosition';\nimport getPositionOnMoveOrScale from './utils/getPositionOnMoveOrScale';\nimport { getReachType, computePositionEdge } from './utils/edgeHandle';\nimport getRotateSize from './utils/getRotateSize';\nimport { limitScale } from './utils/limitTarget';\nimport getSuitableImageSize from './utils/getSuitableImageSize';\nimport useIsomorphicLayoutEffect from './hooks/useIsomorphicLayoutEffect';\nimport { minStartTouchOffset, scaleBuffer } from './variables';\nimport type {\n  DataType,\n  ReachMoveFunction,\n  ReachFunction,\n  PhotoTapFunction,\n  BrokenElementParams,\n  ExposedProperties,\n  ReachType,\n  TouchStartType,\n} from './types';\nimport useSetState from './hooks/useSetState';\nimport useMethods from './hooks/useMethods';\nimport useDebounceCallback from './hooks/useDebounceCallback';\nimport useEventListener from './hooks/useEventListener';\nimport useContinuousTap from './hooks/useContinuousTap';\nimport useScrollPosition from './hooks/useScrollPosition';\nimport useAnimationPosition from './hooks/useAnimationPosition';\nimport useMountedRef from './hooks/useMountedRef';\nimport type { IPhotoLoadedParams } from './Photo';\nimport Photo from './Photo';\nimport './PhotoBox.less';\n\nexport interface PhotoBoxProps {\n  // 图片信息\n  item: DataType;\n  // 是否可见\n  visible: boolean;\n  // 动画时间\n  speed: number;\n  // 动画函数\n  easing: string;\n  // 容器类名\n  wrapClassName?: string;\n  // 图片类名\n  className?: string;\n  // style\n  style?: object;\n  // 自定义 loading\n  loadingElement?: JSX.Element;\n  // 加载失败 Element\n  brokenElement?: JSX.Element | ((photoProps: BrokenElementParams) => JSX.Element);\n\n  // Photo 点击事件\n  onPhotoTap: PhotoTapFunction;\n  // Mask 点击事件\n  onMaskTap: PhotoTapFunction;\n  // 到达边缘滑动事件\n  onReachMove: ReachMoveFunction;\n  // 触摸解除事件\n  onReachUp: ReachFunction;\n  // Resize 事件\n  onPhotoResize: () => void;\n  // 向父组件导出属性\n  expose: (state: ExposedProperties) => void;\n  // 是否在当前操作中\n  isActive: boolean;\n}\n\nconst initialState = {\n  // 真实宽度\n  naturalWidth: undefined as number | undefined,\n  // 真实高度\n  naturalHeight: undefined as number | undefined,\n  // 宽度\n  width: undefined as number | undefined,\n  // 高度\n  height: undefined as number | undefined,\n  // 加载成功状态\n  loaded: undefined as boolean | undefined,\n  // 破碎状态\n  broken: false,\n\n  // 图片 X 偏移量\n  x: 0,\n  // 图片 y 偏移量\n  y: 0,\n  // 图片处于触摸的状态\n  touched: false,\n  // 背景处于触摸状态\n  maskTouched: false,\n  // 旋转状态\n  rotate: 0,\n  // 放大缩小\n  scale: 1,\n\n  // 触摸开始时 x 原始坐标\n  CX: 0,\n  // 触摸开始时 y 原始坐标\n  CY: 0,\n\n  // 触摸开始时图片 x 偏移量\n  lastX: 0,\n  // 触摸开始时图片 y 偏移量\n  lastY: 0,\n  // 上一个触摸状态 x 原始坐标\n  lastCX: 0,\n  // 上一个触摸状态 y 原始坐标\n  lastCY: 0,\n  // 上一个触摸状态的 scale\n  lastScale: 1,\n\n  // 触摸开始时时间\n  touchTime: 0,\n  // 多指触控间距\n  touchLength: 0,\n  // 是否暂停 transition\n  pause: true,\n  // 停止 Raf\n  stopRaf: true,\n  // 当前边缘触发状态\n  reach: undefined as ReachType,\n};\n\nexport default function PhotoBox({\n  item: { src, render, width: customWidth = 0, height: customHeight = 0, originRef },\n  visible,\n  speed,\n  easing,\n  wrapClassName,\n  className,\n  style,\n  loadingElement,\n  brokenElement,\n\n  onPhotoTap,\n  onMaskTap,\n  onReachMove,\n  onReachUp,\n  onPhotoResize,\n  isActive,\n  expose,\n}: PhotoBoxProps) {\n  const [state, updateState] = useSetState(initialState);\n  const initialTouchRef = useRef<TouchStartType>(0);\n  const mounted = useMountedRef();\n\n  const {\n    naturalWidth = customWidth,\n    naturalHeight = customHeight,\n    width = customWidth,\n    height = customHeight,\n    loaded = !src,\n    broken,\n    x,\n    y,\n    touched,\n    stopRaf,\n    maskTouched,\n    rotate,\n    scale,\n    CX,\n    CY,\n    lastX,\n    lastY,\n    lastCX,\n    lastCY,\n    lastScale,\n    touchTime,\n    touchLength,\n    pause,\n    reach,\n  } = state;\n\n  const fn = useMethods({\n    onScale: (current: number) => onScale(limitScale(current)),\n    onRotate(current: number) {\n      if (rotate !== current) {\n        expose({ rotate: current });\n        updateState({ rotate: current, ...getSuitableImageSize(naturalWidth, naturalHeight, current) });\n      }\n    },\n  });\n\n  // 默认为屏幕中心缩放\n  function onScale(current: number, clientX?: number, clientY?: number) {\n    if (scale !== current) {\n      expose({ scale: current });\n      updateState({\n        scale: current,\n        ...getPositionOnMoveOrScale(x, y, width, height, scale, current, clientX, clientY),\n        ...(current <= 1 && { x: 0, y: 0 }),\n      });\n    }\n  }\n\n  const handleMove = useDebounceCallback(\n    (nextClientX: number, nextClientY: number, currentTouchLength: number = 0) => {\n      if ((touched || maskTouched) && isActive) {\n        // 通过旋转调换宽高\n        const [currentWidth, currentHeight] = getRotateSize(rotate, width, height);\n        // 单指最小缩放下，以初始移动距离来判断意图\n        if (currentTouchLength === 0 && initialTouchRef.current === 0) {\n          const isStillX = Math.abs(nextClientX - CX) <= minStartTouchOffset;\n          const isStillY = Math.abs(nextClientY - CY) <= minStartTouchOffset;\n          // 初始移动距离不足\n          if (isStillX && isStillY) {\n            // 方向记录上次移动距离，以便平滑过渡\n            updateState({ lastCX: nextClientX, lastCY: nextClientY });\n            return;\n          }\n          // 设置响应状态\n          initialTouchRef.current = !isStillX ? 1 : nextClientY > CY ? 3 : 2;\n        }\n\n        const offsetX = nextClientX - lastCX;\n        const offsetY = nextClientY - lastCY;\n        // 边缘触发状态\n        let currentReach: ReachType;\n        if (currentTouchLength === 0) {\n          // 边缘超出状态\n          const [horizontalCloseEdge] = computePositionEdge(offsetX + lastX, scale, currentWidth, innerWidth);\n          const [verticalCloseEdge] = computePositionEdge(offsetY + lastY, scale, currentHeight, innerHeight);\n          // 边缘触发检测\n          currentReach = getReachType(initialTouchRef.current, horizontalCloseEdge, verticalCloseEdge, reach);\n\n          // 接触边缘\n          if (currentReach !== undefined) {\n            onReachMove(currentReach, nextClientX, nextClientY, scale);\n          }\n        }\n        // 横向边缘触发、背景触发禁用当前滑动\n        if (currentReach === 'x' || maskTouched) {\n          updateState({ reach: 'x' });\n          return;\n        }\n        // 目标倍数\n        const toScale = limitScale(\n          scale + ((currentTouchLength - touchLength) / 100 / 2) * scale,\n          naturalWidth / width,\n          scaleBuffer,\n        );\n        // 导出变量\n        expose({ scale: toScale });\n        updateState({\n          touchLength: currentTouchLength,\n          reach: currentReach,\n          scale: toScale,\n          ...getPositionOnMoveOrScale(x, y, width, height, scale, toScale, nextClientX, nextClientY, offsetX, offsetY),\n        });\n      }\n    },\n    {\n      maxWait: 8,\n    },\n  );\n\n  function updateRaf(position: { x?: number; y?: number }) {\n    if (stopRaf || touched) {\n      return false;\n    }\n    if (mounted.current) {\n      // 下拉关闭时可以有动画\n      updateState({ ...position, pause: visible });\n    }\n    return mounted.current;\n  }\n\n  const slideToPosition = useScrollPosition(\n    (nextX) => updateRaf({ x: nextX }),\n    (nextY) => updateRaf({ y: nextY }),\n    (nextScale) => {\n      if (mounted.current) {\n        expose({ scale: nextScale });\n        updateState({ scale: nextScale });\n      }\n      return !touched && mounted.current;\n    },\n  );\n\n  const handlePhotoTap = useContinuousTap(onPhotoTap, (currentClientX: number, currentClientY: number) => {\n    if (!reach) {\n      // 若图片足够大，则放大适应的倍数\n      const endScale = scale !== 1 ? 1 : Math.max(2, naturalWidth / width);\n      onScale(endScale, currentClientX, currentClientY);\n    }\n  });\n\n  function handleUp(nextClientX: number, nextClientY: number) {\n    // 重置响应状态\n    initialTouchRef.current = 0;\n    if ((touched || maskTouched) && isActive) {\n      updateState({\n        touched: false,\n        maskTouched: false,\n        pause: false,\n        stopRaf: false,\n        reach: undefined,\n      });\n      const safeScale = limitScale(scale, naturalWidth / width);\n      // Go\n      slideToPosition(x, y, lastX, lastY, width, height, scale, safeScale, lastScale, rotate, touchTime);\n\n      onReachUp(nextClientX, nextClientY);\n      // 触发 Tap 事件\n      if (CX === nextClientX && CY === nextClientY) {\n        if (touched) {\n          handlePhotoTap(nextClientX, nextClientY);\n          return;\n        }\n        if (maskTouched) {\n          onMaskTap(nextClientX, nextClientY);\n        }\n      }\n    }\n  }\n\n  useEventListener(isTouchDevice ? undefined : 'mousemove', (e) => {\n    e.preventDefault();\n    handleMove(e.clientX, e.clientY);\n  });\n  useEventListener(isTouchDevice ? undefined : 'mouseup', (e) => {\n    handleUp(e.clientX, e.clientY);\n  });\n  useEventListener(\n    isTouchDevice ? 'touchmove' : undefined,\n    (e) => {\n      e.preventDefault();\n      const position = getMultipleTouchPosition(e);\n      handleMove(...position);\n    },\n    { passive: false },\n  );\n  useEventListener(\n    isTouchDevice ? 'touchend' : undefined,\n    ({ changedTouches }) => {\n      const touch = changedTouches[0];\n      handleUp(touch.clientX, touch.clientY);\n    },\n    { passive: false },\n  );\n  useEventListener(\n    'resize',\n    useDebounceCallback(\n      () => {\n        if (loaded && !touched) {\n          updateState(getSuitableImageSize(naturalWidth, naturalHeight, rotate));\n          onPhotoResize();\n        }\n      },\n      { maxWait: 8 },\n    ),\n  );\n\n  useIsomorphicLayoutEffect(() => {\n    if (isActive) {\n      expose({ scale, rotate, ...fn });\n    }\n  }, [isActive]);\n\n  function handlePhotoLoad(params: IPhotoLoadedParams) {\n    updateState({\n      ...params,\n      ...(params.loaded && getSuitableImageSize(params.naturalWidth || 0, params.naturalHeight || 0, rotate)),\n    });\n  }\n\n  function handleStart(currentClientX: number, currentClientY: number, currentTouchLength: number = 0) {\n    updateState({\n      touched: true,\n      CX: currentClientX,\n      CY: currentClientY,\n      lastCX: currentClientX,\n      lastCY: currentClientY,\n      lastX: x,\n      lastY: y,\n      lastScale: scale,\n      touchLength: currentTouchLength,\n      touchTime: Date.now(),\n    });\n  }\n\n  function handleWheel(e: React.WheelEvent) {\n    if (!reach) {\n      // 限制最大倍数和最小倍数\n      const toScale = limitScale(scale - e.deltaY / 100 / 2, naturalWidth / width);\n      updateState({ stopRaf: true });\n      onScale(toScale, e.clientX, e.clientY);\n    }\n  }\n\n  function handleMaskStart(e: { clientX: number; clientY: number }) {\n    updateState({\n      maskTouched: true,\n      CX: e.clientX,\n      CY: e.clientY,\n      lastX: x,\n      lastY: y,\n    });\n  }\n\n  function handleTouchStart(e: React.TouchEvent) {\n    e.stopPropagation();\n    handleStart(...getMultipleTouchPosition(e));\n  }\n\n  function handleMouseDown(e: React.MouseEvent) {\n    e.stopPropagation();\n    if (e.button === 0) {\n      handleStart(e.clientX, e.clientY, 0);\n    }\n  }\n\n  // 计算位置\n  const [translateX, translateY, currentWidth, currentHeight, currentScale, opacity, easingMode, FIT] =\n    useAnimationPosition(visible, originRef, loaded, x, y, width, height, scale, speed, (isPause: boolean) =>\n      updateState({ pause: isPause }),\n    );\n  // 图片 objectFit 渐变时间\n  const transitionLayoutTime = easingMode < 4 ? speed / 2 : easingMode > 4 ? speed : 0;\n  const transitionCSS = `transform ${speed}ms ${easing}`;\n\n  const attrs = {\n    className,\n    onMouseDown: isTouchDevice ? undefined : handleMouseDown,\n    onTouchStart: isTouchDevice ? handleTouchStart : undefined,\n    onWheel: handleWheel,\n    style: {\n      width: `${currentWidth}px`,\n      height: `${currentHeight}px`,\n      opacity,\n      objectFit: easingMode === 4 ? undefined : FIT,\n      transform: rotate ? `rotate(${rotate}deg)` : undefined,\n      transition:\n        // 初始状态无渐变\n        easingMode > 2\n          ? `${transitionCSS}, opacity ${speed}ms ease, height ${transitionLayoutTime}ms ${easing}`\n          : undefined,\n    },\n  };\n\n  return (\n    <div\n      className={`PhotoView__PhotoWrap${wrapClassName ? ` ${wrapClassName}` : ''}`}\n      style={style}\n      onMouseDown={!isTouchDevice && isActive ? handleMaskStart : undefined}\n      onTouchStart={isTouchDevice && isActive ? (e) => handleMaskStart(e.touches[0]) : undefined}\n    >\n      <div\n        className=\"PhotoView__PhotoBox\"\n        style={{\n          transform: `matrix(${currentScale}, 0, 0, ${currentScale}, ${translateX}, ${translateY})`,\n          transition: touched || pause ? undefined : transitionCSS,\n          willChange: isActive ? 'transform' : undefined,\n        }}\n      >\n        {src ? (\n          <Photo\n            src={src}\n            loaded={loaded}\n            broken={broken}\n            {...attrs}\n            onPhotoLoad={handlePhotoLoad}\n            loadingElement={loadingElement}\n            brokenElement={brokenElement}\n          />\n        ) : (\n          render && render({ attrs, scale: currentScale, rotate })\n        )}\n      </div>\n    </div>\n  );\n}\n","import { useRef } from 'react';\nimport useDebounceCallback from './useDebounceCallback';\n\nexport type TapFuncType<T> = (...args: T[]) => void;\n\n/**\n * 单击和双击事件处理\n * @param singleTap - 单击事件\n * @param doubleTap - 双击事件\n * @return invokeTap\n */\nexport default function useContinuousTap<T>(singleTap: TapFuncType<T>, doubleTap: TapFuncType<T>): TapFuncType<T> {\n  // 当前连续点击次数\n  const continuousClick = useRef(0);\n\n  const debounceTap = useDebounceCallback(\n    (...args) => {\n      continuousClick.current = 0;\n      singleTap(...args);\n    },\n    {\n      wait: 300,\n    },\n  );\n\n  return function invokeTap(...args) {\n    continuousClick.current += 1;\n    debounceTap(...args);\n    // 双击\n    if (continuousClick.current >= 2) {\n      debounceTap.cancel();\n      continuousClick.current = 0;\n      doubleTap(...args);\n    }\n  };\n}\n","import type { MutableRefObject } from 'react';\nimport useAnimationOrigin from './useAnimationOrigin';\nimport useTargetScale from './useTargetScale';\n\nexport default function useAnimationPosition(\n  visible: boolean | undefined,\n  originRef: MutableRefObject<HTMLElement | null> | undefined,\n  loaded: boolean,\n  x: number,\n  y: number,\n  width: number,\n  height: number,\n  scale: number,\n  speed: number,\n  updateEasing: (pause: boolean) => void,\n) {\n  // 延迟更新 width/height\n  const [autoWidth, autoHeight, autoScale] = useTargetScale(width, height, scale, speed, updateEasing);\n  // 动画源处理\n  const [easingMode, originRect] = useAnimationOrigin(visible, originRef, loaded, speed, updateEasing);\n\n  // 计算动画位置\n  const { T, L, W, H, FIT } = originRect;\n  // 偏移量，x: 0, y: 0 居中为初始\n  const centerWidth = innerWidth / 2;\n  const centerHeight = innerHeight / 2;\n  const offsetX = centerWidth - (width * scale) / 2;\n  const offsetY = centerHeight - (height * scale) / 2;\n  // 缩略图状态\n  const miniMode = easingMode < 3 || easingMode > 4;\n  // 有缩略图时，则为缩略图的位置，否则居中\n  const translateX = miniMode ? (W ? L : centerWidth) : x + offsetX;\n  const translateY = miniMode ? (W ? T : centerHeight) : y + offsetY;\n\n  // 最小值缩放\n  const minScale = W / (width * scale) || 0.01;\n\n  // 适应 objectFit 保持缩略图宽高比\n  const currentHeight = miniMode && FIT ? autoWidth * (H / W) : autoHeight;\n  // 初始加载情况无缩放\n  const currentScale = easingMode === 0 ? autoScale : miniMode ? minScale : autoScale;\n  const opacity = miniMode ? (FIT ? 1 : 0) : 1;\n\n  return [translateX, translateY, autoWidth, currentHeight, currentScale, opacity, easingMode, FIT] as const;\n}\n","import { useRef } from 'react';\nimport useSetState from './useSetState';\nimport useIsomorphicLayoutEffect from './useIsomorphicLayoutEffect';\nimport useDebounceCallback from './useDebounceCallback';\n\n/**\n * 目标缩放延迟处理\n */\nexport default function useTargetScale(\n  realWidth: number,\n  realHeight: number,\n  realScale: number,\n  speed: number,\n  updateEasing: (pause: boolean) => void,\n) {\n  const execRef = useRef(false);\n\n  const [{ lead, scale }, updateState] = useSetState({ lead: true, scale: realScale });\n\n  const moveScale = useDebounceCallback(\n    async (current: number) => {\n      updateEasing(true);\n      updateState({ lead: false, scale: current });\n    },\n    { wait: speed },\n  );\n\n  useIsomorphicLayoutEffect(() => {\n    if (!execRef.current) {\n      execRef.current = true;\n      return;\n    }\n    updateEasing(false);\n    updateState({ lead: true });\n\n    moveScale(realScale);\n  }, [realScale]);\n\n  // 运动开始\n  if (lead) {\n    return [realWidth * scale, realHeight * scale, realScale / scale] as const;\n  }\n\n  // 运动结束\n  return [realWidth * realScale, realHeight * realScale, 1] as const;\n}\n","import React, { useRef, useState } from 'react';\nimport type { DataType, PhotoProviderBase, OverlayRenderProps, ReachType } from './types';\nimport { defaultEasing, defaultSpeed, defaultOpacity, horizontalOffset, maxMoveOffset } from './variables';\nimport isTouchDevice from './utils/isTouchDevice';\nimport { limitNumber } from './utils/limitTarget';\nimport useIsomorphicLayoutEffect from './hooks/useIsomorphicLayoutEffect';\nimport useAdjacentImages from './hooks/useAdjacentImages';\nimport useSetState from './hooks/useSetState';\nimport useEventListener from './hooks/useEventListener';\nimport useAnimationVisible from './hooks/useAnimationVisible';\nimport useMethods from './hooks/useMethods';\nimport SlidePortal from './components/SlidePortal';\nimport CloseIcon from './components/CloseIcon';\nimport ArrowLeft from './components/ArrowLeft';\nimport ArrowRight from './components/ArrowRight';\nimport PreventScroll from './components/PreventScroll';\nimport PhotoBox from './PhotoBox';\nimport './PhotoSlider.less';\n\nexport interface IPhotoSliderProps extends PhotoProviderBase {\n  // 图片列表\n  images: DataType[];\n  // 图片当前索引\n  index?: number;\n  // 索引改变回调\n  onIndexChange?: (index: number) => void;\n  // 可见\n  visible: boolean;\n  // 关闭回调\n  onClose: (evt?: React.MouseEvent | React.TouchEvent) => void;\n  // 关闭动画结束后回调\n  afterClose?: () => void;\n\n  direction?: 'ltr' | 'rtl';\n}\n\ntype PhotoSliderState = {\n  // 偏移量\n  x: number;\n  // 图片处于触摸的状态\n  touched: boolean;\n  // 是否暂停 transition\n  pause: boolean;\n  // Reach 开始时 x 坐标\n  lastCX: number | undefined;\n  // Reach 开始时 y 坐标\n  lastCY: number | undefined;\n  // 背景透明度\n  bg: number | null | undefined;\n  // 上次关闭的背景透明度\n  lastBg: number | null | undefined;\n  // 是否显示 overlay\n  overlay: boolean;\n  // 是否为最小状态，可下拉关闭\n  minimal: boolean;\n  // 缩放\n  scale: number;\n  // 旋转\n  rotate: number;\n  // 缩放回调\n  onScale?: (scale: number) => void;\n  // 旋转回调\n  onRotate?: (rotate: number) => void;\n};\n\nconst initialState: PhotoSliderState = {\n  x: 0,\n  touched: false,\n  pause: false,\n  lastCX: undefined,\n  lastCY: undefined,\n  bg: undefined,\n  lastBg: undefined,\n  overlay: true,\n  minimal: true,\n  scale: 1,\n  rotate: 0,\n};\n\nexport default function PhotoSlider(props: IPhotoSliderProps) {\n  const {\n    loop = 3,\n    speed: speedFn,\n    easing: easingFn,\n    photoClosable,\n    maskClosable = true,\n    maskOpacity = defaultOpacity,\n    pullClosable = true,\n    bannerVisible = true,\n    overlayRender,\n    toolbarRender,\n    className,\n    maskClassName,\n    photoClassName,\n    photoWrapClassName,\n    loadingElement,\n    brokenElement,\n    images,\n    index: controlledIndex = 0,\n    onIndexChange: controlledIndexChange,\n    visible,\n    onClose,\n    afterClose,\n    portalContainer,\n  } = props;\n\n  const [state, updateState] = useSetState(initialState);\n  const [innerIndex, updateInnerIndex] = useState(0);\n\n  const {\n    x,\n    touched,\n    pause,\n\n    lastCX,\n    lastCY,\n\n    bg = maskOpacity,\n    lastBg,\n    overlay,\n    minimal,\n\n    scale,\n    rotate,\n    onScale,\n    onRotate,\n  } = state;\n\n  // 受控 index\n  const isControlled = props.hasOwnProperty('index');\n  const index = isControlled ? controlledIndex : innerIndex;\n  const onIndexChange = isControlled ? controlledIndexChange : updateInnerIndex;\n  // 内部虚拟 index\n  const virtualIndexRef = useRef(index);\n\n  // 当前图片\n  const imageLength = images.length;\n  const currentImage: DataType | undefined = images[index];\n\n  // 是否开启\n  // noinspection SuspiciousTypeOfGuard\n  const enableLoop = typeof loop === 'boolean' ? loop : imageLength > loop;\n\n  // 显示动画处理\n  const [realVisible, activeAnimation, onAnimationEnd] = useAnimationVisible(visible, afterClose);\n\n  useIsomorphicLayoutEffect(() => {\n    // 显示弹出层，修正正确的指向\n    if (realVisible) {\n      updateState({\n        pause: true,\n        x: index * -(innerWidth + horizontalOffset),\n      });\n      virtualIndexRef.current = index;\n      return;\n    }\n    // 关闭后清空状态\n    updateState(initialState);\n  }, [realVisible]);\n\n  const { close, changeIndex } = useMethods({\n    close(evt?: React.MouseEvent | React.TouchEvent) {\n      if (onRotate) {\n        onRotate(0);\n      }\n      updateState({\n        overlay: true,\n        // 记录当前关闭时的透明度\n        lastBg: bg,\n      });\n      onClose(evt);\n    },\n    changeIndex(nextIndex: number, isPause: boolean = false) {\n      // 当前索引\n      const currentIndex = enableLoop ? virtualIndexRef.current + (nextIndex - index) : nextIndex;\n      const max = imageLength - 1;\n      // 虚拟 index\n      // 非循环模式，限制区间\n      const limitIndex = limitNumber(currentIndex, 0, max);\n      const nextVirtualIndex = enableLoop ? currentIndex : limitIndex;\n      // 单个屏幕宽度\n      const singlePageWidth = innerWidth + horizontalOffset;\n\n      updateState({\n        touched: false,\n        lastCX: undefined,\n        lastCY: undefined,\n        x: -singlePageWidth * nextVirtualIndex,\n        pause: isPause,\n      });\n\n      virtualIndexRef.current = nextVirtualIndex;\n      // 更新真实的 index\n      const realLoopIndex = nextIndex < 0 ? max : nextIndex > max ? 0 : nextIndex;\n      if (onIndexChange) {\n        onIndexChange(enableLoop ? realLoopIndex : limitIndex);\n      }\n    },\n  });\n\n  useEventListener('keydown', (evt: KeyboardEvent) => {\n    if (visible) {\n      switch (evt.key) {\n        case 'ArrowLeft':\n          changeIndex(index - 1, true);\n          break;\n        case 'ArrowRight':\n          changeIndex(index + 1, true);\n          break;\n        case 'Escape':\n          close();\n          break;\n        default:\n      }\n    }\n  });\n\n  function handlePhotoTap(closeable: boolean | undefined) {\n    return closeable ? close() : updateState({ overlay: !overlay });\n  }\n\n  function handleResize() {\n    updateState({\n      x: -(innerWidth + horizontalOffset) * index,\n      lastCX: undefined,\n      lastCY: undefined,\n      pause: true,\n    });\n    virtualIndexRef.current = index;\n  }\n\n  function handleReachVerticalMove(clientY: number, nextScale?: number) {\n    if (lastCY === undefined) {\n      updateState({\n        touched: true,\n        lastCY: clientY,\n        bg,\n        minimal: true,\n      });\n      return;\n    }\n    const opacity =\n      maskOpacity === null ? null : limitNumber(maskOpacity, 0.01, maskOpacity - Math.abs(clientY - lastCY) / 100 / 4);\n\n    updateState({\n      touched: true,\n      lastCY,\n      bg: nextScale === 1 ? opacity : maskOpacity,\n      minimal: nextScale === 1,\n    });\n  }\n\n  function handleReachHorizontalMove(clientX: number) {\n    if (lastCX === undefined) {\n      updateState({\n        touched: true,\n        lastCX: clientX,\n        x,\n        pause: false,\n      });\n      return;\n    }\n    const originOffsetClientX = clientX - lastCX;\n    let offsetClientX = originOffsetClientX;\n\n    // 第一张和最后一张超出距离减半\n    if (\n      !enableLoop &&\n      ((index === 0 && originOffsetClientX > 0) || (index === imageLength - 1 && originOffsetClientX < 0))\n    ) {\n      offsetClientX = originOffsetClientX / 2;\n    }\n\n    updateState({\n      touched: true,\n      lastCX,\n      x: -(innerWidth + horizontalOffset) * virtualIndexRef.current + offsetClientX,\n      pause: false,\n    });\n  }\n\n  function handleReachMove(reachPosition: ReachType, clientX: number, clientY: number, nextScale?: number) {\n    if (reachPosition === 'x') {\n      handleReachHorizontalMove(clientX);\n    } else if (reachPosition === 'y') {\n      handleReachVerticalMove(clientY, nextScale);\n    }\n  }\n\n  function handleReachUp(clientX: number, clientY: number) {\n    const offsetClientX = clientX - (lastCX ?? clientX);\n    const offsetClientY = clientY - (lastCY ?? clientY);\n    let willClose = false;\n    // 下一张\n    if (offsetClientX < -maxMoveOffset) {\n      changeIndex(index + 1);\n      return;\n    }\n    // 上一张\n    if (offsetClientX > maxMoveOffset) {\n      changeIndex(index - 1);\n      return;\n    }\n    const singlePageWidth = innerWidth + horizontalOffset;\n    // 当前偏移\n    const currentTranslateX = -singlePageWidth * virtualIndexRef.current;\n\n    if (Math.abs(offsetClientY) > 100 && minimal && pullClosable) {\n      willClose = true;\n      close();\n    }\n    updateState({\n      touched: false,\n      x: currentTranslateX,\n      lastCX: undefined,\n      lastCY: undefined,\n      bg: maskOpacity,\n      overlay: willClose ? true : overlay,\n    });\n  }\n  // 截取相邻的图片\n  const adjacentImages = useAdjacentImages(images, index, enableLoop);\n\n  if (!realVisible) {\n    return null;\n  }\n\n  const currentOverlayVisible = overlay && !activeAnimation;\n  // 关闭过程中使用下拉保存的透明度\n  const currentOpacity = visible ? bg : lastBg;\n  // 覆盖物参数\n  const overlayParams: OverlayRenderProps | undefined = onScale &&\n    onRotate && {\n      images,\n      index,\n      visible,\n      onClose: close,\n      onIndexChange: changeIndex,\n      overlayVisible: currentOverlayVisible,\n      overlay: currentImage && currentImage.overlay,\n      scale,\n      rotate,\n      onScale,\n      onRotate,\n    };\n  // 动画时间\n  const currentSpeed = speedFn ? speedFn(activeAnimation) : defaultSpeed;\n  const currentEasing = easingFn ? easingFn(activeAnimation) : defaultEasing;\n  const slideSpeed = speedFn ? speedFn(3) : defaultSpeed + 200;\n  const slideEasing = easingFn ? easingFn(3) : defaultEasing;\n\n  return (\n    <SlidePortal\n      className={`PhotoView-Portal${!currentOverlayVisible ? ' PhotoView-Slider__clean' : ''}${\n        !visible ? ' PhotoView-Slider__willClose' : ''\n      }${className ? ` ${className}` : ''}`}\n      role=\"dialog\"\n      onClick={(e) => e.stopPropagation()}\n      container={portalContainer}\n    >\n      {visible && <PreventScroll />}\n      <div\n        className={`PhotoView-Slider__Backdrop${maskClassName ? ` ${maskClassName}` : ''}${\n          activeAnimation === 1\n            ? ' PhotoView-Slider__fadeIn'\n            : activeAnimation === 2\n              ? ' PhotoView-Slider__fadeOut'\n              : ''\n        }`}\n        style={{\n          background: currentOpacity ? `rgba(0, 0, 0, ${currentOpacity})` : undefined,\n          transitionTimingFunction: currentEasing,\n          transitionDuration: `${touched ? 0 : currentSpeed}ms`,\n          animationDuration: `${currentSpeed}ms`,\n        }}\n        onAnimationEnd={onAnimationEnd}\n      />\n      {bannerVisible && (\n        <div className=\"PhotoView-Slider__BannerWrap\">\n          <div className=\"PhotoView-Slider__Counter\">\n            {index + 1} / {imageLength}\n          </div>\n          <div className=\"PhotoView-Slider__BannerRight\">\n            {toolbarRender && overlayParams && toolbarRender(overlayParams)}\n            <CloseIcon className=\"PhotoView-Slider__toolbarIcon\" onClick={close} />\n          </div>\n        </div>\n      )}\n      {adjacentImages.map((item: DataType, currentIndex) => {\n        // 截取之前的索引位置\n        const nextIndex =\n          !enableLoop && index === 0 ? index + currentIndex : virtualIndexRef.current - 1 + currentIndex;\n\n        return (\n          <PhotoBox\n            key={enableLoop ? `${item.key}/${item.src}/${nextIndex}` : item.key}\n            item={item}\n            speed={currentSpeed}\n            easing={currentEasing}\n            visible={visible}\n            onReachMove={handleReachMove}\n            onReachUp={handleReachUp}\n            onPhotoTap={() => handlePhotoTap(photoClosable)}\n            onMaskTap={() => handlePhotoTap(maskClosable)}\n            wrapClassName={photoWrapClassName}\n            className={photoClassName}\n            style={{\n              left: `${(innerWidth + horizontalOffset) * nextIndex}px`,\n              transform: `translate3d(${x}px, 0px, 0)`,\n              transition: touched || pause ? undefined : `transform ${slideSpeed}ms ${slideEasing}`,\n            }}\n            loadingElement={loadingElement}\n            brokenElement={brokenElement}\n            onPhotoResize={handleResize}\n            isActive={virtualIndexRef.current === nextIndex}\n            expose={updateState}\n          />\n        );\n      })}\n      {!isTouchDevice && bannerVisible && (\n        <>\n          {(enableLoop || index !== 0) && (\n            <div className=\"PhotoView-Slider__ArrowLeft\" onClick={() => changeIndex(index - 1, true)}>\n              <ArrowLeft />\n            </div>\n          )}\n          {(enableLoop || index + 1 < imageLength) && (\n            <div className=\"PhotoView-Slider__ArrowRight\" onClick={() => changeIndex(index + 1, true)}>\n              <ArrowRight />\n            </div>\n          )}\n        </>\n      )}\n      {overlayRender && overlayParams && (\n        <div className=\"PhotoView-Slider__Overlay\">{overlayRender(overlayParams)}</div>\n      )}\n    </SlidePortal>\n  );\n}\n","import { useReducer, useRef } from 'react';\nimport type { ActiveAnimationType } from '../types';\nimport useForkedVariable from './useForkedVariable';\n\n/**\n * 动画关闭处理真实关闭状态\n * 通过 onAnimationEnd 回调实现 leaveCallback\n */\nexport default function useAnimationVisible(\n  visible: boolean | undefined,\n  afterClose?: () => void,\n): [realVisible: boolean | undefined, activeAnimation: ActiveAnimationType, onAnimationEnd: () => void] {\n  const [, handleRender] = useReducer((c) => !c, false);\n\n  const activeAnimation = useRef<ActiveAnimationType>(0);\n\n  // 可见状态分支\n  const [realVisible, modifyRealVisible] = useForkedVariable(visible, (modify) => {\n    // 可见状态：设置进入动画\n    if (visible) {\n      modify(visible);\n      activeAnimation.current = 1;\n    } else {\n      activeAnimation.current = 2;\n    }\n  });\n\n  function onAnimationEnd() {\n    // 动画结束后触发渲染\n    handleRender();\n    // 结束动画：设置隐藏状态\n    if (activeAnimation.current === 2) {\n      modifyRealVisible(false);\n      // 触发隐藏回调\n      if (afterClose) {\n        afterClose();\n      }\n    }\n    // 重置状态\n    activeAnimation.current = 0;\n  }\n\n  return [\n    /**\n     * 真实可见状态\n     */\n    realVisible,\n    /**\n     * 正在进行的动画\n     */\n    activeAnimation.current,\n    /**\n     * 动画结束后回调\n     */\n    onAnimationEnd,\n  ];\n}\n","import { useRef, useMemo } from 'react';\n\n/**\n * 逻辑分叉变量处理\n * 此 hook 不触发额外渲染\n */\nexport default function useForkedVariable<T>(initial: T, updater: (modify: (variable: T) => void) => void) {\n  // 初始分叉变量\n  const forkedRef = useRef(initial);\n\n  function modify(next: T) {\n    forkedRef.current = next;\n  }\n\n  useMemo(() => {\n    // 参数变化之后同步内部分叉变量\n    updater(modify);\n  }, [initial]);\n\n  return [forkedRef.current, modify] as const;\n}\n","import { useMemo } from 'react';\nimport type { DataType } from '../types';\n\n/**\n * 截取相邻三张图片\n */\nexport default function useAdjacentImages(images: DataType[], index: number, loop: boolean) {\n  return useMemo(() => {\n    const imageLength = images.length;\n    if (loop) {\n      const connected = images.concat(images).concat(images);\n      return connected.slice(imageLength + index - 1, imageLength + index + 2);\n    }\n    return images.slice(Math.max(index - 1, 0), Math.min(index + 2, imageLength + 1));\n  }, [images, index, loop]);\n}\n","import React, { useMemo, useRef } from 'react';\nimport type { DataType, PhotoProviderBase } from './types';\nimport useMethods from './hooks/useMethods';\nimport useSetState from './hooks/useSetState';\nimport PhotoContext from './photo-context';\nimport PhotoSlider from './PhotoSlider';\n\nexport interface PhotoProviderProps extends PhotoProviderBase {\n  children: React.ReactNode;\n  onIndexChange?: (index: number, state: PhotoProviderState) => void;\n  onVisibleChange?: (visible: boolean, index: number, state: PhotoProviderState) => void;\n}\n\ntype PhotoProviderState = {\n  images: DataType[];\n  visible: boolean;\n  index: number;\n};\n\nconst initialState: PhotoProviderState = {\n  images: [],\n  visible: false,\n  index: 0,\n};\n\nexport default function PhotoProvider({ children, onIndexChange, onVisibleChange, ...restProps }: PhotoProviderProps) {\n  const [state, updateState] = useSetState(initialState);\n  const uniqueIdRef = useRef(0);\n  const { images, visible, index } = state;\n\n  const methods = useMethods({\n    nextId() {\n      return (uniqueIdRef.current += 1);\n    },\n    update(imageItem: DataType) {\n      const currentIndex = images.findIndex((n) => n.key === imageItem.key);\n      if (currentIndex > -1) {\n        const nextImages = images.slice();\n        nextImages.splice(currentIndex, 1, imageItem);\n        updateState({\n          images: nextImages,\n        });\n        return;\n      }\n      updateState((prev) => ({\n        images: prev.images.concat(imageItem),\n      }));\n    },\n    remove(key: number) {\n      updateState((prev) => {\n        const nextImages = prev.images.filter((item) => item.key !== key);\n        const nextEndIndex = nextImages.length - 1;\n        return {\n          images: nextImages,\n          index: Math.min(nextEndIndex, index),\n        };\n      });\n    },\n    show(key: number) {\n      const currentIndex = images.findIndex((item) => item.key === key);\n      updateState({\n        visible: true,\n        index: currentIndex,\n      });\n      if (onVisibleChange) {\n        onVisibleChange(true, currentIndex, state);\n      }\n    },\n  });\n\n  const fn = useMethods({\n    close() {\n      updateState({\n        visible: false,\n      });\n\n      if (onVisibleChange) {\n        onVisibleChange(false, index, state);\n      }\n    },\n    changeIndex(nextIndex: number) {\n      updateState({\n        index: nextIndex,\n      });\n\n      if (onIndexChange) {\n        onIndexChange(nextIndex, state);\n      }\n    },\n  });\n\n  const value = useMemo(() => ({ ...state, ...methods }), [state, methods]);\n\n  return (\n    <PhotoContext.Provider value={value}>\n      {children}\n      <PhotoSlider\n        images={images}\n        visible={visible}\n        index={index}\n        onIndexChange={fn.changeIndex}\n        onClose={fn.close}\n        {...restProps}\n      />\n    </PhotoContext.Provider>\n  );\n}\n","import type React from 'react';\nimport { useImperativeHandle, Children, cloneElement, useContext, useEffect, useMemo, useRef } from 'react';\nimport useInitial from './hooks/useInitial';\nimport useMethods from './hooks/useMethods';\nimport type { PhotoContextType } from './photo-context';\nimport PhotoContext from './photo-context';\nimport type { PhotoRenderParams } from './types';\n\nexport interface PhotoViewProps {\n  /**\n   * 图片地址\n   */\n  src?: string;\n  /**\n   * 自定义渲染，优先级比 src 低\n   */\n  render?: (props: PhotoRenderParams) => React.ReactNode;\n  /**\n   * 自定义覆盖节点\n   */\n  overlay?: React.ReactNode;\n  /**\n   * 自定义渲染节点宽度\n   */\n  width?: number;\n  /**\n   * 自定义渲染节点高度\n   */\n  height?: number;\n  /**\n   * 子节点，一般为缩略图\n   */\n  children?: React.ReactElement;\n  /**\n   * 触发的事件\n   */\n  triggers?: ('onClick' | 'onDoubleClick')[];\n}\n\nconst PhotoView: React.FC<PhotoViewProps> = ({\n  src,\n  render,\n  overlay,\n  width,\n  height,\n  triggers = ['onClick'],\n  children,\n}) => {\n  const photoContext = useContext<PhotoContextType>(PhotoContext);\n  const key = useInitial(() => photoContext.nextId());\n  const originRef = useRef<HTMLElement>(null);\n\n  useImperativeHandle((children as React.FunctionComponentElement<HTMLElement>)?.ref, () => originRef.current);\n\n  useEffect(() => {\n    return () => {\n      photoContext.remove(key);\n    };\n  }, []);\n\n  function invokeChildrenFn(eventName: string, e: React.SyntheticEvent) {\n    if (children) {\n      const eventFn = children.props[eventName];\n      if (eventFn) {\n        eventFn(e);\n      }\n    }\n  }\n\n  const fn = useMethods({\n    render(props: PhotoRenderParams) {\n      return render && render(props);\n    },\n    show(eventName: string, e: React.MouseEvent) {\n      photoContext.show(key);\n      invokeChildrenFn(eventName, e);\n    },\n  });\n\n  const eventListeners = useMemo(() => {\n    const listener = {};\n    triggers.forEach((eventName) => {\n      listener[eventName] = fn.show.bind(null, eventName);\n    });\n    return listener;\n  }, []);\n\n  useEffect(() => {\n    photoContext.update({\n      key,\n      src,\n      originRef,\n      render: fn.render,\n      overlay,\n      width,\n      height,\n    });\n  }, [src]);\n\n  if (children) {\n    return Children.only(cloneElement(children, { ...eventListeners, ref: originRef }));\n  }\n  return null;\n};\n\nexport default PhotoView;\n","import { useRef } from 'react';\n\nexport default function useInitial<T extends (...args: any) => any>(callback: T) {\n  const { current } = useRef({ sign: false, fn: undefined as ReturnType<T> });\n  if (!current.sign) {\n    current.sign = true;\n    current.fn = callback();\n  }\n  return current.fn;\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;AAKwB,SAAAA,EAA8DC,CAAA;EACpF,IAAQC,CAAA,GAAYC,CAAA,CAAO;IACzBC,EAAA,EAAAH,CAAA;IACAI,IAAA,OAAM;EAAA,GAFAC,OAAA;EAMR,IAFAJ,CAAA,CAAQE,EAAA,GAAKH,CAAA,GAERC,CAAA,CAAQG,IAAA,EAAM;IACjB,IAAME,CAAA,GAAOC,MAAA,CAAOC,MAAA,CAAO;IAC3BD,MAAA,CAAOE,IAAA,CAAKT,CAAA,EAAIU,OAAA,CAAQ,UAACV,CAAA;MACvBM,CAAA,CAAKN,CAAA,IAAO;QAAA,IAAAE,CAAA;QAAwB,QAAAA,CAAA,GAAAD,CAAA,CAAQE,EAAA,CAAGH,CAAA,GAAKW,IAAA,CAAIC,KAAA,CAAAV,CAAA,EAAC,CAAAD,CAAA,CAAQE,EAAA,EAAEU,MAAA,IAAAC,KAAA,CAAAH,IAAA,CAAAI,SAAA,GAAU;MAAA,CAC/E;IAAA,IACAd,CAAA,CAAQG,IAAA,GAAOE,CAChB;EAAA;EAED,OAAOL,CAAA,CAAQG,IACjB;AAAA;ACnBwB,SAAAY,EAA2ChB,CAAA;EACjE,OAAOC,CAAA,CACL,UAACD,CAAA,EAAUE,CAAA;IAA+C,OAAAe,CAAA,KACrDjB,CAAA,EACmB,qBAAXE,CAAA,GAAwBA,CAAA,CAAOF,CAAA,IAASE,CAAA,CACnD;EAAA,GACFF,CAAA,CAEJ;AAAA;ACEA,IAAekB,CAAA,GAAAZ,CAAA,MAAgC;ECClCa,CAAA,GAAgB;EAUhBC,CAAA,GAAmB;ECpB1BC,CAAA,GAAkC,sBAAXC,MAAA,IAA0B,kBAAkBA,MAAA;ECD5DC,CAAA,GAAc,SAAAC,CAACxB,CAAA,EAAeE,CAAA,EAAaD,CAAA;IACtD,OAAOwB,IAAA,CAAKC,GAAA,CAAID,IAAA,CAAKE,GAAA,CAAI3B,CAAA,EAAOC,CAAA,GAAMC,CAAA,CACxC;EAAA;EAKa0B,CAAA,GAAa,SAAAC,CAAC7B,CAAA,EAAeE,CAAA,EAAiBD,CAAA;IACzD,YADwC,MAAAC,CAAA,KAAAA,CAAA,GAAc,SAAG,MAAAD,CAAA,KAAAA,CAAA,GAAiB,IACnEsB,CAAA,CAAYvB,CAAA,EF4BG,KE5BgB,IAAIC,CAAA,GAASwB,IAAA,CAAKC,GAAA,CFiClC,GEjCgDxB,CAAA,KAAQ,IAAID,CAAA,EACpF;EAAA;EAAA6B,CAAA,GCTgC,sBAAXR,MAAA,IAA0B,sBAAsBS,IAAA,CAAKC,SAAA,IAAaA,SAAA,CAAUC,SAAA,IAE1EC,CAAA,GAAYC,CAAA;ACFX,SAAAC,EACtBpC,CAAA,EACAC,CAAA,EACAK,CAAA;EAEA,IAAM6B,CAAA,GAASjC,CAAA,CAAOD,CAAA;EACtBkC,CAAA,CAAO9B,OAAA,GAAUJ,CAAA,EAEjBiC,CAAA,CAAU;IACR,SAAShC,EAAQF,CAAA;MACfmC,CAAA,CAAO9B,OAAA,CAAQL,CAAA,CACjB;IAAA;IAIA,OAHIA,CAAA,IACFsB,MAAA,CAAOe,gBAAA,CAAiBrC,CAAA,EAAME,CAAA,EAASI,CAAA,GAE7B;MACNN,CAAA,IACFsB,MAAA,CAAOgB,mBAAA,CAAoBtC,CAAA,EAAME,CAAA,CAErC;IAAA,CACF;EAAA,GAAG,CAACF,CAAA,EACN;AAAA;ACvBA,IAAAuC,CAAA;AAQA,SAASC,EAAWtC,CAAA;EAA2D,IAAAD,CAAA,GAAAC,CAAA,CAAxDuC,SAAA;IAAAnC,CAAA,cAASL,CAAA,GAAGyC,QAAA,CAASC,IAAA,GAAI1C,CAAA;IAAKiC,CAAA,GAAIU,CAAA,CAAA1C,CAAA,EAAAqC,CAAA;EACvD,OAAOM,CAAA,CAAa7C,CAAA,CAAS8C,aAAA,QAAA7B,CAAA,KAAAiB,CAAA,IAAU5B,CAAA,CACzC;AAAA;ACRA,SAASyC,EAAU7C,CAAA;EACjB,OACEF,CAAA,CAAA8C,aAAA,QAAA7B,CAAA;IAAK+B,KAAA,EAAM;IAAKC,MAAA,EAAO;IAAKC,OAAA,EAAQ;EAAA,GAAkBhD,CAAA,GACpDF,CAAA,CAAA8C,aAAA;IAAMK,CAAA,EAAE;EAAA,GAGd;AAAA;ACNA,SAASC,EAAUlD,CAAA;EACjB,OACEF,CAAA,CAAA8C,aAAA,QAAA7B,CAAA;IAAK+B,KAAA,EAAM;IAAKC,MAAA,EAAO;IAAKC,OAAA,EAAQ;EAAA,GAAkBhD,CAAA,GACpDF,CAAA,CAAA8C,aAAA;IAAMK,CAAA,EAAE;EAAA,GAGd;AAAA;ACNA,SAASE,EAAWnD,CAAA;EAClB,OACEF,CAAA,CAAA8C,aAAA,QAAA7B,CAAA;IAAK+B,KAAA,EAAM;IAAKC,MAAA,EAAO;IAAKC,OAAA,EAAQ;EAAA,GAAkBhD,CAAA,GACpDF,CAAA,CAAA8C,aAAA;IAAMK,CAAA,EAAE;EAAA,GAGd;AAAA;AAAA,SCNwBG,EAAA;EAWtB,OAVApB,CAAA,CAAU;IACR,IAAQlC,CAAA,GAAU0C,QAAA,CAASC,IAAA,CAAnBY,KAAA;MACFrD,CAAA,GAAeF,CAAA,CAAMwD,QAAA;IAG3B,OAFAxD,CAAA,CAAMwD,QAAA,GAAW,UAEV;MACLxD,CAAA,CAAMwD,QAAA,GAAWtD,CACnB;IAAA,CACF;EAAA,GAAG,KAGL;AAAA;ACTwB,SAAAuD,EACtBzD,CAAA;EAEA,IAAAE,CAAA,GAA6BF,CAAA,CAAI0D,OAAA,CAAQ;IAAjCzD,CAAA,GAAOC,CAAA,CAAPyD,OAAA;IAASrD,CAAA,GAAOJ,CAAA,CAAP0D,OAAA;EACjB,IAAI5D,CAAA,CAAI0D,OAAA,CAAQG,MAAA,IAAU,GAAG;IAC3B,IAAA3B,CAAA,GAAuDlC,CAAA,CAAI0D,OAAA,CAAQ;MAAlDvB,CAAA,GAAWD,CAAA,CAApByB,OAAA;MAA+BG,CAAA,GAAW5B,CAAA,CAApB0B,OAAA;IAC9B,OAAO,EACJ3D,CAAA,GAAUkC,CAAA,IAAe,IACzB7B,CAAA,GAAUwD,CAAA,IAAe,GAC1BrC,IAAA,CAAKsC,IAAA,CAAKtC,IAAA,CAAAuC,GAAA,CAAC7B,CAAA,GAAclC,CAAA,EAAY,KAACwB,IAAA,CAAAuC,GAAA,CAAIF,CAAA,GAAcxD,CAAA,EAAY,IAEvE;EAAA;EACD,OAAO,CAACL,CAAA,EAASK,CAAA,EAAS,EAC5B;AAAA;AAAA,ICUa2D,CAAA,GAAsB,SAAAC,CAAClE,CAAA,EAAkBE,CAAA,EAAeD,CAAA,EAAcK,CAAA;EACjF,IAGI4B,CAAA;IAHEC,CAAA,GAAelC,CAAA,GAAOC,CAAA;IAEtB4D,CAAA,IAAa3B,CAAA,GAAe7B,CAAA,IAAa;IAG3C6D,CAAA,GAAUnE,CAAA;EAYd,OAXImC,CAAA,IAAgB7B,CAAA,IAClB4B,CAAA,GAAa,GACbiC,CAAA,GAAU,KACDnE,CAAA,GAAW,KAAK8D,CAAA,GAAY9D,CAAA,IAAY,KACjDkC,CAAA,GAAa,GACbiC,CAAA,GAAUL,CAAA,IACD9D,CAAA,GAAW,KAAK8D,CAAA,GAAY9D,CAAA,IAAY,MACjDkC,CAAA,GAAa,GACbiC,CAAA,IAAWL,CAAA,GAGN,CAAC5B,CAAA,EAAYiC,CAAA,CACtB;AAAA;ACzCwB,SAAAC,EACtBpE,CAAA,EACAE,CAAA,EACAD,CAAA,EACAK,CAAA,EACA4B,CAAA,EACAC,CAAA,EACA2B,CAAA,EACAK,CAAA,EACAE,CAAA,EACAC,CAAA;EAAA,KAHA,MAAAR,CAAA,KAAAA,CAAA,GAAkBS,UAAA,GAAa,SACb,MAAlBJ,CAAA,KAAAA,CAAA,GAAkBK,WAAA,GAAc,SAChC,MAAAH,CAAA,KAAAA,CAAA,GAAkB,eAClBC,CAAA,KAAAA,CAAA,GAAkB;EAGlB,IAAOG,CAAA,GAAeR,CAAA,CAAoBjE,CAAA,EAAGmC,CAAA,EAASlC,CAAA,EAAOsE,UAAA,EAC7D;IAAApB,CAAA,GAAsBc,CAAA,CAAoB/D,CAAA,EAAGiC,CAAA,EAAS7B,CAAA,EAAQkE,WAAA;IAExDE,CAAA,GAAgBH,UAAA,GAAa;IAC7B1B,CAAA,GAAgB2B,WAAA,GAAc;EAYpC,OAAO;IACLpD,CAAA,EANc0C,CAAA,GAAuC3B,CAAA,GAAUD,CAAA,IAAtC4B,CAAA,IAJLY,CAAA,GAAgB1E,CAAA,KAIoC0E,CAAA,IAGrDpE,CAAA,GAASL,CAAA,IZeH,KYf6BA,CAAA,GAAQkC,CAAA,KAAYoC,UAAA,GAG7C,IAAIE,CAAA,GAAcJ,CAAA,GAAU,IAAIA,CAAA;IAC7DlD,CAAA,EANcgD,CAAA,GAAuChC,CAAA,GAAUD,CAAA,IAAtCiC,CAAA,IAJLtB,CAAA,GAAgB3C,CAAA,KAIoC2C,CAAA,IAXxDM,CAAA,MAiBYmB,CAAA,GAAU,IAAIA,CAAA;IAC1CK,MAAA,EAAQb,CAAA;IACRc,MAAA,EAAQT;EAAA,CAEZ;AAAA;AAAA,SCtCwBU,EAAc7E,CAAA,EAAgBE,CAAA,EAAeD,CAAA;EACnE,IAAMK,CAAA,GAAaN,CAAA,GAAS,OAAQ;EAGpC,OAAIM,CAAA,GACK,CAACL,CAAA,EAAQC,CAAA,EAAOI,CAAA,IAGlB,CAACJ,CAAA,EAAOD,CAAA,EAAQK,CAAA,CACzB;AAAA;ACNwB,SAAAwE,EAAqB9E,CAAA,EAAsBE,CAAA,EAAuBD,CAAA;EACxF,IAAAK,CAAA,GAAkDuE,CAAA,CAAc5E,CAAA,EAAQsE,UAAA,EAAYC,WAAA;IAA7EtC,CAAA,GAAY5B,CAAA;IAAE6B,CAAA,GAAa7B,CAAA;IAE9BwD,CAAA,GAAI;IACJK,CAAA,GAAQjC,CAAA;IACRmC,CAAA,GAASlC,CAAA;IAGPmC,CAAA,GAAatE,CAAA,GAAeE,CAAA,GAAiBiC,CAAA;IAC7CsC,CAAA,GAAcvE,CAAA,GAAgBF,CAAA,GAAgBkC,CAAA;EAmBpD,OAjBIlC,CAAA,GAAekC,CAAA,IAAgBhC,CAAA,GAAgBiC,CAAA,IACjDgC,CAAA,GAAQnE,CAAA,EACRqE,CAAA,GAASnE,CAAA,IACAF,CAAA,GAAekC,CAAA,IAAgBhC,CAAA,IAAiBiC,CAAA,GACzDgC,CAAA,GAAQG,CAAA,GACCtE,CAAA,IAAgBkC,CAAA,IAAgBhC,CAAA,GAAgBiC,CAAA,IAEhDnC,CAAA,GAAeE,CAAA,GAAgBgC,CAAA,GAAeC,CAAA,GADvDkC,CAAA,GAASI,CAAA,GAKFvE,CAAA,GAAgBF,CAAA,IdoBE,MczCmBM,CAAA,MAuB5CwD,CAAA,KADAO,CAAA,GAASI,CAAA,IACKtC,CAAA,IAAiB,IAE/BgC,CAAA,GAAQG,CAAA,EAEH;IACLtB,KAAA,EAAAmB,CAAA;IACAlB,MAAA,EAAAoB,CAAA;IACAjD,CAAA,EAAG;IACHD,CAAA,EAAA2C,CAAA;IACAiB,KAAA,GAAO;EAAA,CAEX;AAAA;AClCc,SAAUC,EACtBhF,CAAA,EAA8CC,CAAA;EAS7C,IAAAK,CAAA,GAAAL,CAAA,CAPCgF,OAAA;IAAA/C,CAAA,QAAU,MAAH5B,CAAA,IAAQA,CAAA;IACf6B,CAAA,GAAOlC,CAAA,CAAPiF,OAAA;IAAOpB,CAAA,GAAA7D,CAAA,CACPkF,IAAA;IAAAd,CAAA,QAAI,MAAAP,CAAA,GAAG3B,CAAA,IAAW,IAAC2B,CAAA;IAOfQ,CAAA,GAAcpE,CAAA,CAAOF,CAAA;EAC3BsE,CAAA,CAAYjE,OAAA,GAAUL,CAAA;EAEtB,IAAMyE,CAAA,GAAOvE,CAAA,CAAO;IACdiD,CAAA,GAAkBjD,CAAA;IAClBwE,CAAA,GAAgB,SAAAU,CAAA;MAAH,OAASjC,CAAA,CAAgB9C,OAAA,IAAWgF,YAAA,CAAalC,CAAA,CAAgB9C,OAAA,CAAQ;IAAA;IAEtFwC,CAAA,GAAKsB,CAAA,CACT;MAAI,IAAAnE,CAAA,GAAuB,GAAAc,KAAA,CAAAH,IAAA,CAAAI,SAAA;QACnBb,CAAA,GAAMoF,IAAA,CAAKC,GAAA;MAEjB,SAAStF,EAAA;QACPwE,CAAA,CAAKpE,OAAA,GAAUH,CAAA,EACfwE,CAAA,IACAJ,CAAA,CAAYjE,OAAA,CAAQO,KAAA,CAAM,MAAMZ,CAAA,CAClC;MAAA;MACA,IAAMM,CAAA,GAAOmE,CAAA,CAAKpE,OAAA;QACZyD,CAAA,GAAS5D,CAAA,GAAMI,CAAA;MAUrB,IARa,MAATA,CAAA,KACE4B,CAAA,IACFjC,CAAA,IAEFwE,CAAA,CAAKpE,OAAA,GAAUH,CAAA,QAID,MAAZiC,CAAA;QACF,IAAI2B,CAAA,GAAS3B,CAAA,EAEX,YADAlC,CAAA;MAAA,OAGO6D,CAAA,GAASO,CAAA,KAClBI,CAAA,CAAKpE,OAAA,GAAUH,CAAA;MAIjBwE,CAAA,IACAvB,CAAA,CAAgB9C,OAAA,GAAUmF,UAAA,CAAW;QACnCvF,CAAA,IACAwE,CAAA,CAAKpE,OAAA,GAAU,CACjB;MAAA,GAAGgE,CAAA,CACL;IAAA,GACA,CAACA,CAAA,EAAMlC,CAAA,EAASD,CAAA;EAIlB,OAFCW,CAAA,CAA2C4C,MAAA,GAASf,CAAA,EAE9C7B,CACT;AAAA;AC5DA,IAAM6C,CAAA,GAAU,SAAAC,CAAC3F,CAAA,EAAeE,CAAA,EAAeD,CAAA;IAC7C,OAAA2F,CAAA,CACE5F,CAAA,EACAE,CAAA,EACAD,CAAA,EACA,KACA,UAACD,CAAA;MAAM,OAAAA,CAAC;IAAA,GACR;MAAA,OAAM4F,CAAA,CAAY1F,CAAA,EAAOF,CAAA,EAAOC,CAAA,CAAS;IAAA,EAC1C;EAAA;EAuJG4F,CAAA,GAAe,SAAAC,CAAC9F,CAAA;IAAS,OAAM,IAAAyB,IAAA,CAAAuC,GAAA,CAAI,IAAIhE,CAAA,EAAM,EAAC;EAAA;AAKpD,SAAS4F,EACP5F,CAAA,EACAE,CAAA,EACAD,CAAA,EACAK,CAAA,EACA4B,CAAA,EACAC,CAAA;EAAA,KAFA,MAAA7B,CAAA,KAAAA,CAAA,GhBvK0B,WgBwK1B,MAAA4B,CAAA,KAAAA,CAAA,GAAS2D,CAAA;EAGT,IAAM/B,CAAA,GAAW5D,CAAA,GAAMF,CAAA;EACvB,IAAiB,MAAb8D,CAAA,EAAJ;IAIA,IAAMK,CAAA,GAAYmB,IAAA,CAAKC,GAAA;MACnBlB,CAAA,GAAU;MAERC,CAAA,GAAW,SAAAyB,CAAA;QACf,IAAM7F,CAAA,GAAOuB,IAAA,CAAKE,GAAA,CAAI,IAAI2D,IAAA,CAAKC,GAAA,KAAQpB,CAAA,IAAa7D,CAAA;QACrCL,CAAA,CAASD,CAAA,GAAQkC,CAAA,CAAOhC,CAAA,IAAQ4D,CAAA,KAEjC5D,CAAA,GAAO,IACnBuE,CAAA,MAGFuB,oBAAA,CAAqB3B,CAAA,GACjBnE,CAAA,IAAQ,KAAKiC,CAAA,IACfA,CAAA,GAEJ;MAAA;IACAsC,CAAA,EAlBC;EAAA;EAoBD,SAASA,EAAA;IACPJ,CAAA,GAAU4B,qBAAA,CAAsB3B,CAAA,CAClC;EAAA;AACF;ACvMA,IAAM4B,CAAA,GAA8B;IAClCjC,CAAA,EAAG;IACH4B,CAAA,EAAG;IACHvC,CAAA,EAAG;IACHoC,CAAA,EAAG;IAEHS,GAAA,OAAK;EAAA;ECVDC,CAAA,GAAgB,SAAAC,CAAA;IACpB,IAAMrG,CAAA,GAAaE,CAAA,EAAO;IAO1B,OANAgC,CAAA,CAAU;MAER,OADAlC,CAAA,CAAWK,OAAA,IAAU,GACd;QACLL,CAAA,CAAWK,OAAA,IAAU,CACvB;MAAA,CACF;IAAA,GAAG,KACIL,CACT;EAAA;EAAAsG,CAAA;ACPA,SAASC,EAAOrG,CAAA;EAAgE,IAAAD,CAAA,GAAAC,CAAA,CAA7DsG,SAAA;IAAAlG,CAAA,QAAY,MAAHL,CAAA,GAAG,KAAEA,CAAA;IAAKiC,CAAA,GAAKU,CAAA,CAAA1C,CAAA,EAAAoG,CAAA;EACzC,OACEtG,CAAA,CAAA8C,aAAA,QAAA7B,CAAA;IAAKuF,SAAA,EAAS,wBAAwBlG;EAAA,GAAiB4B,CAAA,GACrDlC,CAAA,CAAA8C,aAAA;IAAKI,OAAA,EAAQ;IAAYF,KAAA,EAAM;IAAKC,MAAA,EAAO;IAAKwD,IAAA,EAAK;EAAA,GACnDzG,CAAA,CAAA8C,aAAA;IAAM4D,OAAA,EAAQ;IAAMvD,CAAA,EAAE;EAAA,IACtBnD,CAAA,CAAA8C,aAAA;IAAMK,CAAA,EAAE;EAAA,IAIhB;AAAA;ACbA,IAAAwD,CAAA;AAsBwB,SAAAC,EAAK1G,CAAA;EAC3B,IAAAD,CAAA,GAAGC,CAAA,CAAH2G,GAAA;IACAvG,CAAA,GAAMJ,CAAA,CAAN4G,MAAA;IACA5E,CAAA,GAAMhC,CAAA,CAAN6G,MAAA;IACA5E,CAAA,GAASjC,CAAA,CAATsG,SAAA;IACA1C,CAAA,GAAW5D,CAAA,CAAX8G,WAAA;IACA7C,CAAA,GAAcjE,CAAA,CAAd+G,cAAA;IACA5C,CAAA,GAAanE,CAAA,CAAbgH,aAAA;IACG5C,CAAA,GAAS1B,CAAA,CAAA1C,CAAA,EAAAyG,CAAA;IAENlC,CAAA,GAAa2B,CAAA;EAqBnB,OAAInG,CAAA,KAAQiC,CAAA,GAERlC,CAAA,CAAA8C,aAAA,CAAA9C,CAAA,CAAAmH,QAAA,QACEnH,CAAA,CAAA8C,aAAA,QAAA7B,CAAA;IACEuF,SAAA,EAAS,sBAAqBrE,CAAA,GAAgB,MAAAA,CAAA,GAAc;IAC5D0E,GAAA,EAAK5G,CAAA;IACLmH,MAAA,EAzBR,SAAAA,CAA2BpH,CAAA;MACzB,IAAAE,CAAA,GAAwCF,CAAA,CAAEqH,MAAA;MACtC5C,CAAA,CAAWpE,OAAA,IACbyD,CAAA,CAAY;QACVgD,MAAA,GAAQ;QACRQ,YAAA,EAJgBpH,CAAA,CAAZoH,YAAA;QAKJC,aAAA,EAL+BrH,CAAA,CAAbqH;MAAA,EAQxB;IAAA;IAiBQC,OAAA,EAfR,SAAAA,CAAA;MACM/C,CAAA,CAAWpE,OAAA,IACbyD,CAAA,CAAY;QACViD,MAAA,GAAQ;MAAA,EAGd;IAAA;IAUQU,SAAA,GAAW;IACXC,GAAA,EAAI;EAAA,GACApD,CAAA,KAEJhE,CAAA,KACC6D,CAAA,GACCnE,CAAA,CAAA8C,aAAA;IAAM0D,SAAA,EAAU;EAAA,GAAmBrC,CAAA,IAEnCnE,CAAA,CAAA8C,aAAA,CAACyD,CAAA,EAAO;IAACC,SAAA,EAAU;EAAA,OAMzBnC,CAAA,GAEArE,CAAA,CAAM8C,aAAA;IAAA0D,SAAA,EAAU;EAAA,GACY,qBAAlBnC,CAAA,GAA+BA,CAAA,CAAc;IAAEwC,GAAA,EAAA5G;EAAA,KAASoE,CAAA,IAMxE;AAAA;AChBA,IAAMsD,CAAA,GAAe;EAEnBL,YAAA,OAAc;EAEdC,aAAA,OAAe;EAEfvE,KAAA,OAAO;EAEPC,MAAA,OAAQ;EAER6D,MAAA,OAAQ;EAERC,MAAA,GAAQ;EAGR3F,CAAA,EAAG;EAEHD,CAAA,EAAG;EAEHyG,OAAA,GAAS;EAETC,WAAA,GAAa;EAEbC,MAAA,EAAQ;EAERC,KAAA,EAAO;EAGPC,EAAA,EAAI;EAEJC,EAAA,EAAI;EAGJC,KAAA,EAAO;EAEPC,KAAA,EAAO;EAEPxD,MAAA,EAAQ;EAERC,MAAA,EAAQ;EAERwD,SAAA,EAAW;EAGXC,SAAA,EAAW;EAEXC,WAAA,EAAa;EAEbvD,KAAA,GAAO;EAEPwD,OAAA,GAAS;EAETC,KAAA,OAAO;AAAA;AAGK,SAAUC,EAAQxI,CAAA;EAkBhB,IAAAK,CAAA,GAAAL,CAAA,CAjBdyI,IAAA;IAAQvG,CAAA,GAAG7B,CAAA,CAAHuG,GAAA;IAAK/C,CAAA,GAAMxD,CAAA,CAANqI,MAAA;IAAMxE,CAAA,GAAA7D,CAAA,CAAE0C,KAAA;IAAOsB,CAAA,QAAW,MAAAH,CAAA,GAAG,IAACA,CAAA;IAAAM,CAAA,GAAAnE,CAAA,CAAE2C,MAAA;IAAQE,CAAA,QAAe,MAAHsB,CAAA,GAAG,IAACA,CAAA;IAAEC,CAAA,GAASpE,CAAA,CAATsI,SAAA;IACvE/F,CAAA,GAAO5C,CAAA,CAAP4I,OAAA;IACAjG,CAAA,GAAK3C,CAAA,CAAL6I,KAAA;IACA5H,CAAA,GAAMjB,CAAA,CAAN8I,MAAA;IACA5H,CAAA,GAAalB,CAAA,CAAb+I,aAAA;IACA5H,CAAA,GAASnB,CAAA,CAATuG,SAAA;IACAjF,CAAA,GAAKtB,CAAA,CAALsD,KAAA;IACAhB,CAAA,GAActC,CAAA,CAAdgH,cAAA;IACAzE,CAAA,GAAavC,CAAA,CAAbiH,aAAA;IAEAnE,CAAA,GAAU9C,CAAA,CAAVgJ,UAAA;IACA7F,CAAA,GAASnD,CAAA,CAATiJ,SAAA;IACA7F,CAAA,GAAWpD,CAAA,CAAXkJ,WAAA;IACA7F,CAAA,GAASrD,CAAA,CAATmJ,SAAA;IACAvD,CAAA,GAAa5F,CAAA,CAAboJ,aAAA;IACA/C,CAAA,GAAQrG,CAAA,CAARqJ,QAAA;IACA/C,CAAA,GAAMtG,CAAA,CAANsJ,MAAA;IAEA5C,CAAA,GAA6B3F,CAAA,CAAY2G,CAAA;IAAlCc,CAAA,GAAK9B,CAAA;IAAE6C,CAAA,GAAW7C,CAAA,CACzB;IAAM8C,CAAA,GAAkBvJ,CAAA,CAAuB;IACzCwJ,CAAA,GAAUtD,CAAA;IAEhBuD,CAAA,GAyBIlB,CAAA,CAxBFnB,YAAA;IAAAsC,CAAA,QAAY,MAAAD,CAAA,GAAGrF,CAAA,GAAWqF,CAAA;IAAAE,EAAA,GAwBxBpB,CAAA,CAvBFlB,aAAA;IAAAuC,EAAA,QAAgB,MAAHD,EAAA,GAAG1G,CAAA,GAAY0G,EAAA;IAAAE,EAAA,GAuB1BtB,CAAA,CAtBFzF,KAAA;IAAAgH,EAAA,QAAK,MAAAD,EAAA,GAAGzF,CAAA,GAAWyF,EAAA;IAAAE,EAAA,GAsBjBxB,CAAA,CArBFxF,MAAA;IAAAiH,EAAA,QAAS,MAAHD,EAAA,GAAG9G,CAAA,GAAY8G,EAAA;IAAAE,EAAA,GAqBnB1B,CAAA,CApBF3B,MAAA;IAAAsD,EAAA,QAAM,MAAAD,EAAA,IAAIhI,CAAA,GAAGgI,EAAA;IACbE,EAAA,GAmBE5B,CAAA,CAnBF1B,MAAA;IACAuD,EAAA,GAkBE7B,CAAA,CAlBFrH,CAAA;IACAmJ,EAAA,GAiBE9B,CAAA,CAjBFtH,CAAA;IACAqJ,EAAA,GAgBE/B,CAAA,CAhBFb,OAAA;IACA6C,EAAA,GAeEhC,CAAA,CAfFF,OAAA;IACAmC,EAAA,GAcEjC,CAAA,CAdFZ,WAAA;IACA8C,EAAA,GAaElC,CAAA,CAbFX,MAAA;IACA8C,EAAA,GAYEnC,CAAA,CAZFV,KAAA;IACA8C,EAAA,GAWEpC,CAAA,CAXFT,EAAA;IACA8C,EAAA,GAUErC,CAAA,CAVFR,EAAA;IACA8C,EAAA,GASEtC,CAAA,CATFP,KAAA;IACA8C,EAAA,GAQEvC,CAAA,CARFN,KAAA;IACA8C,EAAA,GAOExC,CAAA,CAPF9D,MAAA;IACAuG,EAAA,GAMEzC,CAAA,CANF7D,MAAA;IACAuG,EAAA,GAKE1C,CAAA,CALFL,SAAA;IACAgD,EAAA,GAIE3C,CAAA,CAJFJ,SAAA;IACAgD,EAAA,GAGE5C,CAAA,CAHFH,WAAA;IACAgD,EAAA,GAEE7C,CAAA,CAFF1D,KAAA;IACAwG,EAAA,GACE9C,CAAA,CADFD,KAAA;IAGIgD,EAAA,GAAKzL,CAAA,CAAW;MACpB0L,OAAA,EAAS,SAAAA,CAACzL,CAAA;QAAoB,OAAA0L,EAAA,CAAQ9J,CAAA,CAAW5B,CAAA,EAAS;MAAA;MAC1D2L,QAAA,EAAQ,SAAAA,CAAC3L,CAAA;QACH2K,EAAA,KAAW3K,CAAA,KACbuG,CAAA,CAAO;UAAEuB,MAAA,EAAQ9H;QAAA,IACjBwJ,CAAA,CAAWvI,CAAA,CAAG;UAAA6G,MAAA,EAAQ9H;QAAA,GAAY8E,CAAA,CAAqB8E,CAAA,EAAcE,EAAA,EAAe9J,CAAA,IAExF;MAAA;IAAA;EAIF,SAAS0L,GAAQ1L,CAAA,EAAiBE,CAAA,EAAkBD,CAAA;IAC9C2K,EAAA,KAAU5K,CAAA,KACZuG,CAAA,CAAO;MAAEwB,KAAA,EAAO/H;IAAA,IAChBwJ,CAAA,CAAWvI,CAAA;MACT8G,KAAA,EAAO/H;IAAA,GACJoE,CAAA,CAAyBkG,EAAA,EAAGC,EAAA,EAAGP,EAAA,EAAOE,EAAA,EAAQU,EAAA,EAAO5K,CAAA,EAASE,CAAA,EAASD,CAAA,GACtED,CAAA,IAAW,KAAK;MAAEoB,CAAA,EAAG;MAAGD,CAAA,EAAG;IAAA,IAGrC;EAAA;EAEA,IAAMyK,EAAA,GAAa5G,CAAA,CACjB,UAAChF,CAAA,EAAqBE,CAAA,EAAqBD,CAAA;IACzC,SADyC,MAAAA,CAAA,KAAAA,CAAA,GAA6B,KACjEuK,EAAA,IAAWE,EAAA,KAAgBpE,CAAA,EAAU;MAExC,IAAAhG,CAAA,GAAsCuE,CAAA,CAAc8F,EAAA,EAAQX,EAAA,EAAOE,EAAA;QAA5DhI,CAAA,GAAY5B,CAAA;QAAE6B,CAAA,GAAa7B,CAAA;MAElC,IAA2B,MAAvBL,CAAA,IAAwD,MAA5BwJ,CAAA,CAAgBpJ,OAAA,EAAe;QAC7D,IAAMyD,CAAA,GAAWrC,IAAA,CAAKoK,GAAA,CAAI7L,CAAA,GAAc6K,EAAA,KrB9Kf;UqB+KnB1G,CAAA,GAAW1C,IAAA,CAAKoK,GAAA,CAAI3L,CAAA,GAAc4K,EAAA,KrB/Kf;QqBiLzB,IAAIhH,CAAA,IAAYK,CAAA,EAGd,YADAqF,CAAA,CAAY;UAAE7E,MAAA,EAAQ3E,CAAA;UAAa4E,MAAA,EAAQ1E;QAAA;QAI7CuJ,CAAA,CAAgBpJ,OAAA,GAAWyD,CAAA,GAAe5D,CAAA,GAAc4K,EAAA,GAAK,IAAI,IAA3B,CACvC;MAAA;MAED,IAGIzG,CAAA;QAHEC,CAAA,GAAUtE,CAAA,GAAciL,EAAA;QACxBxG,CAAA,GAAUvE,CAAA,GAAcgL,EAAA;MAG9B,IAA2B,MAAvBjL,CAAA,EAA0B;QAE5B,IAAOkD,CAAA,GAAuBc,CAAA,CAAoBK,CAAA,GAAUyG,EAAA,EAAOH,EAAA,EAAO1I,CAAA,EAAcqC,UAAA,EAA9D;UAC1BG,CAAA,GAA4BT,CAAA,CAAoBQ,CAAA,GAAUuG,EAAA,EAAOJ,EAAA,EAAOzI,CAAA,EAAeqC,WAAA;QAEvFH,CAAA,GV1NkB,UAC1BrE,CAAA,EACAE,CAAA,EACAD,CAAA,EACAK,CAAA;UAEA,OAAKJ,CAAA,IAA6C,MAAtBF,CAAA,IAA8C,QAAlBM,CAAA,GAC/C,MAEJL,CAAA,IAAqBD,CAAA,GAAoB,KAAwB,QAAlBM,CAAA,GAC3C,WADT,CAIF;QAAA,CU6MyB,CAAamJ,CAAA,CAAgBpJ,OAAA,EAAS8C,CAAA,EAF7BuB,CAAA,KAEqE6G,EAAA,QAGxE,MAAjBlH,CAAA,IACFhB,CAAA,CAAYgB,CAAA,EAAcrE,CAAA,EAAaE,CAAA,EAAa0K,EAAA,CAEvD;MAAA;MAED,IAAqB,QAAjBvG,CAAA,IAAwBqG,EAAA,EAE1B,YADAlB,CAAA,CAAY;QAAEhB,KAAA,EAAO;MAAA;MAIvB,IAAM3F,CAAA,GAAUjB,CAAA,CACdgJ,EAAA,IAAU3K,CAAA,GAAqBoL,EAAA,IAAe,MAAM,IAAKT,EAAA,EACzDhB,CAAA,GAAeI,EAAA,ErBzLE;MqB6LnBzD,CAAA,CAAO;QAAEwB,KAAA,EAAOlF;MAAA,IAChB2G,CAAA,CAAWvI,CAAA;QACTqH,WAAA,EAAarI,CAAA;QACbuI,KAAA,EAAOnE,CAAA;QACP0D,KAAA,EAAOlF;MAAA,GACJuB,CAAA,CAAyBkG,EAAA,EAAGC,EAAA,EAAGP,EAAA,EAAOE,EAAA,EAAQU,EAAA,EAAO/H,CAAA,EAAS7C,CAAA,EAAaE,CAAA,EAAaoE,CAAA,EAASG,CAAA,GAEvG;IAAA;EACH,GACA;IACES,OAAA,EAAS;EAAA;EAIb,SAAS4G,GAAU9L,CAAA;IACjB,QAAIyK,EAAA,KAAWD,EAAA,KAGXd,CAAA,CAAQrJ,OAAA,IAEVmJ,CAAA,CAAWvI,CAAA,KAAMjB,CAAA,EAAQ;MAAE+E,KAAA,EAAOlC;IAAA,KAE7B6G,CAAA,CAAQrJ,OAAA,CACjB;EAAA;EAEA,IChQ0C0L,EAAA;IAA2BC,EAAA;IAE/DC,EAAA;IAEAC,EAAA;INMNC,EAAA;IACAC,EAAA;IACAC,EAAA;IAEMC,EAAA;IKkPAC,EAAA,ILtPNJ,EAAA,GKuPE,SAAAK,CAACxM,CAAA;MAAA,OAAU8L,EAAA,CAAU;QAAE1K,CAAA,EAAGpB;MAAA,EAAQ;IAAA,GLtPpCoM,EAAA,GKuPE,SAAAK,CAACzM,CAAA;MAAU,OAAA8L,EAAA,CAAU;QAAE3K,CAAA,EAAGnB;MAAA,EAAQ;IAAA,GLtPpCqM,EAAA,GKuPE,SAAAK,CAAC1M,CAAA;MAKC,OAJI0J,CAAA,CAAQrJ,OAAA,KACVkG,CAAA,CAAO;QAAEwB,KAAA,EAAO/H;MAAA,IAChBwJ,CAAA,CAAY;QAAEzB,KAAA,EAAO/H;MAAA,MAEfwK,EAAA,IAAWd,CAAA,CAAQrJ,OAC7B;IAAA,GL3PIiM,EAAA,GAAWvM,CAAA,CAAW;MAC1BqD,CAAA,EAAG,SAAAA,CAACpD,CAAA;QAAe,OAAKmM,EAAA,CAAUnM,CAAA,CAAQ;MAAA;MAC1C+C,CAAA,EAAG,SAAAA,CAAC/C,CAAA;QAAe,OAAKoM,EAAA,CAAUpM,CAAA,CAAQ;MAAA;MAC1CyD,CAAA,EAAG,SAAAA,CAACzD,CAAA;QAAoB,OAAAqM,EAAA,CAAUrM,CAAA,CAAQ;MAAA;IAAA,IAGrC,UACLA,CAAA,EACAE,CAAA,EACAD,CAAA,EACAK,CAAA,EACA4B,CAAA,EACAC,CAAA,EACA2B,CAAA,EACAK,CAAA,EACAE,CAAA,EACAC,CAAA,EACAG,CAAA;MAEA,IAAAtB,CAAA,GAAsC0B,CAAA,CAAcP,CAAA,EAAQpC,CAAA,EAAOC,CAAA;QAA5DuC,CAAA,GAAYvB,CAAA,CAAE;QAAAN,CAAA,GAAaM,CAAA,CAElC;QAAAlC,CAAA,GAA6BgD,CAAA,CAAoBjE,CAAA,EAAGmE,CAAA,EAAWO,CAAA,EAAcH,UAAA;QAAtE3B,CAAA,GAAU3B,CAAA;QAAElB,CAAA,GAAMkB,CAAA;QACzBD,CAAA,GAA6BiD,CAAA,CAAoB/D,CAAA,EAAGiE,CAAA,EAAWtB,CAAA,EAAe2B,WAAA;QAAvEtD,CAAA,GAAUF,CAAA;QAAEG,CAAA,GAAMH,CAAA,CACzB;QAAMI,CAAA,GAAWkE,IAAA,CAAKC,GAAA,KAAQd,CAAA;MAG9B,IAAIrD,CAAA,IhBhDoB,OgBgDQ+C,CAAA,KAAcL,CAAA,IAASrC,IAAA,CAAKoK,GAAA,CAAIxH,CAAA,GAAYP,CAAA,IAAS,GAAG;QAEtF,IAAAzC,CAAA,GAA+B+C,CAAA,CAAyBpE,CAAA,EAAGE,CAAA,EAAGgC,CAAA,EAAOC,CAAA,EAAQ2B,CAAA,EAAOK,CAAA;UAAzE5C,CAAA,GAAKF,CAAA,CAARD,CAAA;UAAaQ,CAAA,GAAKP,CAAA,CAARF,CAAA;UACZW,CAAA,GAAUc,CAAA,GAAa7C,CAAA,GAASwB,CAAA,KAAUvB,CAAA,GAAIuB,CAAA,GAAQ;UACtDa,CAAA,GAAUlB,CAAA,GAAaC,CAAA,GAASS,CAAA,KAAU1B,CAAA,GAAI0B,CAAA,GAAQ;QAW5D,OATgB,SAAZE,CAAA,IACF8D,CAAA,CAAY5F,CAAA,EAAG8B,CAAA,EAASwK,EAAA,CAASlJ,CAAA,GAEnB,SAAZhB,CAAA,IACFwD,CAAA,CAAY1F,CAAA,EAAGkC,CAAA,EAASkK,EAAA,CAASvJ,CAAA,SAE/BoB,CAAA,KAAcL,CAAA,IAChB8B,CAAA,CAAY9B,CAAA,EAAOK,CAAA,EAAWmI,EAAA,CAAS7I,CAAA,EAG1C;MAAA;MAGD,IAAMlB,CAAA,IAAUvC,CAAA,GAAIC,CAAA,IAASmB,CAAA;QACvBoB,CAAA,IAAUtC,CAAA,GAAII,CAAA,IAASc,CAAA;QACvB2B,CAAA,GAAStB,IAAA,CAAKsC,IAAA,CAAKtC,IAAA,CAAAuC,GAAA,CAAAzB,CAAA,EAAU,KAACd,IAAA,CAAAuC,GAAA,CAAGxB,CAAA,EAAU;QAE7CY,CAAA,IAAQ;QACRC,CAAA,IAAQ;MAAA,CA8ChB,UAAoBrD,CAAA,EAAsBE,CAAA;QACxC,IAEID,CAAA;UAFAK,CAAA,GAAIN,CAAA;UACJkC,CAAA,GAAI;UAEJC,CAAA,GAAU;UAER2B,CAAA,GAAW,SAAAiC,CAAC5D,CAAA;YACXlC,CAAA,KACHA,CAAA,GAAWkC,CAAA;YAEb,IAAM2B,CAAA,GAAK3B,CAAA,GAAMlC,CAAA;cACXqE,CAAA,GAAY7C,IAAA,CAAKkL,IAAA,CAAK3M,CAAA;cACtByE,CAAA,IAnBW,OAmBPH,CAAA;cACJnB,CAAA,GAAI1B,IAAA,CAAKkL,IAAA,EAAMrM,CAAA,IAAEmB,IAAA,CAAAuC,GAAA,CAAG1D,CAAA,EAAK,KAlBhB;cAmBToE,CAAA,GAAKpE,CAAA,GAAIwD,CAAA,IAAOW,CAAA,GAAItB,CAAA,IAAC1B,IAAA,CAAAuC,GAAA,CAAIF,CAAA,EAAM,KAAK;YAG1C5B,CAAA,IAAKwC,CAAA,EAELzE,CAAA,GAAWkC,CAAA,EAEPmC,CAAA,IANJhE,CAAA,KAAMmE,CAAA,GAAItB,CAAA,IAAKW,CAAA,KAMM,IACnBO,CAAA,KAIEnE,CAAA,CAASgC,CAAA,IACXiC,CAAA,KAGFE,CAAA,EACF;UAAA;QAGA,SAASF,EAAA;UACPhC,CAAA,GAAU8D,qBAAA,CAAsBnC,CAAA,CAClC;QAAA;QACA,SAASO,EAAA;UACP2B,oBAAA,CAAqB7D,CAAA,CACvB;QAAA;QAPAgC,CAAA,EAQF;MAAA,CApFI,CAAWpB,CAAA,EAAQ,UAAC9C,CAAA;QAClB,IAAMK,CAAA,GAAQN,CAAA,GAAIC,CAAA,IAAWsC,CAAA,GAASQ,CAAA;UAChCb,CAAA,GAAQhC,CAAA,GAAID,CAAA,IAAWuC,CAAA,GAASO,CAAA;UAEtCZ,CAAA,GAA4B8B,CAAA,CAAoB3D,CAAA,EAAOwD,CAAA,EAAOY,CAAA,EAAcH,UAAA;UAArEJ,CAAA,GAAOhC,CAAA,CAAE;UAAAkC,CAAA,GAAQlC,CAAA,CACxB;UAAAmC,CAAA,GAA4BL,CAAA,CAAoB/B,CAAA,EAAO4B,CAAA,EAAOjB,CAAA,EAAe2B,WAAA;UAAtEC,CAAA,GAAOH,CAAA,CAAE;UAAAnB,CAAA,GAAQmB,CAAA,CAExB;QAkBA,IAlBIH,CAAA,KAAYf,CAAA,KACdA,CAAA,IAAQ,GACJR,CAAA,GACFgD,CAAA,CAAYtF,CAAA,EAAO+D,CAAA,EAAUiI,EAAA,CAASlJ,CAAA,IAEtCsC,CAAA,CAAQrB,CAAA,EAAU/D,CAAA,IAASA,CAAA,GAAQ+D,CAAA,GAAWiI,EAAA,CAASlJ,CAAA,IAIvDqB,CAAA,KAAYpB,CAAA,KACdA,CAAA,IAAQ,GACJnC,CAAA,GACF0E,CAAA,CAAY1D,CAAA,EAAOiB,CAAA,EAAUmJ,EAAA,CAASvJ,CAAA,IAEtC2C,CAAA,CAAQvC,CAAA,EAAUjB,CAAA,IAASA,CAAA,GAAQiB,CAAA,GAAWmJ,EAAA,CAASvJ,CAAA,IAIvDK,CAAA,IAASC,CAAA,EACX,QACD;QAED,IAAMpC,CAAA,GAAUmC,CAAA,IAASkJ,EAAA,CAASlJ,CAAA,CAAEiB,CAAA;UAC9BtE,CAAA,GAAUsD,CAAA,IAASiJ,EAAA,CAASvJ,CAAA,CAAEI,CAAA;QACpC,OAAOlC,CAAA,IAAWlB,CACpB;MAAA,EACF;IAAA;IKyKM6M,EAAA,IC5QoCb,EAAA,GD4QFhJ,CAAA,EC5Q6BiJ,EAAA,GD4QjB,SAAAa,CAAC7M,CAAA,EAAwBE,CAAA;MACtEqL,EAAA,IAGHG,EAAA,CAD2B,MAAVd,EAAA,GAAc,IAAInJ,IAAA,CAAKC,GAAA,CAAI,GAAGkI,CAAA,GAAeI,EAAA,GAC5ChK,CAAA,EAAgBE,CAAA,CAEtC;IAAA,GChRM+L,EAAA,GAAkB/L,CAAA,CAAO,IAEzBgM,EAAA,GAAclH,CAAA,CAClB;MACEiH,EAAA,CAAgB5L,OAAA,GAAU,GAC1B0L,EAAA,CAASnL,KAAA,YAAAE,KAAA,CAAAH,IAAA,CAAAI,SAAA,EACX;IAAA,GACA;MACEoE,IAAA,EAAM;IAAA,IAIM;MAAiB,IAAJnF,CAAA,GAAI,GAAAc,KAAA,CAAAH,IAAA,CAAAI,SAAA;MAC/BkL,EAAA,CAAgB5L,OAAA,IAAW,GAC3B6L,EAAA,CAAWtL,KAAA,MAAI,GAAAZ,CAAA,GAEXiM,EAAA,CAAgB5L,OAAA,IAAW,MAC7B6L,EAAA,CAAYzG,MAAA,IACZwG,EAAA,CAAgB5L,OAAA,GAAU,GAC1B2L,EAAA,CAASpL,KAAA,MAAI,GAAAZ,CAAA,EAEjB;IAAA;ED6PA,SAAS8M,GAAS9M,CAAA,EAAqBE,CAAA;IAGrC,IADAuJ,CAAA,CAAgBpJ,OAAA,GAAU,IACrBmK,EAAA,IAAWE,EAAA,KAAgBpE,CAAA,EAAU;MACxCkD,CAAA,CAAY;QACV5B,OAAA,GAAS;QACTC,WAAA,GAAa;QACb9C,KAAA,GAAO;QACPwD,OAAA,GAAS;QACTC,KAAA,OAAO;MAAA;MAET,IAAMvI,CAAA,GAAY2B,CAAA,CAAWgJ,EAAA,EAAOhB,CAAA,GAAeI,EAAA;MAMnD,IAJAuC,EAAA,CAAgBjC,EAAA,EAAGC,EAAA,EAAGQ,EAAA,EAAOC,EAAA,EAAOhB,EAAA,EAAOE,EAAA,EAAQU,EAAA,EAAO3K,CAAA,EAAWkL,EAAA,EAAWR,EAAA,EAAQS,EAAA,GAExF9H,CAAA,CAAUtD,CAAA,EAAaE,CAAA,GAEnB2K,EAAA,KAAO7K,CAAA,IAAe8K,EAAA,KAAO5K,CAAA,EAAa;QAC5C,IAAIsK,EAAA,EAEF,YADAoC,EAAA,CAAe5M,CAAA,EAAaE,CAAA;QAG1BwK,EAAA,IACFtH,CAAA,CAAUpD,CAAA,EAAaE,CAAA,CAE1B;MAAA;IACF;EACH;EAoDA,SAAS6M,GAAY/M,CAAA,EAAwBE,CAAA,EAAwBD,CAAA;IAAA,WAAAA,CAAA,KAAAA,CAAA,GAA6B,IAChGuJ,CAAA,CAAY;MACV5B,OAAA,GAAS;MACTI,EAAA,EAAIhI,CAAA;MACJiI,EAAA,EAAI/H,CAAA;MACJyE,MAAA,EAAQ3E,CAAA;MACR4E,MAAA,EAAQ1E,CAAA;MACRgI,KAAA,EAAOoC,EAAA;MACPnC,KAAA,EAAOoC,EAAA;MACPnC,SAAA,EAAWwC,EAAA;MACXtC,WAAA,EAAarI,CAAA;MACboI,SAAA,EAAW/C,IAAA,CAAKC,GAAA;IAAA,EAEpB;EAAA;EAWA,SAASyH,GAAgBhN,CAAA;IACvBwJ,CAAA,CAAY;MACV3B,WAAA,GAAa;MACbG,EAAA,EAAIhI,CAAA,CAAE2D,OAAA;MACNsE,EAAA,EAAIjI,CAAA,CAAE4D,OAAA;MACNsE,KAAA,EAAOoC,EAAA;MACPnC,KAAA,EAAOoC;IAAA,EAEX;EAAA;EAlFAnI,CAAA,CAAiBf,CAAA,QAAgB,IAAY,aAAa,UAACrB,CAAA;IACzDA,CAAA,CAAEiN,cAAA,IACFrB,EAAA,CAAW5L,CAAA,CAAE2D,OAAA,EAAS3D,CAAA,CAAE4D,OAAA,CAC1B;EAAA,IACAxB,CAAA,CAAiBf,CAAA,QAAgB,IAAY,WAAW,UAACrB,CAAA;IACvD8M,EAAA,CAAS9M,CAAA,CAAE2D,OAAA,EAAS3D,CAAA,CAAE4D,OAAA,CACxB;EAAA,IACAxB,CAAA,CACEf,CAAA,GAAgB,mBAAc,GAC9B,UAACrB,CAAA;IACCA,CAAA,CAAEiN,cAAA;IACF,IAAM/M,CAAA,GAAWuD,CAAA,CAAyBzD,CAAA;IAC1C4L,EAAA,CAAUhL,KAAA,SAAIV,CAAA,CAChB;EAAA,GACA;IAAEgN,OAAA,GAAS;EAAA,IAEb9K,CAAA,CACEf,CAAA,GAAgB,kBAAa,GAC7B,UAAArB,CAAA;IAAuB,IACfE,CAAA,GADSF,CAAA,CAAdmN,cAAA,CAC4B;IAC7BL,EAAA,CAAS5M,CAAA,CAAMyD,OAAA,EAASzD,CAAA,CAAM0D,OAAA,CAChC;EAAA,GACA;IAAEsJ,OAAA,GAAS;EAAA,IAEb9K,CAAA,CACE,UACA4C,CAAA,CACE;IACMoF,EAAA,KAAWI,EAAA,KACbhB,CAAA,CAAY1E,CAAA,CAAqB8E,CAAA,EAAcE,EAAA,EAAea,EAAA,IAC9D9E,CAAA,GAEJ;EAAA,GACA;IAAEX,OAAA,EAAS;EAAA,KAIfpD,CAAA,CAA0B;IACpBwE,CAAA,IACFC,CAAA,CAAMtF,CAAA;MAAG8G,KAAA,EAAA6C,EAAA;MAAO9C,MAAA,EAAA6C;IAAA,GAAWa,EAAA,EAE/B;EAAA,GAAG,CAAClF,CAAA;EAwDJ,IAAA8G,EAAA,aExZApN,CAAA,EACAC,CAAA,EACAK,CAAA,EACA6B,CAAA,EACA2B,CAAA,EACAK,CAAA,EACAG,CAAA,EACAG,CAAA,EACAtB,CAAA,EACAuB,CAAA;MAGA,IAAA7B,CAAA,GCTsB,UACtB7C,CAAA,EACAC,CAAA,EACAK,CAAA,EACA4B,CAAA,EACAC,CAAA;UAEA,IAAM2B,CAAA,GAAU5D,CAAA,EAAO;YAEvBiE,CAAA,GAAuCnD,CAAA,CAAY;cAAEqM,IAAA,GAAM;cAAMtF,KAAA,EAAOzH;YAAA;YAAY+D,CAAA,GAAAF,CAAA;YAA3EG,CAAA,GAAID,CAAA,CAAJgJ,IAAA;YAAM5I,CAAA,GAAKJ,CAAA,CAAL0D,KAAA;YAAS5E,CAAA,GAAWgB,CAAA;YAE7BO,CAAA,GAAYM,CAAA,CAAmB,UAC5BhF,CAAA;cAAmB;gBAEqB,OAD7CmC,CAAA,EAAa,IACbgB,CAAA,CAAY;kBAAEkK,IAAA,GAAM;kBAAOtF,KAAA,EAAO/H;gBAAA,IAAWsN,OAAA,CAAAC,OAAA,EAC/C;cAAA,CAAC,QAAAvN,CAAA;gBAAA,OAAAsN,OAAA,CAAAE,MAAA,CAAAxN,CAAA;cAAA;YAAA,GACD;cAAEmF,IAAA,EAAMjD;YAAA;UAeV,OAZAJ,CAAA,CAA0B;YACnBgC,CAAA,CAAQzD,OAAA,IAIb8B,CAAA,EAAa,IACbgB,CAAA,CAAY;cAAEkK,IAAA,GAAM;YAAA,IAEpB3I,CAAA,CAAUpE,CAAA,KANRwD,CAAA,CAAQzD,OAAA,IAAU,CAOtB;UAAA,GAAG,CAACC,CAAA,IAGAgE,CAAA,GACK,CAACtE,CAAA,GAAYyE,CAAA,EAAOxE,CAAA,GAAawE,CAAA,EAAOnE,CAAA,GAAYmE,CAAA,IAItD,CAACzE,CAAA,GAAYM,CAAA,EAAWL,CAAA,GAAaK,CAAA,EAAW,EACzD;QAAA,CD5B6C,CAAe6D,CAAA,EAAOG,CAAA,EAAQG,CAAA,EAAOtB,CAAA,EAAOuB,CAAA;QAAhFzD,CAAA,GAAS4B,CAAA;QAAED,CAAA,GAAUC,CAAA,CAAE;QAAA3B,CAAA,GAAS2B,CAAA,CAEvC;QAAA1B,CAAA,aNHAnB,CAAA,EACAC,CAAA,EACAK,CAAA,EACA6B,CAAA,EACA2B,CAAA;UAMA,IAAAK,CAAA,GAAuCE,CAAA,CAAS6B,CAAA;YAAzC5B,CAAA,GAAUH,CAAA;YAAEM,CAAA,GAAgBN,CAAA,CAEnC;YAAAhB,CAAA,GAAuCkB,CAAA,CAAqB;YAArDK,CAAA,GAAUvB,CAAA,CAAE;YAAAN,CAAA,GAAgBM,CAAA;YAC7BlC,CAAA,GAAcf,CAAA;YAEd0C,CAAA,GAAK7C,CAAA,CAAW;cACpB0N,EAAA,EAAI,SAAAA,CAAA;gBAAF,OAAQzN,CAAA,IAAW6C,CAAA,CAAiB,EAAE;cAAA;YAAA;UAiC1C,SAAS7B,EAAchB,CAAA;YACrB8D,CAAA,EAAa,IACbjB,CAAA,CAAiB7C,CAAA,CACnB;UAAA;UAEA,OAnCAkC,CAAA,CAAU;YAKR,IAHKjB,CAAA,CAAYZ,OAAA,KACfY,CAAA,CAAYZ,OAAA,GAAUiF,IAAA,CAAKC,GAAA,KAExBjF,CAAA,EAAL;cAKA,IA+BJ,UACEN,CAAA,EACAE,CAAA;gBAEA,IAAMD,CAAA,GAAUD,CAAA,IAAaA,CAAA,CAAUK,OAAA;gBAEvC,IAAIJ,CAAA,IAAgC,MAArBA,CAAA,CAAQyN,QAAA,EAAgB;kBAErC,IAAApN,CAAA,GAAqCL,CAAA,CAAQ0N,qBAAA;kBAE7CzN,CAAA,CAAiB;oBACf+D,CAAA,EAHS3D,CAAA,CAAHsN,GAAA;oBAIN/H,CAAA,EAJevF,CAAA,CAAJuN,IAAA;oBAKXvK,CAAA,EALsBhD,CAAA,CAAL0C,KAAA;oBAMjB0C,CAAA,EAN8BpF,CAAA,CAAN2C,MAAA;oBAOxBkD,GAAA,EANkC,UAApBlG,CAAA,CAAQ6N,OAAA,GAMNC,gBAAA,CAAiB9N,CAAA,EAAS+N,SAAA,QAAyD;kBAAA,EAEtG;gBAAA;cACH,CAnDI,CAAmB/N,CAAA,EAAWwE,CAAA,GAE1BzE,CAAA,EAEF,OAAIsF,IAAA,CAAKC,GAAA,KAAQtE,CAAA,CAAYZ,OAAA,GjBWC,OiBV5BwC,CAAA,CAAiB,IAEjBoD,qBAAA,CAAsB;gBACpBpD,CAAA,CAAiB,IACjBoD,qBAAA,CAAsB;kBAAA,OAAMjF,CAAA,CAAc,EAAE;gBAAA,EAC9C;cAAA,SACAwE,UAAA,CAAW5C,CAAA,CAAG6K,EAAA,EAAItL,CAAA,UAIpBU,CAAA,CAAiB;cAInB7B,CAAA,CAAc,EApBb;YAAA;UAqBH,GAAG,CAAChB,CAAA,EAASM,CAAA,IAON,CAACoE,CAAA,EAAYJ,CAAA,CACtB;QAAA,CMpDmC,CAAmBtE,CAAA,EAASC,CAAA,EAAWK,CAAA,EAAQ6C,CAAA,EAAOuB,CAAA;QAAhFtD,CAAA,GAAUD,CAAA;QAAEE,CAAA,GAAUF,CAAA;QAGfI,CAAA,GAAcF,CAAA,CAAdiC,CAAA;QAAM1B,CAAA,GAAQP,CAAA,CAAR8E,GAAA;QAEd/D,CAAA,GAAcmC,UAAA,GAAa;QAC3BhC,CAAA,GAAeiC,WAAA,GAAc;QAI7BhC,CAAA,GAAWpB,CAAA,GAAa,KAAKA,CAAA,GAAa;MAchD,OAAO,CAZYoB,CAAA,GAAYjB,CAAA,GATHF,CAAA,CAAjBwE,CAAA,GAS4BzD,CAAA,GAAeD,CAAA,IALtCC,CAAA,GAAe+B,CAAA,GAAQM,CAAA,GAAS,IAM7BjC,CAAA,GAAYjB,CAAA,GAVHF,CAAA,CAApB4C,CAAA,GAU+B1B,CAAA,GAAgBuB,CAAA,IALvCvB,CAAA,GAAgB+B,CAAA,GAASG,CAAA,GAAS,IAgBlBxD,CAAA,EALVuB,CAAA,IAAYZ,CAAA,GAAMX,CAAA,IAhBZI,CAAA,CAAXqE,CAAA,GAgBwCnE,CAAA,IAAKqB,CAAA,EAE1B,MAAfxB,CAAA,GAAmBF,CAAA,GAAYsB,CAAA,GALnCjB,CAAA,IAAK4C,CAAA,GAAQM,CAAA,KAAU,MAKkCvD,CAAA,EAC1DsB,CAAA,GAAYZ,CAAA,GAAM,IAAI,IAAK,GAEsCR,CAAA,EAAYQ,CAAA,CAC/F;IAAA,CFkXI,CAAqBiB,CAAA,EAAS6B,CAAA,EAAW0F,EAAA,EAAQE,EAAA,EAAGC,EAAA,EAAGP,EAAA,EAAOE,EAAA,EAAQU,EAAA,EAAOhI,CAAA,EAAO,UAAC5C,CAAA;MACnF,OAAAwJ,CAAA,CAAY;QAAEzE,KAAA,EAAO/E;MAAA,EAAU;IAAA;IAFyBiO,EAAA,GAAYb,EAAA;IAAWc,EAAA,GAAUd,EAAA;IAMvFe,EAAA,GAA6B,eAAAvL,CAAA,GAAW,QAAA1B,CAAA;IAExCkN,EAAA,GAAQ;MACZ5H,SAAA,EAAApF,CAAA;MACAiN,WAAA,EAAahN,CAAA,QAAgB,IAlB/B,UAAyBrB,CAAA;QACvBA,CAAA,CAAEsO,eAAA,IACe,MAAbtO,CAAA,CAAEuO,MAAA,IACJxB,EAAA,CAAY/M,CAAA,CAAE2D,OAAA,EAAS3D,CAAA,CAAE4D,OAAA,EAAS,EAEtC;MAAA;MAcE4K,YAAA,EAAcnN,CAAA,GAxBhB,UAA0BrB,CAAA;QACxBA,CAAA,CAAEsO,eAAA,IACFvB,EAAA,CAAWnM,KAAA,SAAI6C,CAAA,CAAyBzD,CAAA,EAC1C;MAAA,SAqBmD;MACjDyO,OAAA,EA5CF,SAAAA,CAAqBzO,CAAA;QACnB,KAAKuL,EAAA,EAAO;UAEV,IAAMrL,CAAA,GAAU0B,CAAA,CAAWgJ,EAAA,GAAQ5K,CAAA,CAAE0O,MAAA,GAAS,MAAM,GAAG9E,CAAA,GAAeI,EAAA;UACtER,CAAA,CAAY;YAAEjB,OAAA,GAAS;UAAA,IACvBmD,EAAA,CAAQxL,CAAA,EAASF,CAAA,CAAE2D,OAAA,EAAS3D,CAAA,CAAE4D,OAAA,CAC/B;QAAA;MACH;MAsCEL,KAAA,EAAO;QACLP,KAAA,EAduCoK,EAAA;QAevCnK,MAAA,EAfsDmK,EAAA,MAe1B;QAC5B1G,OAAA,EAhB6E0G,EAAA;QAiB7EY,SAAA,EAA0B,MAAfE,EAAA,QAAmB,IAjBgEd,EAAA,CAKlG;QAaIuB,SAAA,EAAWhE,EAAA,GAAmB,YAAAA,EAAA,GAAe;QAC7CiE,UAAA,EAEEV,EAAA,GAAa,IACNC,EAAA,GAAa,eAAavL,CAAA,GAAK,sBAjBfsL,EAAA,GAAa,IAAItL,CAAA,GAAQ,IAAIsL,EAAA,GAAa,IAAItL,CAAA,GAAQ,KAiBA,QAAM1B,CAAA,QAC/E;MAAA;IAAA;EAIV,OACElB,CAAA,CAAA8C,aAAA;IACE0D,SAAA,EAAS,0BAAyBrF,CAAA,GAAa,MAAOA,CAAA,GAAkB;IACxEoC,KAAA,EAAOhC,CAAA;IACP8M,WAAA,GAAchN,CAAA,IAAiBiF,CAAA,GAAW0G,EAAA,QAAkB;IAC5DwB,YAAA,EAAcnN,CAAA,IAAiBiF,CAAA,GAAW,UAACtG,CAAA;MAAM,OAAAgN,EAAA,CAAgBhN,CAAA,CAAE0D,OAAA,CAAQ,GAAG;IAAA,SAAG;EAAA,GAEjF1D,CAAA,CAAA8C,aAAA;IACE0D,SAAA,EAAU;IACVjD,KAAA,EAAO;MACLoL,SAAA,EAAS,YAAYV,EAAA,GAAuB,aAAAA,EAAA,GAAiB,OArCpDb,EAAA,CAAE,KAqCiE,OArCvDA,EAAA,CAAE,KAqCkE;MACzFwB,UAAA,EAAYpE,EAAA,IAAWc,EAAA,QAAQ,IAAY6C,EAAA;MAC3CU,UAAA,EAAYvI,CAAA,GAAW,mBAAc;IAAA;EAAA,GAGtCnE,CAAA,GACCnC,CAAA,CAAC8C,aAAA,CAAA8D,CAAA,EAAK3F,CAAA;IACJ4F,GAAA,EAAK1E,CAAA;IACL2E,MAAA,EAAQsD,EAAA;IACRrD,MAAA,EAAQsD;EAAA,GACJ+D,EAAA,EACJ;IAAApH,WAAA,EAtGV,SAAAA,CAAyBhH,CAAA;MACvBwJ,CAAA,CAAWvI,CAAA,CACN,IAAAjB,CAAA,EACCA,CAAA,CAAO8G,MAAA,IAAUhC,CAAA,CAAqB9E,CAAA,CAAOsH,YAAA,IAAgB,GAAGtH,CAAA,CAAOuH,aAAA,IAAiB,GAAGoD,EAAA,GAEnG;IAAA;IAkGU1D,cAAA,EAAgB1E,CAAA;IAChB2E,aAAA,EAAe1E;EAAA,MAGjBsB,CAAA,IAAUA,CAAA,CAAO;IAAEgL,KAAA,EAAAV,EAAA;IAAOrG,KAAA,EAAOkG,EAAA;IAAcnG,MAAA,EAAA6C;EAAA,IAKzD;AAAA;AItZA,IAAMnB,CAAA,GAAiC;EACrCpI,CAAA,EAAG;EACHwG,OAAA,GAAS;EACT7C,KAAA,GAAO;EACPJ,MAAA,OAAQ;EACRC,MAAA,OAAQ;EACRmK,EAAA,OAAI;EACJC,MAAA,OAAQ;EACRC,OAAA,GAAS;EACTC,OAAA,GAAS;EACTnH,KAAA,EAAO;EACPD,MAAA,EAAQ;AAAA;AAGc,SAAA2B,EAAYnJ,CAAA;EAClC,IAAA4B,CAAA,GAwBI5B,CAAA,CAvBF6O,IAAA;IAAAhN,CAAA,QAAI,MAAAD,CAAA,GAAG,IAACA,CAAA;IACDiC,CAAA,GAsBL7D,CAAA,CAtBFwI,KAAA;IACQxE,CAAA,GAqBNhE,CAAA,CArBFyI,MAAA;IACAtE,CAAA,GAoBEnE,CAAA,CApBF8O,aAAA;IAAajM,CAAA,GAoBX7C,CAAA,CAnBF+O,YAAA;IAAA3K,CAAA,QAAe,MAAHvB,CAAA,IAAOA,CAAA;IAAAN,CAAA,GAmBjBvC,CAAA,CAlBFgP,WAAA;IAAArO,CAAA,QAAc,MAAH4B,CAAA,GzBrDe,IyBqDEA,CAAA;IAAAD,CAAA,GAkB1BtC,CAAA,CAjBFiP,YAAA;IAAArO,CAAA,QAAe,MAAH0B,CAAA,IAAOA,CAAA;IAAAhB,CAAA,GAiBjBtB,CAAA,CAhBFkP,aAAA;IAAAjN,CAAA,QAAa,MAAAX,CAAA,IAAOA,CAAA;IACpB6B,CAAA,GAeEnD,CAAA,CAfFmP,aAAA;IACAxL,CAAA,GAcE3D,CAAA,CAdFoP,aAAA;IACAtL,CAAA,GAaE9D,CAAA,CAbFkG,SAAA;IACA3B,CAAA,GAYEvE,CAAA,CAZFqP,aAAA;IACA7K,CAAA,GAWExE,CAAA,CAXFsP,cAAA;IACA5K,CAAA,GAUE1E,CAAA,CAVFuP,kBAAA;IACAnK,CAAA,GASEpF,CAAA,CATF2G,cAAA;IACApB,CAAA,GAQEvF,CAAA,CARF4G,aAAA;IACAtB,CAAA,GAOEtF,CAAA,CAPFwP,MAAA;IAAM5J,CAAA,GAOJ5F,CAAA,CANFyP,KAAA;IAAO3J,CAAA,QAAe,MAAAF,CAAA,GAAG,IAACA,CAAA;IACXI,CAAA,GAKbhG,CAAA,CALF0P,aAAA;IACAzJ,CAAA,GAIEjG,CAAA,CAJFuI,OAAA;IACAlC,CAAA,GAGErG,CAAA,CAHF2P,OAAA;IACArJ,CAAA,GAEEtG,CAAA,CAFF4P,UAAA;IACAvI,CAAA,GACErH,CAAA,CADF6P,eAAA;IAGF1G,CAAA,GAA6BzI,CAAA,CAAYwI,CAAA;IAAlCE,CAAA,GAAKD,CAAA;IAAEE,CAAA,GAAWF,CAAA;IACzBG,CAAA,GAAuCvF,CAAA,CAAS;IAAzCwF,EAAA,GAAUD,CAAA,CAAE;IAAAE,EAAA,GAAgBF,CAAA,CAEnC;IACEG,EAAA,GAgBEL,CAAA,CAhBFtI,CAAA;IACA4I,EAAA,GAeEN,CAAA,CAfF9B,OAAA;IACAqC,EAAA,GAcEP,CAAA,CAdF3E,KAAA;IAEAmF,EAAA,GAYER,CAAA,CAZF/E,MAAA;IACAwF,EAAA,GAWET,CAAA,CAXF9E,MAAA;IAAMwF,EAAA,GAWJV,CAAA,CATFqF,EAAA;IAAA1E,EAAA,QAAE,MAAAD,EAAA,GAAGnJ,CAAA,GAAWmJ,EAAA;IAChBE,EAAA,GAQEZ,CAAA,CARFsF,MAAA;IACAzE,EAAA,GAOEb,CAAA,CAPFuF,OAAA;IACAzE,EAAA,GAMEd,CAAA,CANFwF,OAAA;IAEAzE,EAAA,GAIEf,CAAA,CAJF3B,KAAA;IACA2C,EAAA,GAGEhB,CAAA,CAHF5B,MAAA;IACA6C,EAAA,GAEEjB,CAAA,CAFF+B,OAAA;IACAb,EAAA,GACElB,CAAA,CADFiC,QAAA;IAIId,EAAA,GAAevK,CAAA,CAAM8P,cAAA,CAAe;IACpCtF,EAAA,GAAQD,EAAA,GAAezE,CAAA,GAAkByD,EAAA;IACzCkB,EAAA,GAAgBF,EAAA,GAAevE,CAAA,GAAwBwD,EAAA;IAEvDkB,EAAA,GAAkB9K,CAAA,CAAO4K,EAAA;IAGzBG,EAAA,GAAcrF,CAAA,CAAO/B,MAAA;IACrBqH,EAAA,GAAqCtF,CAAA,CAAOkF,EAAA;IAI5CK,EAAA,GAA6B,oBAAThJ,CAAA,GAAqBA,CAAA,GAAO8I,EAAA,GAAc9I,CAAA;IAGpEiJ,EAAA,aCvIApL,CAAA,EACAM,CAAA;MAEA,IAAS4B,CAAA,GAAgBjC,CAAA,CAAW,UAACD,CAAA;UAAM,QAACA,CAAC;QAAA,IAAE,GAA1B;QAEfmC,CAAA,GAAkBjC,CAAA,CAA4B;QAGpDiE,CAAA,GCXY,UAA+BlE,CAAA;UAE3C,IAAMK,CAAA,GAAYJ,CAAA,CAAOD,CAAA;UAEzB,SAASiC,EAAOlC,CAAA;YACdM,CAAA,CAAUD,OAAA,GAAUL,CACtB;UAAA;UAOA,OALA8D,CAAA,CAAQ;YAAA,CDG4D,UAAC5D,CAAA;cAE/DF,CAAA,IACFE,CAAA,CAAOF,CAAA,GACPmC,CAAA,CAAgB9B,OAAA,GAAU,KAE1B8B,CAAA,CAAgB9B,OAAA,GAAU,CAE9B;YAAA,CCTE,CAAQ6B,CAAA,CACV;UAAA,GAAG,CAACjC,CAAA,IAEG,CAACK,CAAA,CAAUD,OAAA,EAAS6B,CAAA,CAC7B;QAAA,CDH2C,CAAkBlC,CAAA;QAAvCqE,CAAA,GAAiBF,CAAA;MAyBrC,OAAO,CAzBWA,CAAA,KAiChBhC,CAAA,CAAgB9B,OAAA,EAvBlB;QAEE6B,CAAA,IAEgC,MAA5BC,CAAA,CAAgB9B,OAAA,KAClBgE,CAAA,EAAkB,IAEd/D,CAAA,IACFA,CAAA,KAIJ6B,CAAA,CAAgB9B,OAAA,GAAU,CAC5B;MAAA,EAgBF;IAAA,CDwFyD,CAAoBkG,CAAA,EAASK,CAAA;IAA7EyE,EAAA,GAAWD,EAAA;IAAEE,EAAA,GAAeF,EAAA,CAAE;IAAAG,EAAA,GAAcH,EAAA,CAEnD;EAAAtJ,CAAA,CAA0B;IAExB,IAAIuJ,EAAA,EAMF,OALA1B,CAAA,CAAY;MACV5E,KAAA,GAAO;MACP3D,CAAA,EAAG0J,EAAA,KAAUvG,UAAA,GAAanD,CAAA;IAAA,UAE5B4J,EAAA,CAAgB3K,OAAA,GAAUyK,EAAA;IAI5BnB,CAAA,CAAYH,CAAA,CACd;EAAA,GAAG,CAAC6B,EAAA;EAEJ,IAAAG,EAAA,GAA+BzL,CAAA,CAAW;MACxCsQ,KAAA,WAAAA,CAAMrQ,CAAA;QACA4K,EAAA,IACFA,EAAA,CAAS,IAEXjB,CAAA,CAAY;UACVsF,OAAA,GAAS;UAETD,MAAA,EAAQ3E;QAAA,IAEV1D,CAAA,CAAQ3G,CAAA,CACV;MAAA;MACAsQ,WAAA,WAAAA,CAAYtQ,CAAA,EAAmBE,CAAA;QAAA,WAAAA,CAAA,KAAAA,CAAA,IAAmB;QAEhD,IAAMD,CAAA,GAAekL,EAAA,GAAaH,EAAA,CAAgB3K,OAAA,IAAWL,CAAA,GAAY8K,EAAA,IAAS9K,CAAA;UAC5EM,CAAA,GAAM2K,EAAA,GAAc;UAGpB/I,CAAA,GAAaX,CAAA,CAAYtB,CAAA,EAAc,GAAGK,CAAA;UAC1C6B,CAAA,GAAmBgJ,EAAA,GAAalL,CAAA,GAAeiC,CAAA;UAE/C4B,CAAA,GAAkBS,UAAA,GAAanD,CAAA;QAErCuI,CAAA,CAAY;UACV/B,OAAA,GAAS;UACTjD,MAAA,OAAQ;UACRC,MAAA,OAAQ;UACRxD,CAAA,GAAI0C,CAAA,GAAkB3B,CAAA;UACtB4C,KAAA,EAAO7E;QAAA,IAGT8K,EAAA,CAAgB3K,OAAA,GAAU8B,CAAA,EAGtB4I,EAAA,IACFA,EAAA,CAAcI,EAAA,GAFMnL,CAAA,GAAY,IAAIM,CAAA,GAAMN,CAAA,GAAYM,CAAA,GAAM,IAAIN,CAAA,GAErBkC,CAAA,CAE/C;MAAA;IAAA;IArCMwJ,EAAA,GAAKF,EAAA,CAAL6E,KAAA;IAAOzE,EAAA,GAAWJ,EAAA,CAAX8E,WAAA;EAyDf,SAASxE,GAAe9L,CAAA;IACtB,OAAOA,CAAA,GAAY0L,EAAA,KAAU/B,CAAA,CAAY;MAAEsF,OAAA,GAAU1E;IAAA,EACvD;EAAA;EAEA,SAASwB,GAAA;IACPpC,CAAA,CAAY;MACVvI,CAAA,IAAKmD,UAAA,GAAanD,CAAA,IAAoB0J,EAAA;MACtCnG,MAAA,OAAQ;MACRC,MAAA,OAAQ;MACRG,KAAA,GAAO;IAAA,IAETiG,EAAA,CAAgB3K,OAAA,GAAUyK,EAC5B;EAAA;EAoDA,SAASkB,GAAgBhM,CAAA,EAA0BE,CAAA,EAAiBD,CAAA,EAAiBK,CAAA;IAC7D,QAAlBN,CAAA,GA9BN,UAAmCA,CAAA;MACjC,SAAe,MAAXkK,EAAA,EAAJ;QASA,IAAMhK,CAAA,GAAsBF,CAAA,GAAUkK,EAAA;UAClCjK,CAAA,GAAgBC,CAAA;QAAA,CAIjBiL,EAAA,KACW,MAAVL,EAAA,IAAe5K,CAAA,GAAsB,KAAO4K,EAAA,KAAUG,EAAA,GAAc,KAAK/K,CAAA,GAAsB,OAEjGD,CAAA,GAAgBC,CAAA,GAAsB,IAGxCyJ,CAAA,CAAY;UACV/B,OAAA,GAAS;UACTjD,MAAA,EAAAuF,EAAA;UACA9I,CAAA,IAAKmD,UAAA,GAAanD,CAAA,IAAoB4J,EAAA,CAAgB3K,OAAA,GAAUJ,CAAA;UAChE8E,KAAA,GAAO;QAAA,EAhBR;MAAA,OAPC4E,CAAA,CAAY;QACV/B,OAAA,GAAS;QACTjD,MAAA,EAAQ3E,CAAA;QACRoB,CAAA,EAAA2I,EAAA;QACAhF,KAAA,GAAO;MAAA,EAqBb;IAAA,CAII,CAA0B7E,CAAA,IACC,QAAlBF,CAAA,IArDb,UAAiCA,CAAA,EAAiBE,CAAA;MAChD,SAAe,MAAXiK,EAAA,EAAJ;QASA,IAAMlK,CAAA,GACY,SAAhBgB,CAAA,GAAuB,OAAOM,CAAA,CAAYN,CAAA,EAAa,KAAMA,CAAA,GAAcQ,IAAA,CAAKoK,GAAA,CAAI7L,CAAA,GAAUmK,EAAA,IAAU,MAAM;QAEhHR,CAAA,CAAY;UACV/B,OAAA,GAAS;UACThD,MAAA,EAAAuF,EAAA;UACA4E,EAAA,EAAkB,MAAd7O,CAAA,GAAkBD,CAAA,GAAUgB,CAAA;UAChCiO,OAAA,EAAuB,MAAdhP;QAAA,EARV;MAAA,OAPCyJ,CAAA,CAAY;QACV/B,OAAA,GAAS;QACThD,MAAA,EAAQ5E,CAAA;QACR+O,EAAA,EAAA1E,EAAA;QACA6E,OAAA,GAAS;MAAA,EAaf;IAAA,CAmCI,CAAwBjP,CAAA,EAASK,CAAA,CAErC;EAAA;EAEA,SAAS2L,GAAcjM,CAAA,EAAiBE,CAAA;IACtC,IAAMD,CAAA,GAAgBD,CAAA,IAAiB,QAANkK,EAAA,GAAAA,EAAA,GAAUlK,CAAA;MACrCM,CAAA,GAAgBJ,CAAA,IAAW,QAAAiK,EAAA,GAAAA,EAAA,GAAUjK,CAAA;MACvCgC,CAAA,IAAY;IAEhB,IAAIjC,CAAA,IzBpRqB,IyBqRvB2L,EAAA,CAAYd,EAAA,GAAQ,QAItB,IAAI7K,CAAA,GzBzRqB,IyB0RvB2L,EAAA,CAAYd,EAAA,GAAQ,QADtB;MAIA,IAEM3I,CAAA,KAFkBoC,UAAA,GAAanD,CAAA,IAEQ4J,EAAA,CAAgB3K,OAAA;MAEzDoB,IAAA,CAAKoK,GAAA,CAAIvL,CAAA,IAAiB,OAAOkK,EAAA,IAAWtJ,CAAA,KAC9CgB,CAAA,IAAY,GACZwJ,EAAA,KAEF/B,CAAA,CAAY;QACV/B,OAAA,GAAS;QACTxG,CAAA,EAAGe,CAAA;QACHwC,MAAA,OAAQ;QACRC,MAAA,OAAQ;QACRmK,EAAA,EAAI9N,CAAA;QACJgO,OAAA,IAAS/M,CAAA,IAAmBqI;MAAA,EAf7B;IAAA;EAiBH;EAvHAnI,CAAA,CAAiB,WAAW,UAACpC,CAAA;IAC3B,IAAIuG,CAAA,EACF,QAAQvG,CAAA,CAAIuQ,GAAA;MACV,KAAK;QACH3E,EAAA,CAAYd,EAAA,GAAQ,IAAG;QACvB;MACF,KAAK;QACHc,EAAA,CAAYd,EAAA,GAAQ,IAAG;QACvB;MACF,KAAK;QACHY,EAAA;IAAA;EAKR;EA0GA,IAAMQ,EAAA,aG3TkClM,CAAA,EAAoBE,CAAA,EAAeD,CAAA;IAC3E,OAAO6D,CAAA,CAAQ;MACb,IAAMxD,CAAA,GAAcN,CAAA,CAAO6D,MAAA;MAC3B,OAAI5D,CAAA,GACgBD,CAAA,CAAOa,MAAA,CAAOb,CAAA,EAAQa,MAAA,CAAOb,CAAA,EAC9Bc,KAAA,CAAMR,CAAA,GAAcJ,CAAA,GAAQ,GAAGI,CAAA,GAAcJ,CAAA,GAAQ,KAEjEF,CAAA,CAAOc,KAAA,CAAMW,IAAA,CAAKC,GAAA,CAAIxB,CAAA,GAAQ,GAAG,IAAIuB,IAAA,CAAKE,GAAA,CAAIzB,CAAA,GAAQ,GAAGI,CAAA,GAAc,GAChF;IAAA,GAAG,CAACN,CAAA,EAAQE,CAAA,EAAOD,CAAA,EACrB;EAAA,CHkTyB,CAAkB2F,CAAA,EAAQkF,EAAA,EAAOK,EAAA;EAExD,KAAKE,EAAA,EACH,OACD;EAED,IAAMc,EAAA,GAAwB5B,EAAA,KAAYe,EAAA;IAEpCc,EAAA,GAAiB7F,CAAA,GAAU8D,EAAA,GAAKC,EAAA;IAEhC+B,EAAA,GAAgD1B,EAAA,IACpDC,EAAA,IAAY;MACVkF,MAAA,EAAAlK,CAAA;MACAmK,KAAA,EAAAjF,EAAA;MACAjC,OAAA,EAAAtC,CAAA;MACA0J,OAAA,EAASvE,EAAA;MACTsE,aAAA,EAAepE,EAAA;MACf4E,cAAA,EAAgBrE,EAAA;MAChB8C,OAAA,EAAS/D,EAAA,IAAgBA,EAAA,CAAa+D,OAAA;MACtClH,KAAA,EAAA0C,EAAA;MACA3C,MAAA,EAAA4C,EAAA;MACAe,OAAA,EAAAd,EAAA;MACAgB,QAAA,EAAAf;IAAA;IAGE0B,EAAA,GAAenI,CAAA,GAAUA,CAAA,CAAQmH,EAAA,IzBlVb;IyBmVpBiB,EAAA,GAAgBjI,CAAA,GAAWA,CAAA,CAASgH,EAAA,IAAmBnK,CAAA;IACvDyL,EAAA,GAAazI,CAAA,GAAUA,CAAA,CAAQ,KAAK;IACpC2I,EAAA,GAAcxI,CAAA,GAAWA,CAAA,CAAS,KAAKnD,CAAA;EAE7C,OACEnB,CAAA,CAAA8C,aAAA,CAACN,CAAA,EAAW;IACVgE,SAAA,EAA8B,sBAAC2F,EAAA,GAAqD,KAA7B,+BACpD5F,CAAA,GAA2C,KAAjC,mCACVnC,CAAA,GAAS,MAAOA,CAAA,GAAc;IACjCqM,IAAA,EAAK;IACLC,OAAA,EAAS,SAAAA,CAAC1Q,CAAA;MAAM,OAAAA,CAAA,CAAEsO,eAAA,EAAiB;IAAA;IACnC7L,SAAA,EAAWkF;EAAA,GAEVpB,CAAA,IAAWvG,CAAA,CAAC8C,aAAA,CAAAQ,CAAA,EAAgB,OAC7BtD,CAAA,CAAA8C,aAAA;IACE0D,SAAA,EAAS,gCAA+B3B,CAAA,GAAa,MAAOA,CAAA,GAAkB,OACxD,MAApByG,EAAA,GACI,8BACoB,MAApBA,EAAA,GACE,+BACA;IAER/H,KAAA,EAAO;MACLoN,UAAA,EAAYvE,EAAA,GAAkC,mBAAAA,EAAA,GAAoB;MAClEwE,wBAAA,EAA0BrE,EAAA;MAC1BsE,kBAAA,GAAuB7G,EAAA,GAAU,IAAIsC,EAAA,IAAgB;MACrDwE,iBAAA,EAAsBxE,EAAA,GAAY;IAAA;IAEpCyE,cAAA,EAAgBxF;EAAA,IAEjBhJ,CAAA,IACCvC,CAAA,CAAK8C,aAAA;IAAA0D,SAAA,EAAU;EAAA,GACbxG,CAAA,CAAK8C,aAAA;IAAA0D,SAAA,EAAU;EAAA,GACZsE,EAAA,GAAQ,UAAMG,EAAA,GAEjBjL,CAAA,CAAK8C,aAAA;IAAA0D,SAAA,EAAU;EAAA,GACZvC,CAAA,IAAiBoI,EAAA,IAAiBpI,CAAA,CAAcoI,EAAA,GACjDrM,CAAA,CAAA8C,aAAA,CAACC,CAAA,EAAS;IAACyD,SAAA,EAAU;IAAgCkK,OAAA,EAAShF;EAAA,MAInEQ,EAAA,CAAe8E,GAAA,CAAI,UAAC9Q,CAAA,EAAgBD,CAAA;IAEnC,IAAMK,CAAA,GACH6K,EAAA,IAAwB,MAAVL,EAAA,GAAqCE,EAAA,CAAgB3K,OAAA,GAAU,IAAIJ,CAAA,GAArD6K,EAAA,GAAQ7K,CAAA;IAEvC,OACED,CAAA,CAAC8C,aAAA,CAAA2F,CAAA,EACC;MAAA8H,GAAA,EAAKpF,EAAA,GAAgBjL,CAAA,CAAKqQ,GAAA,GAAG,MAAIrQ,CAAA,CAAK2G,GAAA,GAAG,MAAIvG,CAAA,GAAcJ,CAAA,CAAKqQ,GAAA;MAChE7H,IAAA,EAAMxI,CAAA;MACN4I,KAAA,EAAOwD,EAAA;MACPvD,MAAA,EAAQwD,EAAA;MACR1D,OAAA,EAAStC,CAAA;MACT4C,WAAA,EAAa6C,EAAA;MACb5C,SAAA,EAAW6C,EAAA;MACXhD,UAAA,EAAY,SAAAA,CAAA;QAAF,OAAQ6C,EAAA,CAAerH,CAAA,CAAc;MAAA;MAC/CyE,SAAA,EAAW,SAAAA,CAAA;QAAF,OAAQ4C,EAAA,CAAepH,CAAA,CAAa;MAAA;MAC7CsE,aAAA,EAAehE,CAAA;MACfwB,SAAA,EAAW1B,CAAA;MACXvB,KAAA,EAAO;QACLsK,IAAA,GAAUtJ,UAAA,GAAanD,CAAA,IAAoBd,CAAA,GAAa;QACxDqO,SAAA,EAAS,iBAAiB5E,EAAA,GAAC;QAC3B6E,UAAA,EAAY5E,EAAA,IAAWC,EAAA,QAAQ,IAAyB,eAAA2C,EAAA,GAAgB,QAAAE;MAAA;MAE1E7F,cAAA,EAAgBvB,CAAA;MAChBwB,aAAA,EAAerB,CAAA;MACfwD,aAAA,EAAe0C,EAAA;MACfzC,QAAA,EAAU0B,EAAA,CAAgB3K,OAAA,KAAYC,CAAA;MACtCiJ,MAAA,EAAQI;IAAA,EAGd;EAAA,KACEtI,CAAA,IAAiBkB,CAAA,IACjBvC,CAAA,CAAA8C,aAAA,CAAA9C,CAAA,CAAAmH,QAAA,SACIgE,EAAA,IAAwB,MAAVL,EAAA,KACd9K,CAAA,CAAK8C,aAAA;IAAA0D,SAAA,EAAU;IAA8BkK,OAAA,EAAS,SAAAA,CAAA;MAAM,OAAA9E,EAAA,CAAYd,EAAA,GAAQ,IAAG,EAAK;IAAA;EAAA,GACtF9K,CAAA,CAAC8C,aAAA,CAAAM,CAAA,EAAY,SAGf+H,EAAA,IAAcL,EAAA,GAAQ,IAAIG,EAAA,KAC1BjL,CAAA,CAAA8C,aAAA;IAAK0D,SAAA,EAAU;IAA+BkK,OAAA,EAAS,SAAAA,CAAA;MAAF,OAAQ9E,EAAA,CAAYd,EAAA,GAAQ,IAAG,EAAK;IAAA;EAAA,GACvF9K,CAAA,CAAA8C,aAAA,CAACO,CAAA,EAAU,SAKlBI,CAAA,IAAiB4I,EAAA,IAChBrM,CAAA,CAAA8C,aAAA;IAAK0D,SAAA,EAAU;EAAA,GAA6B/C,CAAA,CAAc4I,EAAA,GAIlE;AAAA;AItbA,IAAA3C,CAAA;EAmBMC,CAAA,GAAmC;IACvCmG,MAAA,EAAQ;IACRjH,OAAA,GAAS;IACTkH,KAAA,EAAO;EAAA;AAGe,SAAAnG,EAAa3J,CAAA;EAAG,IAAAK,CAAA,GAAQL,CAAA,CAARgR,QAAA;IAAU/O,CAAA,GAAajC,CAAA,CAAb+P,aAAA;IAAe7N,CAAA,GAAelC,CAAA,CAAfiR,eAAA;IAAoB/M,CAAA,GAASvB,CAAA,CAAA3C,CAAA,EAAAyJ,CAAA;IAC5FrF,CAAA,GAA6BrD,CAAA,CAAY2I,CAAA;IAAlCrF,CAAA,GAAKD,CAAA;IAAEI,CAAA,GAAWJ,CAAA;IACnBlB,CAAA,GAAcjD,CAAA,CAAO;IACnBwE,CAAA,GAA2BJ,CAAA,CAA3BwL,MAAA;IAAQjN,CAAA,GAAmByB,CAAA,CAAnBuE,OAAA;IAAS1H,CAAA,GAAUmD,CAAA,CAAVyL,KAAA;IAEnB3O,CAAA,GAAUrB,CAAA,CAAW;MACzBoR,MAAA,EAAM,SAAAA,CAAA;QACJ,OAAQhO,CAAA,CAAY9C,OAAA,IAAW,CACjC;MAAA;MACA+Q,MAAA,EAAM,SAAAA,CAACpR,CAAA;QACL,IAAME,CAAA,GAAewE,CAAA,CAAO2M,SAAA,CAAU,UAACnR,CAAA;UAAM,OAAAA,CAAA,CAAEqQ,GAAA,KAAQvQ,CAAA,CAAUuQ,GAAG;QAAA;QACpE,IAAIrQ,CAAA,IAAgB,GAAG;UACrB,IAAMD,CAAA,GAAayE,CAAA,CAAO5D,KAAA;UAK1B,OAJAb,CAAA,CAAWqR,MAAA,CAAOpR,CAAA,EAAc,GAAGF,CAAA,QACnCyE,CAAA,CAAY;YACVqL,MAAA,EAAQ7P;UAAA,EAGX;QAAA;QACDwE,CAAA,CAAY,UAACvE,CAAA;UAAU;YACrB4P,MAAA,EAAQ5P,CAAA,CAAK4P,MAAA,CAAOjP,MAAA,CAAOb,CAAA;UAAA,CAC5B;QAAA,EACH;MAAA;MACAuR,MAAA,WAAAA,CAAOvR,CAAA;QACLyE,CAAA,CAAY,UAACvE,CAAA;UACX,IAAMD,CAAA,GAAaC,CAAA,CAAK4P,MAAA,CAAO0B,MAAA,CAAO,UAACtR,CAAA;YAAS,OAAAA,CAAA,CAAKqQ,GAAA,KAAQvQ,CAAG;UAAA;UAEhE,OAAO;YACL8P,MAAA,EAAQ7P,CAAA;YACR8P,KAAA,EAAOtO,IAAA,CAAKE,GAAA,CAHO1B,CAAA,CAAW4D,MAAA,GAAS,GAGT1C,CAAA;UAAA,CAElC;QAAA,EACF;MAAA;MACAsQ,IAAA,EAAI,SAAAA,CAACzR,CAAA;QACH,IAAME,CAAA,GAAewE,CAAA,CAAO2M,SAAA,CAAU,UAACnR,CAAA;UAAS,OAAAA,CAAA,CAAKqQ,GAAA,KAAQvQ,CAAG;QAAA;QAChEyE,CAAA,CAAY;UACVoE,OAAA,GAAS;UACTkH,KAAA,EAAO7P;QAAA,IAELiC,CAAA,IACFA,CAAA,EAAgB,GAAMjC,CAAA,EAAcoE,CAAA,CAExC;MAAA;IAAA;IAGIjD,CAAA,GAAKtB,CAAA,CAAW;MACpBsQ,KAAA,EAAK,SAAAA,CAAA;QACH5L,CAAA,CAAY;UACVoE,OAAA,GAAS;QAAA,IAGP1G,CAAA,IACFA,CAAA,EAAgB,GAAOhB,CAAA,EAAOmD,CAAA,CAElC;MAAA;MACAgM,WAAA,WAAAA,CAAYtQ,CAAA;QACVyE,CAAA,CAAY;UACVsL,KAAA,EAAO/P;QAAA,IAGLkC,CAAA,IACFA,CAAA,CAAclC,CAAA,EAAWsE,CAAA,CAE7B;MAAA;IAAA;IAGI/C,CAAA,GAAQuC,CAAA,CAAQ;MAAA,OAAA7C,CAAA,KAAYqD,CAAA,EAAUlD,CAAA,CAAO;IAAA,GAAK,CAACkD,CAAA,EAAOlD,CAAA;EAEhE,OACEpB,CAAA,CAAA8C,aAAA,CAAC5B,CAAA,CAAawQ,QAAA,EAAS;IAAAC,KAAA,EAAOpQ;EAAA,GAC3BjB,CAAA,EACDN,CAAA,CAAA8C,aAAA,CAAC2G,CAAA,EAAWxI,CAAA;IACV6O,MAAA,EAAQpL,CAAA;IACRmE,OAAA,EAAShG,CAAA;IACTkN,KAAA,EAAO5O,CAAA;IACP6O,aAAA,EAAe3O,CAAA,CAAGiP,WAAA;IAClBL,OAAA,EAAS5O,CAAA,CAAGgP;EAAA,GACRlM,CAAA,GAIZ;AAAA;ACnEM,IAAA0F,EAAA,GAAsC,SAAA+H,CAA7B5R,CAAA;EAQV,IC7C+DC,CAAA;IAC1DK,CAAA;IDqCR6B,CAAA,GAAGnC,CAAA,CAAH6G,GAAA;IACA1C,CAAA,GAAMnE,CAAA,CAAN2I,MAAA;IACAtE,CAAA,GAAOrE,CAAA,CAAPiP,OAAA;IACApM,CAAA,GAAK7C,CAAA,CAALgD,KAAA;IACAJ,CAAA,GAAM5C,CAAA,CAANiD,MAAA;IAAMjC,CAAA,GAAAhB,CAAA,CACN6R,QAAA;IAAA1Q,CAAA,QAAW,MAAHH,CAAA,GAAG,CAAC,aAAUA,CAAA;IACtBI,CAAA,GAAQpB,CAAA,CAARiR,QAAA;IAEM5P,CAAA,GAAeiD,CAAA,CAA6BpD,CAAA;IAC5CK,CAAA,IC/C4DtB,CAAA,GD+C3C,SAAA6R,CAAA;MAAA,OAAMzQ,CAAA,CAAa8P,MAAA,EAAQ;IAAA,IC9C1C7Q,CAAA,GAAYJ,CAAA,CAAO;MAAEyM,IAAA,GAAM;MAAOxM,EAAA,OAAI;IAAA,GAAtCE,OAAA,EACKsM,IAAA,KACXrM,CAAA,CAAQqM,IAAA,IAAO,GACfrM,CAAA,CAAQH,EAAA,GAAKF,CAAA,KAERK,CAAA,CAAQH,EAAA;ID0CTyB,CAAA,GAAY1B,CAAA,CAAoB;EAEtCuE,CAAA,CAA6E,QAAxDrD,CAAA,QAAwD,IAAxDA,CAAA,CAA0D2Q,GAAA,EAAK;IAAM,OAAAnQ,CAAA,CAAUvB,OAAO;EAAA,IAE3G6B,CAAA,CAAU;IACR,OAAY;MACVb,CAAA,CAAakQ,MAAA,CAAOhQ,CAAA,CACtB;IAAA,CACF;EAAA,GAAG;EAWH,IAAMO,CAAA,GAAK/B,CAAA,CAAW;MACpB4I,MAAA,WAAAA,CAAO3I,CAAA;QACL,OAAOmE,CAAA,IAAUA,CAAA,CAAOnE,CAAA,CAC1B;MAAA;MACAyR,IAAA,WAAAA,CAAKzR,CAAA,EAAmBE,CAAA;QACtBmB,CAAA,CAAaoQ,IAAA,CAAKlQ,CAAA,GAdtB,UAA0BvB,CAAA,EAAmBE,CAAA;UAC3C,IAAIkB,CAAA,EAAU;YACZ,IAAMnB,CAAA,GAAUmB,CAAA,CAAS4Q,KAAA,CAAMhS,CAAA;YAC3BC,CAAA,IACFA,CAAA,CAAQC,CAAA,CAEX;UAAA;QACH,CAQI,CAAiBF,CAAA,EAAWE,CAAA,CAC9B;MAAA;IAAA;IAGIkC,CAAA,GAAiB0B,CAAA,CAAQ;MAC7B,IAAM9D,CAAA,GAAW,CAAE;MAInB,OAHAmB,CAAA,CAAST,OAAA,CAAQ,UAACR,CAAA;QAChBF,CAAA,CAASE,CAAA,IAAa4B,CAAA,CAAG2P,IAAA,CAAKQ,IAAA,CAAK,MAAM/R,CAAA,CAC3C;MAAA,IACOF,CACT;IAAA,GAAG;EAcH,OAZAkC,CAAA,CAAU;IACRb,CAAA,CAAa+P,MAAA,CAAO;MAClBb,GAAA,EAAAhP,CAAA;MACAsF,GAAA,EAAA1E,CAAA;MACAyG,SAAA,EAAAhH,CAAA;MACA+G,MAAA,EAAQ7G,CAAA,CAAG6G,MAAA;MACXsG,OAAA,EAAA5K,CAAA;MACArB,KAAA,EAAAH,CAAA;MACAI,MAAA,EAAAL;IAAA,EAEJ;EAAA,GAAG,CAACT,CAAA,IAEAf,CAAA,GACK+B,CAAA,CAAS+O,IAAA,CAAKxN,CAAA,CAAatD,CAAA,EAAQH,CAAA,KAAOmB,CAAA,EAAc;IAAE2P,GAAA,EAAKnQ;EAAA,OAEjE,IACT;AAAA;AAAA,SAAAgI,CAAA,IAAAuI,aAAA,EAAA1I,CAAA,IAAA2I,WAAA,EAAAvI,EAAA,IAAA+H,SAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}